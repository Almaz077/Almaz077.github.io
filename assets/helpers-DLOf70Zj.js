import{R as oc,r as T,j as _,a as mr,c as yr}from"./index-Be2Hz3rG.js";import{u as rc,c as ic,v as sc}from"./shallow-Bm4ufq9Z.js";function ot(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,o;n<t.length;n++)(o=ot(t[n]))!==""&&(e+=(e&&" ")+o);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var cc={value:()=>{}};function Be(){for(var t=0,e=arguments.length,n={},o;t<e;++t){if(!(o=arguments[t]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Ce(n)}function Ce(t){this._=t}function ac(t,e){return t.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Ce.prototype=Be.prototype={constructor:Ce,on:function(t,e){var n=this._,o=ac(t+"",n),r,i=-1,s=o.length;if(arguments.length<2){for(;++i<s;)if((r=(t=o[i]).type)&&(r=lc(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++i<s;)if(r=(t=o[i]).type)n[r]=lo(n[r],t.name,e);else if(e==null)for(r in n)n[r]=lo(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ce(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,i;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],o=0,r=i.length;o<r;++o)i[o].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)}};function lc(t,e){for(var n=0,o=t.length,r;n<o;++n)if((r=t[n]).name===e)return r.value}function lo(t,e,n){for(var o=0,r=t.length;o<r;++o)if(t[o].name===e){t[o]=cc,t=t.slice(0,o).concat(t.slice(o+1));break}return n!=null&&t.push({name:e,value:n}),t}var Cn="http://www.w3.org/1999/xhtml";const uo={svg:"http://www.w3.org/2000/svg",xhtml:Cn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Fe(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),uo.hasOwnProperty(e)?{space:uo[e],local:t}:t}function uc(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Cn&&e.documentElement.namespaceURI===Cn?e.createElement(t):e.createElementNS(n,t)}}function fc(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function xr(t){var e=Fe(t);return(e.local?fc:uc)(e)}function dc(){}function On(t){return t==null?dc:function(){return this.querySelector(t)}}function hc(t){typeof t!="function"&&(t=On(t));for(var e=this._groups,n=e.length,o=new Array(n),r=0;r<n;++r)for(var i=e[r],s=i.length,c=o[r]=new Array(s),a,u,d=0;d<s;++d)(a=i[d])&&(u=t.call(a,a.__data__,d,i))&&("__data__"in a&&(u.__data__=a.__data__),c[d]=u);return new ct(o,this._parents)}function gc(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function pc(){return[]}function wr(t){return t==null?pc:function(){return this.querySelectorAll(t)}}function mc(t){return function(){return gc(t.apply(this,arguments))}}function yc(t){typeof t=="function"?t=mc(t):t=wr(t);for(var e=this._groups,n=e.length,o=[],r=[],i=0;i<n;++i)for(var s=e[i],c=s.length,a,u=0;u<c;++u)(a=s[u])&&(o.push(t.call(a,a.__data__,u,s)),r.push(a));return new ct(o,r)}function vr(t){return function(){return this.matches(t)}}function _r(t){return function(e){return e.matches(t)}}var xc=Array.prototype.find;function wc(t){return function(){return xc.call(this.children,t)}}function vc(){return this.firstElementChild}function _c(t){return this.select(t==null?vc:wc(typeof t=="function"?t:_r(t)))}var bc=Array.prototype.filter;function Ec(){return Array.from(this.children)}function Nc(t){return function(){return bc.call(this.children,t)}}function Sc(t){return this.selectAll(t==null?Ec:Nc(typeof t=="function"?t:_r(t)))}function Cc(t){typeof t!="function"&&(t=vr(t));for(var e=this._groups,n=e.length,o=new Array(n),r=0;r<n;++r)for(var i=e[r],s=i.length,c=o[r]=[],a,u=0;u<s;++u)(a=i[u])&&t.call(a,a.__data__,u,i)&&c.push(a);return new ct(o,this._parents)}function br(t){return new Array(t.length)}function kc(){return new ct(this._enter||this._groups.map(br),this._parents)}function Ie(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Ie.prototype={constructor:Ie,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Mc(t){return function(){return t}}function $c(t,e,n,o,r,i){for(var s=0,c,a=e.length,u=i.length;s<u;++s)(c=e[s])?(c.__data__=i[s],o[s]=c):n[s]=new Ie(t,i[s]);for(;s<a;++s)(c=e[s])&&(r[s]=c)}function Ic(t,e,n,o,r,i,s){var c,a,u=new Map,d=e.length,f=i.length,l=new Array(d),h;for(c=0;c<d;++c)(a=e[c])&&(l[c]=h=s.call(a,a.__data__,c,e)+"",u.has(h)?r[c]=a:u.set(h,a));for(c=0;c<f;++c)h=s.call(t,i[c],c,i)+"",(a=u.get(h))?(o[c]=a,a.__data__=i[c],u.delete(h)):n[c]=new Ie(t,i[c]);for(c=0;c<d;++c)(a=e[c])&&u.get(l[c])===a&&(r[c]=a)}function Ac(t){return t.__data__}function Tc(t,e){if(!arguments.length)return Array.from(this,Ac);var n=e?Ic:$c,o=this._parents,r=this._groups;typeof t!="function"&&(t=Mc(t));for(var i=r.length,s=new Array(i),c=new Array(i),a=new Array(i),u=0;u<i;++u){var d=o[u],f=r[u],l=f.length,h=Pc(t.call(d,d&&d.__data__,u,o)),g=h.length,y=c[u]=new Array(g),E=s[u]=new Array(g),x=a[u]=new Array(l);n(d,f,y,E,x,h,e);for(var b=0,p=0,w,M;b<g;++b)if(w=y[b]){for(b>=p&&(p=b+1);!(M=E[p])&&++p<g;);w._next=M||null}}return s=new ct(s,o),s._enter=c,s._exit=a,s}function Pc(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function zc(){return new ct(this._exit||this._groups.map(br),this._parents)}function Hc(t,e,n){var o=this.enter(),r=this,i=this.exit();return typeof t=="function"?(o=t(o),o&&(o=o.selection())):o=o.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?i.remove():n(i),o&&r?o.merge(r).order():r}function Dc(t){for(var e=t.selection?t.selection():t,n=this._groups,o=e._groups,r=n.length,i=o.length,s=Math.min(r,i),c=new Array(r),a=0;a<s;++a)for(var u=n[a],d=o[a],f=u.length,l=c[a]=new Array(f),h,g=0;g<f;++g)(h=u[g]||d[g])&&(l[g]=h);for(;a<r;++a)c[a]=n[a];return new ct(c,this._parents)}function Lc(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var o=t[e],r=o.length-1,i=o[r],s;--r>=0;)(s=o[r])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function Vc(t){t||(t=jc);function e(f,l){return f&&l?t(f.__data__,l.__data__):!f-!l}for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var s=n[i],c=s.length,a=r[i]=new Array(c),u,d=0;d<c;++d)(u=s[d])&&(a[d]=u);a.sort(e)}return new ct(r,this._parents).order()}function jc(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Rc(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Bc(){return Array.from(this)}function Fc(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var o=t[e],r=0,i=o.length;r<i;++r){var s=o[r];if(s)return s}return null}function Oc(){let t=0;for(const e of this)++t;return t}function Xc(){return!this.node()}function Yc(t){for(var e=this._groups,n=0,o=e.length;n<o;++n)for(var r=e[n],i=0,s=r.length,c;i<s;++i)(c=r[i])&&t.call(c,c.__data__,i,r);return this}function Wc(t){return function(){this.removeAttribute(t)}}function qc(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Gc(t,e){return function(){this.setAttribute(t,e)}}function Kc(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Zc(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Uc(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Qc(t,e){var n=Fe(t);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((e==null?n.local?qc:Wc:typeof e=="function"?n.local?Uc:Zc:n.local?Kc:Gc)(n,e))}function Er(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Jc(t){return function(){this.style.removeProperty(t)}}function ta(t,e,n){return function(){this.style.setProperty(t,e,n)}}function ea(t,e,n){return function(){var o=e.apply(this,arguments);o==null?this.style.removeProperty(t):this.style.setProperty(t,o,n)}}function na(t,e,n){return arguments.length>1?this.each((e==null?Jc:typeof e=="function"?ea:ta)(t,e,n??"")):Dt(this.node(),t)}function Dt(t,e){return t.style.getPropertyValue(e)||Er(t).getComputedStyle(t,null).getPropertyValue(e)}function oa(t){return function(){delete this[t]}}function ra(t,e){return function(){this[t]=e}}function ia(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function sa(t,e){return arguments.length>1?this.each((e==null?oa:typeof e=="function"?ia:ra)(t,e)):this.node()[t]}function Nr(t){return t.trim().split(/^|\s+/)}function Xn(t){return t.classList||new Sr(t)}function Sr(t){this._node=t,this._names=Nr(t.getAttribute("class")||"")}Sr.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Cr(t,e){for(var n=Xn(t),o=-1,r=e.length;++o<r;)n.add(e[o])}function kr(t,e){for(var n=Xn(t),o=-1,r=e.length;++o<r;)n.remove(e[o])}function ca(t){return function(){Cr(this,t)}}function aa(t){return function(){kr(this,t)}}function la(t,e){return function(){(e.apply(this,arguments)?Cr:kr)(this,t)}}function ua(t,e){var n=Nr(t+"");if(arguments.length<2){for(var o=Xn(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?la:e?ca:aa)(n,e))}function fa(){this.textContent=""}function da(t){return function(){this.textContent=t}}function ha(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function ga(t){return arguments.length?this.each(t==null?fa:(typeof t=="function"?ha:da)(t)):this.node().textContent}function pa(){this.innerHTML=""}function ma(t){return function(){this.innerHTML=t}}function ya(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function xa(t){return arguments.length?this.each(t==null?pa:(typeof t=="function"?ya:ma)(t)):this.node().innerHTML}function wa(){this.nextSibling&&this.parentNode.appendChild(this)}function va(){return this.each(wa)}function _a(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ba(){return this.each(_a)}function Ea(t){var e=typeof t=="function"?t:xr(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Na(){return null}function Sa(t,e){var n=typeof t=="function"?t:xr(t),o=e==null?Na:typeof e=="function"?e:On(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Ca(){var t=this.parentNode;t&&t.removeChild(this)}function ka(){return this.each(Ca)}function Ma(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function $a(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ia(t){return this.select(t?$a:Ma)}function Aa(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Ta(t){return function(e){t.call(this,e,this.__data__)}}function Pa(t){return t.trim().split(/^|\s+/).map(function(e){var n="",o=e.indexOf(".");return o>=0&&(n=e.slice(o+1),e=e.slice(0,o)),{type:e,name:n}})}function za(t){return function(){var e=this.__on;if(e){for(var n=0,o=-1,r=e.length,i;n<r;++n)i=e[n],(!t.type||i.type===t.type)&&i.name===t.name?this.removeEventListener(i.type,i.listener,i.options):e[++o]=i;++o?e.length=o:delete this.__on}}}function Ha(t,e,n){return function(){var o=this.__on,r,i=Ta(e);if(o){for(var s=0,c=o.length;s<c;++s)if((r=o[s]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=e;return}}this.addEventListener(t.type,i,n),r={type:t.type,name:t.name,value:e,listener:i,options:n},o?o.push(r):this.__on=[r]}}function Da(t,e,n){var o=Pa(t+""),r,i=o.length,s;if(arguments.length<2){var c=this.node().__on;if(c){for(var a=0,u=c.length,d;a<u;++a)for(r=0,d=c[a];r<i;++r)if((s=o[r]).type===d.type&&s.name===d.name)return d.value}return}for(c=e?Ha:za,r=0;r<i;++r)this.each(c(o[r],e,n));return this}function Mr(t,e,n){var o=Er(t),r=o.CustomEvent;typeof r=="function"?r=new r(e,n):(r=o.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function La(t,e){return function(){return Mr(this,t,e)}}function Va(t,e){return function(){return Mr(this,t,e.apply(this,arguments))}}function ja(t,e){return this.each((typeof e=="function"?Va:La)(t,e))}function*Ra(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var o=t[e],r=0,i=o.length,s;r<i;++r)(s=o[r])&&(yield s)}var $r=[null];function ct(t,e){this._groups=t,this._parents=e}function fe(){return new ct([[document.documentElement]],$r)}function Ba(){return this}ct.prototype=fe.prototype={constructor:ct,select:hc,selectAll:yc,selectChild:_c,selectChildren:Sc,filter:Cc,data:Tc,enter:kc,exit:zc,join:Hc,merge:Dc,selection:Ba,order:Lc,sort:Vc,call:Rc,nodes:Bc,node:Fc,size:Oc,empty:Xc,each:Yc,attr:Qc,style:na,property:sa,classed:ua,text:ga,html:xa,raise:va,lower:ba,append:Ea,insert:Sa,remove:ka,clone:Ia,datum:Aa,on:Da,dispatch:ja,[Symbol.iterator]:Ra};function st(t){return typeof t=="string"?new ct([[document.querySelector(t)]],[document.documentElement]):new ct([[t]],$r)}function Fa(t){let e;for(;e=t.sourceEvent;)t=e;return t}function lt(t,e){if(t=Fa(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=t.clientX,o.y=t.clientY,o=o.matrixTransform(e.getScreenCTM().inverse()),[o.x,o.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}const Oa={passive:!1},ee={capture:!0,passive:!1};function un(t){t.stopImmediatePropagation()}function zt(t){t.preventDefault(),t.stopImmediatePropagation()}function Ir(t){var e=t.document.documentElement,n=st(t).on("dragstart.drag",zt,ee);"onselectstart"in e?n.on("selectstart.drag",zt,ee):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Ar(t,e){var n=t.document.documentElement,o=st(t).on("dragstart.drag",null);e&&(o.on("click.drag",zt,ee),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const ye=t=>()=>t;function kn(t,{sourceEvent:e,subject:n,target:o,identifier:r,active:i,x:s,y:c,dx:a,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}kn.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Xa(t){return!t.ctrlKey&&!t.button}function Ya(){return this.parentNode}function Wa(t,e){return e??{x:t.x,y:t.y}}function qa(){return navigator.maxTouchPoints||"ontouchstart"in this}function Tr(){var t=Xa,e=Ya,n=Wa,o=qa,r={},i=Be("start","drag","end"),s=0,c,a,u,d,f=0;function l(w){w.on("mousedown.drag",h).filter(o).on("touchstart.drag",E).on("touchmove.drag",x,Oa).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(w,M){if(!(d||!t.call(this,w,M))){var I=p(this,e.call(this,w,M),w,M,"mouse");I&&(st(w.view).on("mousemove.drag",g,ee).on("mouseup.drag",y,ee),Ir(w.view),un(w),u=!1,c=w.clientX,a=w.clientY,I("start",w))}}function g(w){if(zt(w),!u){var M=w.clientX-c,I=w.clientY-a;u=M*M+I*I>f}r.mouse("drag",w)}function y(w){st(w.view).on("mousemove.drag mouseup.drag",null),Ar(w.view,u),zt(w),r.mouse("end",w)}function E(w,M){if(t.call(this,w,M)){var I=w.changedTouches,C=e.call(this,w,M),z=I.length,A,P;for(A=0;A<z;++A)(P=p(this,C,w,M,I[A].identifier,I[A]))&&(un(w),P("start",w,I[A]))}}function x(w){var M=w.changedTouches,I=M.length,C,z;for(C=0;C<I;++C)(z=r[M[C].identifier])&&(zt(w),z("drag",w,M[C]))}function b(w){var M=w.changedTouches,I=M.length,C,z;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),C=0;C<I;++C)(z=r[M[C].identifier])&&(un(w),z("end",w,M[C]))}function p(w,M,I,C,z,A){var P=i.copy(),V=lt(A||I,M),L,D,m;if((m=n.call(w,new kn("beforestart",{sourceEvent:I,target:l,identifier:z,active:s,x:V[0],y:V[1],dx:0,dy:0,dispatch:P}),C))!=null)return L=m.x-V[0]||0,D=m.y-V[1]||0,function S(v,k,$){var N=V,H;switch(v){case"start":r[z]=S,H=s++;break;case"end":delete r[z],--s;case"drag":V=lt($||k,M),H=s;break}P.call(v,w,new kn(v,{sourceEvent:k,subject:m,target:l,identifier:z,active:H,x:V[0]+L,y:V[1]+D,dx:V[0]-N[0],dy:V[1]-N[1],dispatch:P}),C)}}return l.filter=function(w){return arguments.length?(t=typeof w=="function"?w:ye(!!w),l):t},l.container=function(w){return arguments.length?(e=typeof w=="function"?w:ye(w),l):e},l.subject=function(w){return arguments.length?(n=typeof w=="function"?w:ye(w),l):n},l.touchable=function(w){return arguments.length?(o=typeof w=="function"?w:ye(!!w),l):o},l.on=function(){var w=i.on.apply(i,arguments);return w===i?l:w},l.clickDistance=function(w){return arguments.length?(f=(w=+w)*w,l):Math.sqrt(f)},l}function Yn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Pr(t,e){var n=Object.create(t.prototype);for(var o in e)n[o]=e[o];return n}function de(){}var ne=.7,Ae=1/ne,Ht="\\s*([+-]?\\d+)\\s*",oe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",gt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ga=/^#([0-9a-f]{3,8})$/,Ka=new RegExp(`^rgb\\(${Ht},${Ht},${Ht}\\)$`),Za=new RegExp(`^rgb\\(${gt},${gt},${gt}\\)$`),Ua=new RegExp(`^rgba\\(${Ht},${Ht},${Ht},${oe}\\)$`),Qa=new RegExp(`^rgba\\(${gt},${gt},${gt},${oe}\\)$`),Ja=new RegExp(`^hsl\\(${oe},${gt},${gt}\\)$`),tl=new RegExp(`^hsla\\(${oe},${gt},${gt},${oe}\\)$`),fo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Yn(de,re,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:ho,formatHex:ho,formatHex8:el,formatHsl:nl,formatRgb:go,toString:go});function ho(){return this.rgb().formatHex()}function el(){return this.rgb().formatHex8()}function nl(){return zr(this).formatHsl()}function go(){return this.rgb().formatRgb()}function re(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ga.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?po(e):n===3?new it(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?xe(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?xe(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Ka.exec(t))?new it(e[1],e[2],e[3],1):(e=Za.exec(t))?new it(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ua.exec(t))?xe(e[1],e[2],e[3],e[4]):(e=Qa.exec(t))?xe(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Ja.exec(t))?xo(e[1],e[2]/100,e[3]/100,1):(e=tl.exec(t))?xo(e[1],e[2]/100,e[3]/100,e[4]):fo.hasOwnProperty(t)?po(fo[t]):t==="transparent"?new it(NaN,NaN,NaN,0):null}function po(t){return new it(t>>16&255,t>>8&255,t&255,1)}function xe(t,e,n,o){return o<=0&&(t=e=n=NaN),new it(t,e,n,o)}function ol(t){return t instanceof de||(t=re(t)),t?(t=t.rgb(),new it(t.r,t.g,t.b,t.opacity)):new it}function Mn(t,e,n,o){return arguments.length===1?ol(t):new it(t,e,n,o??1)}function it(t,e,n,o){this.r=+t,this.g=+e,this.b=+n,this.opacity=+o}Yn(it,Mn,Pr(de,{brighter(t){return t=t==null?Ae:Math.pow(Ae,t),new it(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ne:Math.pow(ne,t),new it(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new it(Mt(this.r),Mt(this.g),Mt(this.b),Te(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:mo,formatHex:mo,formatHex8:rl,formatRgb:yo,toString:yo}));function mo(){return`#${kt(this.r)}${kt(this.g)}${kt(this.b)}`}function rl(){return`#${kt(this.r)}${kt(this.g)}${kt(this.b)}${kt((isNaN(this.opacity)?1:this.opacity)*255)}`}function yo(){const t=Te(this.opacity);return`${t===1?"rgb(":"rgba("}${Mt(this.r)}, ${Mt(this.g)}, ${Mt(this.b)}${t===1?")":`, ${t})`}`}function Te(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Mt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function kt(t){return t=Mt(t),(t<16?"0":"")+t.toString(16)}function xo(t,e,n,o){return o<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ut(t,e,n,o)}function zr(t){if(t instanceof ut)return new ut(t.h,t.s,t.l,t.opacity);if(t instanceof de||(t=re(t)),!t)return new ut;if(t instanceof ut)return t;t=t.rgb();var e=t.r/255,n=t.g/255,o=t.b/255,r=Math.min(e,n,o),i=Math.max(e,n,o),s=NaN,c=i-r,a=(i+r)/2;return c?(e===i?s=(n-o)/c+(n<o)*6:n===i?s=(o-e)/c+2:s=(e-n)/c+4,c/=a<.5?i+r:2-i-r,s*=60):c=a>0&&a<1?0:s,new ut(s,c,a,t.opacity)}function il(t,e,n,o){return arguments.length===1?zr(t):new ut(t,e,n,o??1)}function ut(t,e,n,o){this.h=+t,this.s=+e,this.l=+n,this.opacity=+o}Yn(ut,il,Pr(de,{brighter(t){return t=t==null?Ae:Math.pow(Ae,t),new ut(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ne:Math.pow(ne,t),new ut(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*e,r=2*n-o;return new it(fn(t>=240?t-240:t+120,r,o),fn(t,r,o),fn(t<120?t+240:t-120,r,o),this.opacity)},clamp(){return new ut(wo(this.h),we(this.s),we(this.l),Te(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Te(this.opacity);return`${t===1?"hsl(":"hsla("}${wo(this.h)}, ${we(this.s)*100}%, ${we(this.l)*100}%${t===1?")":`, ${t})`}`}}));function wo(t){return t=(t||0)%360,t<0?t+360:t}function we(t){return Math.max(0,Math.min(1,t||0))}function fn(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Hr=t=>()=>t;function sl(t,e){return function(n){return t+n*e}}function cl(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(o){return Math.pow(t+o*e,n)}}function al(t){return(t=+t)==1?Dr:function(e,n){return n-e?cl(e,n,t):Hr(isNaN(e)?n:e)}}function Dr(t,e){var n=e-t;return n?sl(t,n):Hr(isNaN(t)?e:t)}const vo=function t(e){var n=al(e);function o(r,i){var s=n((r=Mn(r)).r,(i=Mn(i)).r),c=n(r.g,i.g),a=n(r.b,i.b),u=Dr(r.opacity,i.opacity);return function(d){return r.r=s(d),r.g=c(d),r.b=a(d),r.opacity=u(d),r+""}}return o.gamma=t,o}(1);function Et(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var $n=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dn=new RegExp($n.source,"g");function ll(t){return function(){return t}}function ul(t){return function(e){return t(e)+""}}function fl(t,e){var n=$n.lastIndex=dn.lastIndex=0,o,r,i,s=-1,c=[],a=[];for(t=t+"",e=e+"";(o=$n.exec(t))&&(r=dn.exec(e));)(i=r.index)>n&&(i=e.slice(n,i),c[s]?c[s]+=i:c[++s]=i),(o=o[0])===(r=r[0])?c[s]?c[s]+=r:c[++s]=r:(c[++s]=null,a.push({i:s,x:Et(o,r)})),n=dn.lastIndex;return n<e.length&&(i=e.slice(n),c[s]?c[s]+=i:c[++s]=i),c.length<2?a[0]?ul(a[0].x):ll(e):(e=a.length,function(u){for(var d=0,f;d<e;++d)c[(f=a[d]).i]=f.x(u);return c.join("")})}var _o=180/Math.PI,In={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Lr(t,e,n,o,r,i){var s,c,a;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(a=t*n+e*o)&&(n-=t*a,o-=e*a),(c=Math.sqrt(n*n+o*o))&&(n/=c,o/=c,a/=c),t*o<e*n&&(t=-t,e=-e,a=-a,s=-s),{translateX:r,translateY:i,rotate:Math.atan2(e,t)*_o,skewX:Math.atan(a)*_o,scaleX:s,scaleY:c}}var ve;function dl(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?In:Lr(e.a,e.b,e.c,e.d,e.e,e.f)}function hl(t){return t==null||(ve||(ve=document.createElementNS("http://www.w3.org/2000/svg","g")),ve.setAttribute("transform",t),!(t=ve.transform.baseVal.consolidate()))?In:(t=t.matrix,Lr(t.a,t.b,t.c,t.d,t.e,t.f))}function Vr(t,e,n,o){function r(u){return u.length?u.pop()+" ":""}function i(u,d,f,l,h,g){if(u!==f||d!==l){var y=h.push("translate(",null,e,null,n);g.push({i:y-4,x:Et(u,f)},{i:y-2,x:Et(d,l)})}else(f||l)&&h.push("translate("+f+e+l+n)}function s(u,d,f,l){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),l.push({i:f.push(r(f)+"rotate(",null,o)-2,x:Et(u,d)})):d&&f.push(r(f)+"rotate("+d+o)}function c(u,d,f,l){u!==d?l.push({i:f.push(r(f)+"skewX(",null,o)-2,x:Et(u,d)}):d&&f.push(r(f)+"skewX("+d+o)}function a(u,d,f,l,h,g){if(u!==f||d!==l){var y=h.push(r(h)+"scale(",null,",",null,")");g.push({i:y-4,x:Et(u,f)},{i:y-2,x:Et(d,l)})}else(f!==1||l!==1)&&h.push(r(h)+"scale("+f+","+l+")")}return function(u,d){var f=[],l=[];return u=t(u),d=t(d),i(u.translateX,u.translateY,d.translateX,d.translateY,f,l),s(u.rotate,d.rotate,f,l),c(u.skewX,d.skewX,f,l),a(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,l),u=d=null,function(h){for(var g=-1,y=l.length,E;++g<y;)f[(E=l[g]).i]=E.x(h);return f.join("")}}}var gl=Vr(dl,"px, ","px)","deg)"),pl=Vr(hl,", ",")",")"),ml=1e-12;function bo(t){return((t=Math.exp(t))+1/t)/2}function yl(t){return((t=Math.exp(t))-1/t)/2}function xl(t){return((t=Math.exp(2*t))-1)/(t+1)}const wl=function t(e,n,o){function r(i,s){var c=i[0],a=i[1],u=i[2],d=s[0],f=s[1],l=s[2],h=d-c,g=f-a,y=h*h+g*g,E,x;if(y<ml)x=Math.log(l/u)/e,E=function(C){return[c+C*h,a+C*g,u*Math.exp(e*C*x)]};else{var b=Math.sqrt(y),p=(l*l-u*u+o*y)/(2*u*n*b),w=(l*l-u*u-o*y)/(2*l*n*b),M=Math.log(Math.sqrt(p*p+1)-p),I=Math.log(Math.sqrt(w*w+1)-w);x=(I-M)/e,E=function(C){var z=C*x,A=bo(M),P=u/(n*b)*(A*xl(e*z+M)-yl(M));return[c+P*h,a+P*g,u*A/bo(e*z+M)]}}return E.duration=x*1e3*e/Math.SQRT2,E}return r.rho=function(i){var s=Math.max(.001,+i),c=s*s,a=c*c;return t(s,c,a)},r}(Math.SQRT2,2,4);var Lt=0,Ut=0,Gt=0,jr=1e3,Pe,Qt,ze=0,It=0,Oe=0,ie=typeof performance=="object"&&performance.now?performance:Date,Rr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Wn(){return It||(Rr(vl),It=ie.now()+Oe)}function vl(){It=0}function He(){this._call=this._time=this._next=null}He.prototype=Br.prototype={constructor:He,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Wn():+n)+(e==null?0:+e),!this._next&&Qt!==this&&(Qt?Qt._next=this:Pe=this,Qt=this),this._call=t,this._time=n,An()},stop:function(){this._call&&(this._call=null,this._time=1/0,An())}};function Br(t,e,n){var o=new He;return o.restart(t,e,n),o}function _l(){Wn(),++Lt;for(var t=Pe,e;t;)(e=It-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Lt}function Eo(){It=(ze=ie.now())+Oe,Lt=Ut=0;try{_l()}finally{Lt=0,El(),It=0}}function bl(){var t=ie.now(),e=t-ze;e>jr&&(Oe-=e,ze=t)}function El(){for(var t,e=Pe,n,o=1/0;e;)e._call?(o>e._time&&(o=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Pe=n);Qt=t,An(o)}function An(t){if(!Lt){Ut&&(Ut=clearTimeout(Ut));var e=t-It;e>24?(t<1/0&&(Ut=setTimeout(Eo,t-ie.now()-Oe)),Gt&&(Gt=clearInterval(Gt))):(Gt||(ze=ie.now(),Gt=setInterval(bl,jr)),Lt=1,Rr(Eo))}}function No(t,e,n){var o=new He;return e=e==null?0:+e,o.restart(r=>{o.stop(),t(r+e)},e,n),o}var Nl=Be("start","end","cancel","interrupt"),Sl=[],Fr=0,So=1,Tn=2,ke=3,Co=4,Pn=5,Me=6;function Xe(t,e,n,o,r,i){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;Cl(t,n,{name:e,index:o,group:r,on:Nl,tween:Sl,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Fr})}function qn(t,e){var n=ht(t,e);if(n.state>Fr)throw new Error("too late; already scheduled");return n}function pt(t,e){var n=ht(t,e);if(n.state>ke)throw new Error("too late; already running");return n}function ht(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Cl(t,e,n){var o=t.__transition,r;o[e]=n,n.timer=Br(i,0,n.time);function i(u){n.state=So,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var d,f,l,h;if(n.state!==So)return a();for(d in o)if(h=o[d],h.name===n.name){if(h.state===ke)return No(s);h.state===Co?(h.state=Me,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete o[d]):+d<e&&(h.state=Me,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete o[d])}if(No(function(){n.state===ke&&(n.state=Co,n.timer.restart(c,n.delay,n.time),c(u))}),n.state=Tn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Tn){for(n.state=ke,r=new Array(l=n.tween.length),d=0,f=-1;d<l;++d)(h=n.tween[d].value.call(t,t.__data__,n.index,n.group))&&(r[++f]=h);r.length=f+1}}function c(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(a),n.state=Pn,1),f=-1,l=r.length;++f<l;)r[f].call(t,d);n.state===Pn&&(n.on.call("end",t,t.__data__,n.index,n.group),a())}function a(){n.state=Me,n.timer.stop(),delete o[e];for(var u in o)return;delete t.__transition}}function $e(t,e){var n=t.__transition,o,r,i=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((o=n[s]).name!==e){i=!1;continue}r=o.state>Tn&&o.state<Pn,o.state=Me,o.timer.stop(),o.on.call(r?"interrupt":"cancel",t,t.__data__,o.index,o.group),delete n[s]}i&&delete t.__transition}}function kl(t){return this.each(function(){$e(this,t)})}function Ml(t,e){var n,o;return function(){var r=pt(this,t),i=r.tween;if(i!==n){o=n=i;for(var s=0,c=o.length;s<c;++s)if(o[s].name===e){o=o.slice(),o.splice(s,1);break}}r.tween=o}}function $l(t,e,n){var o,r;if(typeof n!="function")throw new Error;return function(){var i=pt(this,t),s=i.tween;if(s!==o){r=(o=s).slice();for(var c={name:e,value:n},a=0,u=r.length;a<u;++a)if(r[a].name===e){r[a]=c;break}a===u&&r.push(c)}i.tween=r}}function Il(t,e){var n=this._id;if(t+="",arguments.length<2){for(var o=ht(this.node(),n).tween,r=0,i=o.length,s;r<i;++r)if((s=o[r]).name===t)return s.value;return null}return this.each((e==null?Ml:$l)(n,t,e))}function Gn(t,e,n){var o=t._id;return t.each(function(){var r=pt(this,o);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return ht(r,o).value[e]}}function Or(t,e){var n;return(typeof e=="number"?Et:e instanceof re?vo:(n=re(e))?(e=n,vo):fl)(t,e)}function Al(t){return function(){this.removeAttribute(t)}}function Tl(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Pl(t,e,n){var o,r=n+"",i;return function(){var s=this.getAttribute(t);return s===r?null:s===o?i:i=e(o=s,n)}}function zl(t,e,n){var o,r=n+"",i;return function(){var s=this.getAttributeNS(t.space,t.local);return s===r?null:s===o?i:i=e(o=s,n)}}function Hl(t,e,n){var o,r,i;return function(){var s,c=n(this),a;return c==null?void this.removeAttribute(t):(s=this.getAttribute(t),a=c+"",s===a?null:s===o&&a===r?i:(r=a,i=e(o=s,c)))}}function Dl(t,e,n){var o,r,i;return function(){var s,c=n(this),a;return c==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),a=c+"",s===a?null:s===o&&a===r?i:(r=a,i=e(o=s,c)))}}function Ll(t,e){var n=Fe(t),o=n==="transform"?pl:Or;return this.attrTween(t,typeof e=="function"?(n.local?Dl:Hl)(n,o,Gn(this,"attr."+t,e)):e==null?(n.local?Tl:Al)(n):(n.local?zl:Pl)(n,o,e))}function Vl(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function jl(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Rl(t,e){var n,o;function r(){var i=e.apply(this,arguments);return i!==o&&(n=(o=i)&&jl(t,i)),n}return r._value=e,r}function Bl(t,e){var n,o;function r(){var i=e.apply(this,arguments);return i!==o&&(n=(o=i)&&Vl(t,i)),n}return r._value=e,r}function Fl(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var o=Fe(t);return this.tween(n,(o.local?Rl:Bl)(o,e))}function Ol(t,e){return function(){qn(this,t).delay=+e.apply(this,arguments)}}function Xl(t,e){return e=+e,function(){qn(this,t).delay=e}}function Yl(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Ol:Xl)(e,t)):ht(this.node(),e).delay}function Wl(t,e){return function(){pt(this,t).duration=+e.apply(this,arguments)}}function ql(t,e){return e=+e,function(){pt(this,t).duration=e}}function Gl(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Wl:ql)(e,t)):ht(this.node(),e).duration}function Kl(t,e){if(typeof e!="function")throw new Error;return function(){pt(this,t).ease=e}}function Zl(t){var e=this._id;return arguments.length?this.each(Kl(e,t)):ht(this.node(),e).ease}function Ul(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;pt(this,t).ease=n}}function Ql(t){if(typeof t!="function")throw new Error;return this.each(Ul(this._id,t))}function Jl(t){typeof t!="function"&&(t=vr(t));for(var e=this._groups,n=e.length,o=new Array(n),r=0;r<n;++r)for(var i=e[r],s=i.length,c=o[r]=[],a,u=0;u<s;++u)(a=i[u])&&t.call(a,a.__data__,u,i)&&c.push(a);return new wt(o,this._parents,this._name,this._id)}function tu(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,o=e.length,r=n.length,i=Math.min(o,r),s=new Array(o),c=0;c<i;++c)for(var a=e[c],u=n[c],d=a.length,f=s[c]=new Array(d),l,h=0;h<d;++h)(l=a[h]||u[h])&&(f[h]=l);for(;c<o;++c)s[c]=e[c];return new wt(s,this._parents,this._name,this._id)}function eu(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function nu(t,e,n){var o,r,i=eu(e)?qn:pt;return function(){var s=i(this,t),c=s.on;c!==o&&(r=(o=c).copy()).on(e,n),s.on=r}}function ou(t,e){var n=this._id;return arguments.length<2?ht(this.node(),n).on.on(t):this.each(nu(n,t,e))}function ru(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function iu(){return this.on("end.remove",ru(this._id))}function su(t){var e=this._name,n=this._id;typeof t!="function"&&(t=On(t));for(var o=this._groups,r=o.length,i=new Array(r),s=0;s<r;++s)for(var c=o[s],a=c.length,u=i[s]=new Array(a),d,f,l=0;l<a;++l)(d=c[l])&&(f=t.call(d,d.__data__,l,c))&&("__data__"in d&&(f.__data__=d.__data__),u[l]=f,Xe(u[l],e,n,l,u,ht(d,n)));return new wt(i,this._parents,e,n)}function cu(t){var e=this._name,n=this._id;typeof t!="function"&&(t=wr(t));for(var o=this._groups,r=o.length,i=[],s=[],c=0;c<r;++c)for(var a=o[c],u=a.length,d,f=0;f<u;++f)if(d=a[f]){for(var l=t.call(d,d.__data__,f,a),h,g=ht(d,n),y=0,E=l.length;y<E;++y)(h=l[y])&&Xe(h,e,n,y,l,g);i.push(l),s.push(d)}return new wt(i,s,e,n)}var au=fe.prototype.constructor;function lu(){return new au(this._groups,this._parents)}function uu(t,e){var n,o,r;return function(){var i=Dt(this,t),s=(this.style.removeProperty(t),Dt(this,t));return i===s?null:i===n&&s===o?r:r=e(n=i,o=s)}}function Xr(t){return function(){this.style.removeProperty(t)}}function fu(t,e,n){var o,r=n+"",i;return function(){var s=Dt(this,t);return s===r?null:s===o?i:i=e(o=s,n)}}function du(t,e,n){var o,r,i;return function(){var s=Dt(this,t),c=n(this),a=c+"";return c==null&&(a=c=(this.style.removeProperty(t),Dt(this,t))),s===a?null:s===o&&a===r?i:(r=a,i=e(o=s,c))}}function hu(t,e){var n,o,r,i="style."+e,s="end."+i,c;return function(){var a=pt(this,t),u=a.on,d=a.value[i]==null?c||(c=Xr(e)):void 0;(u!==n||r!==d)&&(o=(n=u).copy()).on(s,r=d),a.on=o}}function gu(t,e,n){var o=(t+="")=="transform"?gl:Or;return e==null?this.styleTween(t,uu(t,o)).on("end.style."+t,Xr(t)):typeof e=="function"?this.styleTween(t,du(t,o,Gn(this,"style."+t,e))).each(hu(this._id,t)):this.styleTween(t,fu(t,o,e),n).on("end.style."+t,null)}function pu(t,e,n){return function(o){this.style.setProperty(t,e.call(this,o),n)}}function mu(t,e,n){var o,r;function i(){var s=e.apply(this,arguments);return s!==r&&(o=(r=s)&&pu(t,s,n)),o}return i._value=e,i}function yu(t,e,n){var o="style."+(t+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(e==null)return this.tween(o,null);if(typeof e!="function")throw new Error;return this.tween(o,mu(t,e,n??""))}function xu(t){return function(){this.textContent=t}}function wu(t){return function(){var e=t(this);this.textContent=e??""}}function vu(t){return this.tween("text",typeof t=="function"?wu(Gn(this,"text",t)):xu(t==null?"":t+""))}function _u(t){return function(e){this.textContent=t.call(this,e)}}function bu(t){var e,n;function o(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&_u(r)),e}return o._value=t,o}function Eu(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,bu(t))}function Nu(){for(var t=this._name,e=this._id,n=Yr(),o=this._groups,r=o.length,i=0;i<r;++i)for(var s=o[i],c=s.length,a,u=0;u<c;++u)if(a=s[u]){var d=ht(a,e);Xe(a,t,n,u,s,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new wt(o,this._parents,t,n)}function Su(){var t,e,n=this,o=n._id,r=n.size();return new Promise(function(i,s){var c={value:s},a={value:function(){--r===0&&i()}};n.each(function(){var u=pt(this,o),d=u.on;d!==t&&(e=(t=d).copy(),e._.cancel.push(c),e._.interrupt.push(c),e._.end.push(a)),u.on=e}),r===0&&i()})}var Cu=0;function wt(t,e,n,o){this._groups=t,this._parents=e,this._name=n,this._id=o}function Yr(){return++Cu}var mt=fe.prototype;wt.prototype={constructor:wt,select:su,selectAll:cu,selectChild:mt.selectChild,selectChildren:mt.selectChildren,filter:Jl,merge:tu,selection:lu,transition:Nu,call:mt.call,nodes:mt.nodes,node:mt.node,size:mt.size,empty:mt.empty,each:mt.each,on:ou,attr:Ll,attrTween:Fl,style:gu,styleTween:yu,text:vu,textTween:Eu,remove:iu,tween:Il,delay:Yl,duration:Gl,ease:Zl,easeVarying:Ql,end:Su,[Symbol.iterator]:mt[Symbol.iterator]};function ku(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Mu={time:null,delay:0,duration:250,ease:ku};function $u(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Iu(t){var e,n;t instanceof wt?(e=t._id,t=t._name):(e=Yr(),(n=Mu).time=Wn(),t=t==null?null:t+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var s=o[i],c=s.length,a,u=0;u<c;++u)(a=s[u])&&Xe(a,t,e,u,s,n||$u(a,e));return new wt(o,this._parents,t,e)}fe.prototype.interrupt=kl;fe.prototype.transition=Iu;const _e=t=>()=>t;function Au(t,{sourceEvent:e,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function yt(t,e,n){this.k=t,this.x=e,this.y=n}yt.prototype={constructor:yt,scale:function(t){return t===1?this:new yt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new yt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ye=new yt(1,0,0);Wr.prototype=yt.prototype;function Wr(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Ye;return t.__zoom}function hn(t){t.stopImmediatePropagation()}function Kt(t){t.preventDefault(),t.stopImmediatePropagation()}function Tu(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Pu(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function ko(){return this.__zoom||Ye}function zu(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Hu(){return navigator.maxTouchPoints||"ontouchstart"in this}function Du(t,e,n){var o=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],i=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function qr(){var t=Tu,e=Pu,n=Du,o=zu,r=Hu,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],c=250,a=wl,u=Be("start","zoom","end"),d,f,l,h=500,g=150,y=0,E=10;function x(m){m.property("__zoom",ko).on("wheel.zoom",z,{passive:!1}).on("mousedown.zoom",A).on("dblclick.zoom",P).filter(r).on("touchstart.zoom",V).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",D).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(m,S,v,k){var $=m.selection?m.selection():m;$.property("__zoom",ko),m!==$?M(m,S,v,k):$.interrupt().each(function(){I(this,arguments).event(k).start().zoom(null,typeof S=="function"?S.apply(this,arguments):S).end()})},x.scaleBy=function(m,S,v,k){x.scaleTo(m,function(){var $=this.__zoom.k,N=typeof S=="function"?S.apply(this,arguments):S;return $*N},v,k)},x.scaleTo=function(m,S,v,k){x.transform(m,function(){var $=e.apply(this,arguments),N=this.__zoom,H=v==null?w($):typeof v=="function"?v.apply(this,arguments):v,j=N.invert(H),R=typeof S=="function"?S.apply(this,arguments):S;return n(p(b(N,R),H,j),$,s)},v,k)},x.translateBy=function(m,S,v,k){x.transform(m,function(){return n(this.__zoom.translate(typeof S=="function"?S.apply(this,arguments):S,typeof v=="function"?v.apply(this,arguments):v),e.apply(this,arguments),s)},null,k)},x.translateTo=function(m,S,v,k,$){x.transform(m,function(){var N=e.apply(this,arguments),H=this.__zoom,j=k==null?w(N):typeof k=="function"?k.apply(this,arguments):k;return n(Ye.translate(j[0],j[1]).scale(H.k).translate(typeof S=="function"?-S.apply(this,arguments):-S,typeof v=="function"?-v.apply(this,arguments):-v),N,s)},k,$)};function b(m,S){return S=Math.max(i[0],Math.min(i[1],S)),S===m.k?m:new yt(S,m.x,m.y)}function p(m,S,v){var k=S[0]-v[0]*m.k,$=S[1]-v[1]*m.k;return k===m.x&&$===m.y?m:new yt(m.k,k,$)}function w(m){return[(+m[0][0]+ +m[1][0])/2,(+m[0][1]+ +m[1][1])/2]}function M(m,S,v,k){m.on("start.zoom",function(){I(this,arguments).event(k).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(k).end()}).tween("zoom",function(){var $=this,N=arguments,H=I($,N).event(k),j=e.apply($,N),R=v==null?w(j):typeof v=="function"?v.apply($,N):v,Y=Math.max(j[1][0]-j[0][0],j[1][1]-j[0][1]),F=$.__zoom,X=typeof S=="function"?S.apply($,N):S,W=a(F.invert(R).concat(Y/F.k),X.invert(R).concat(Y/X.k));return function(B){if(B===1)B=X;else{var q=W(B),Z=Y/q[2];B=new yt(Z,R[0]-q[0]*Z,R[1]-q[1]*Z)}H.zoom(null,B)}})}function I(m,S,v){return!v&&m.__zooming||new C(m,S)}function C(m,S){this.that=m,this.args=S,this.active=0,this.sourceEvent=null,this.extent=e.apply(m,S),this.taps=0}C.prototype={event:function(m){return m&&(this.sourceEvent=m),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(m,S){return this.mouse&&m!=="mouse"&&(this.mouse[1]=S.invert(this.mouse[0])),this.touch0&&m!=="touch"&&(this.touch0[1]=S.invert(this.touch0[0])),this.touch1&&m!=="touch"&&(this.touch1[1]=S.invert(this.touch1[0])),this.that.__zoom=S,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(m){var S=st(this.that).datum();u.call(m,this.that,new Au(m,{sourceEvent:this.sourceEvent,target:x,transform:this.that.__zoom,dispatch:u}),S)}};function z(m,...S){if(!t.apply(this,arguments))return;var v=I(this,S).event(m),k=this.__zoom,$=Math.max(i[0],Math.min(i[1],k.k*Math.pow(2,o.apply(this,arguments)))),N=lt(m);if(v.wheel)(v.mouse[0][0]!==N[0]||v.mouse[0][1]!==N[1])&&(v.mouse[1]=k.invert(v.mouse[0]=N)),clearTimeout(v.wheel);else{if(k.k===$)return;v.mouse=[N,k.invert(N)],$e(this),v.start()}Kt(m),v.wheel=setTimeout(H,g),v.zoom("mouse",n(p(b(k,$),v.mouse[0],v.mouse[1]),v.extent,s));function H(){v.wheel=null,v.end()}}function A(m,...S){if(l||!t.apply(this,arguments))return;var v=m.currentTarget,k=I(this,S,!0).event(m),$=st(m.view).on("mousemove.zoom",R,!0).on("mouseup.zoom",Y,!0),N=lt(m,v),H=m.clientX,j=m.clientY;Ir(m.view),hn(m),k.mouse=[N,this.__zoom.invert(N)],$e(this),k.start();function R(F){if(Kt(F),!k.moved){var X=F.clientX-H,W=F.clientY-j;k.moved=X*X+W*W>y}k.event(F).zoom("mouse",n(p(k.that.__zoom,k.mouse[0]=lt(F,v),k.mouse[1]),k.extent,s))}function Y(F){$.on("mousemove.zoom mouseup.zoom",null),Ar(F.view,k.moved),Kt(F),k.event(F).end()}}function P(m,...S){if(t.apply(this,arguments)){var v=this.__zoom,k=lt(m.changedTouches?m.changedTouches[0]:m,this),$=v.invert(k),N=v.k*(m.shiftKey?.5:2),H=n(p(b(v,N),k,$),e.apply(this,S),s);Kt(m),c>0?st(this).transition().duration(c).call(M,H,k,m):st(this).call(x.transform,H,k,m)}}function V(m,...S){if(t.apply(this,arguments)){var v=m.touches,k=v.length,$=I(this,S,m.changedTouches.length===k).event(m),N,H,j,R;for(hn(m),H=0;H<k;++H)j=v[H],R=lt(j,this),R=[R,this.__zoom.invert(R),j.identifier],$.touch0?!$.touch1&&$.touch0[2]!==R[2]&&($.touch1=R,$.taps=0):($.touch0=R,N=!0,$.taps=1+!!d);d&&(d=clearTimeout(d)),N&&($.taps<2&&(f=R[0],d=setTimeout(function(){d=null},h)),$e(this),$.start())}}function L(m,...S){if(this.__zooming){var v=I(this,S).event(m),k=m.changedTouches,$=k.length,N,H,j,R;for(Kt(m),N=0;N<$;++N)H=k[N],j=lt(H,this),v.touch0&&v.touch0[2]===H.identifier?v.touch0[0]=j:v.touch1&&v.touch1[2]===H.identifier&&(v.touch1[0]=j);if(H=v.that.__zoom,v.touch1){var Y=v.touch0[0],F=v.touch0[1],X=v.touch1[0],W=v.touch1[1],B=(B=X[0]-Y[0])*B+(B=X[1]-Y[1])*B,q=(q=W[0]-F[0])*q+(q=W[1]-F[1])*q;H=b(H,Math.sqrt(B/q)),j=[(Y[0]+X[0])/2,(Y[1]+X[1])/2],R=[(F[0]+W[0])/2,(F[1]+W[1])/2]}else if(v.touch0)j=v.touch0[0],R=v.touch0[1];else return;v.zoom("touch",n(p(H,j,R),v.extent,s))}}function D(m,...S){if(this.__zooming){var v=I(this,S).event(m),k=m.changedTouches,$=k.length,N,H;for(hn(m),l&&clearTimeout(l),l=setTimeout(function(){l=null},h),N=0;N<$;++N)H=k[N],v.touch0&&v.touch0[2]===H.identifier?delete v.touch0:v.touch1&&v.touch1[2]===H.identifier&&delete v.touch1;if(v.touch1&&!v.touch0&&(v.touch0=v.touch1,delete v.touch1),v.touch0)v.touch0[1]=this.__zoom.invert(v.touch0[0]);else if(v.end(),v.taps===2&&(H=lt(H,this),Math.hypot(f[0]-H[0],f[1]-H[1])<E)){var j=st(this).on("dblclick.zoom");j&&j.apply(this,arguments)}}}return x.wheelDelta=function(m){return arguments.length?(o=typeof m=="function"?m:_e(+m),x):o},x.filter=function(m){return arguments.length?(t=typeof m=="function"?m:_e(!!m),x):t},x.touchable=function(m){return arguments.length?(r=typeof m=="function"?m:_e(!!m),x):r},x.extent=function(m){return arguments.length?(e=typeof m=="function"?m:_e([[+m[0][0],+m[0][1]],[+m[1][0],+m[1][1]]]),x):e},x.scaleExtent=function(m){return arguments.length?(i[0]=+m[0],i[1]=+m[1],x):[i[0],i[1]]},x.translateExtent=function(m){return arguments.length?(s[0][0]=+m[0][0],s[1][0]=+m[1][0],s[0][1]=+m[0][1],s[1][1]=+m[1][1],x):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},x.constrain=function(m){return arguments.length?(n=m,x):n},x.duration=function(m){return arguments.length?(c=+m,x):c},x.interpolate=function(m){return arguments.length?(a=m,x):a},x.on=function(){var m=u.on.apply(u,arguments);return m===u?x:m},x.clickDistance=function(m){return arguments.length?(y=(m=+m)*m,x):Math.sqrt(y)},x.tapDistance=function(m){return arguments.length?(E=+m,x):E},x}const dt={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:o})=>`Couldn't create edge for ${t} handle id: "${t==="source"?n:o}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},se=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Gr=["Enter"," ","Escape"];var Vt;(function(t){t.Strict="strict",t.Loose="loose"})(Vt||(Vt={}));var $t;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})($t||($t={}));var ce;(function(t){t.Partial="partial",t.Full="full"})(ce||(ce={}));const Kr={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Nt;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Nt||(Nt={}));var De;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(De||(De={}));var O;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(O||(O={}));const Mo={[O.Left]:O.Right,[O.Right]:O.Left,[O.Top]:O.Bottom,[O.Bottom]:O.Top};function Lu(t,e){if(!t&&!e)return!0;if(!t||!e||t.size!==e.size)return!1;if(!t.size&&!e.size)return!0;for(const n of t.keys())if(!e.has(n))return!1;return!0}function $o(t,e,n){if(!n)return;const o=[];t.forEach((r,i)=>{e!=null&&e.has(i)||o.push(r)}),o.length&&n(o)}function Zr(t){return t===null?null:t?"valid":"invalid"}const Ur=t=>"id"in t&&"source"in t&&"target"in t,Vu=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),Kn=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),kg=(t,e,n)=>{if(!t.id)return[];const o=new Set;return n.forEach(r=>{r.source===t.id&&o.add(r.target)}),e.filter(r=>o.has(r.id))},Mg=(t,e,n)=>{if(!t.id)return[];const o=new Set;return n.forEach(r=>{r.target===t.id&&o.add(r.source)}),e.filter(r=>o.has(r.id))},he=(t,e=[0,0])=>{const{width:n,height:o}=vt(t),r=t.origin??e,i=n*r[0],s=o*r[1];return{x:t.position.x-i,y:t.position.y-s}},ju=(t,e={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((o,r)=>{const i=typeof r=="string";let s=!e.nodeLookup&&!i?r:void 0;e.nodeLookup&&(s=i?e.nodeLookup.get(r):Kn(r)?r:e.nodeLookup.get(r.id));const c=s?Le(s,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return We(o,c)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return qe(n)},Ft=(t,e={})=>{if(t.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return t.forEach(o=>{if(e.filter===void 0||e.filter(o)){const r=Le(o);n=We(n,r)}}),qe(n)},Qr=(t,e,[n,o,r]=[0,0,1],i=!1,s=!1)=>{const c={...ge(e,[n,o,r]),width:e.width/r,height:e.height/r},a=[];for(const u of t.values()){const{measured:d,selectable:f=!0,hidden:l=!1}=u;if(s&&!f||l)continue;const h=d.width??u.width??u.initialWidth??null,g=d.height??u.height??u.initialHeight??null,y=ae(c,Rt(u)),E=(h??0)*(g??0),x=i&&y>0;(!u.internals.handleBounds||x||y>=E||u.dragging)&&a.push(u)}return a},Ru=(t,e)=>{const n=new Set;return t.forEach(o=>{n.add(o.id)}),e.filter(o=>n.has(o.source)||n.has(o.target))};function zn(t,e){const n=new Map,o=e!=null&&e.nodes?new Set(e.nodes.map(r=>r.id)):null;return t.forEach(r=>{r.measured.width&&r.measured.height&&((e==null?void 0:e.includeHiddenNodes)||!r.hidden)&&(!o||o.has(r.id))&&n.set(r.id,r)}),n}async function Hn({nodes:t,width:e,height:n,panZoom:o,minZoom:r,maxZoom:i},s){if(t.size===0)return Promise.resolve(!1);const c=Ft(t),a=Zn(c,e,n,(s==null?void 0:s.minZoom)??r,(s==null?void 0:s.maxZoom)??i,(s==null?void 0:s.padding)??.1);return await o.setViewport(a,{duration:s==null?void 0:s.duration}),Promise.resolve(!0)}function Jr({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:o=[0,0],nodeExtent:r,onError:i}){const s=n.get(t),c=s.parentId?n.get(s.parentId):void 0,{x:a,y:u}=c?c.internals.positionAbsolute:{x:0,y:0},d=s.origin??o;let f=r;if(s.extent==="parent"&&!s.expandParent)if(!c)i==null||i("005",dt.error005());else{const h=c.measured.width,g=c.measured.height;h&&g&&(f=[[a,u],[a+h,u+g]])}else c&&Bt(s.extent)&&(f=[[s.extent[0][0]+a,s.extent[0][1]+u],[s.extent[1][0]+a,s.extent[1][1]+u]]);const l=Bt(f)?At(e,f,s.measured):e;return(s.measured.width===void 0||s.measured.height===void 0)&&(i==null||i("015",dt.error015())),{position:{x:l.x-a+(s.measured.width??0)*d[0],y:l.y-u+(s.measured.height??0)*d[1]},positionAbsolute:l}}async function Bu({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:o,onBeforeDelete:r}){const i=new Set(t.map(l=>l.id)),s=[];for(const l of n){if(l.deletable===!1)continue;const h=i.has(l.id),g=!h&&l.parentId&&s.find(y=>y.id===l.parentId);(h||g)&&s.push(l)}const c=new Set(e.map(l=>l.id)),a=o.filter(l=>l.deletable!==!1),d=Ru(s,a);for(const l of a)c.has(l.id)&&!d.find(g=>g.id===l.id)&&d.push(l);if(!r)return{edges:d,nodes:s};const f=await r({nodes:s,edges:d});return typeof f=="boolean"?f?{edges:d,nodes:s}:{edges:[],nodes:[]}:f}const jt=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),At=(t={x:0,y:0},e,n)=>({x:jt(t.x,e[0][0],e[1][0]-((n==null?void 0:n.width)??0)),y:jt(t.y,e[0][1],e[1][1]-((n==null?void 0:n.height)??0))});function ti(t,e,n){const{width:o,height:r}=vt(n),{x:i,y:s}=n.internals.positionAbsolute;return At(t,[[i,s],[i+o,s+r]],e)}const Io=(t,e,n)=>t<e?jt(Math.abs(t-e),1,e)/e:t>n?-jt(Math.abs(t-n),1,e)/e:0,ei=(t,e,n=15,o=40)=>{const r=Io(t.x,o,e.width-o)*n,i=Io(t.y,o,e.height-o)*n;return[r,i]},We=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),Dn=({x:t,y:e,width:n,height:o})=>({x:t,y:e,x2:t+n,y2:e+o}),qe=({x:t,y:e,x2:n,y2:o})=>({x:t,y:e,width:n-t,height:o-e}),Rt=(t,e=[0,0])=>{var r,i;const{x:n,y:o}=Kn(t)?t.internals.positionAbsolute:he(t,e);return{x:n,y:o,width:((r=t.measured)==null?void 0:r.width)??t.width??t.initialWidth??0,height:((i=t.measured)==null?void 0:i.height)??t.height??t.initialHeight??0}},Le=(t,e=[0,0])=>{var r,i;const{x:n,y:o}=Kn(t)?t.internals.positionAbsolute:he(t,e);return{x:n,y:o,x2:n+(((r=t.measured)==null?void 0:r.width)??t.width??t.initialWidth??0),y2:o+(((i=t.measured)==null?void 0:i.height)??t.height??t.initialHeight??0)}},ni=(t,e)=>qe(We(Dn(t),Dn(e))),ae=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),o=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*o)},Ao=t=>ft(t.width)&&ft(t.height)&&ft(t.x)&&ft(t.y),ft=t=>!isNaN(t)&&isFinite(t),Fu=(t,e)=>{},Ge=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),ge=({x:t,y:e},[n,o,r],i=!1,s=[1,1])=>{const c={x:(t-n)/r,y:(e-o)/r};return i?Ge(c,s):c},oi=({x:t,y:e},[n,o,r])=>({x:t*r+n,y:e*r+o}),Zn=(t,e,n,o,r,i)=>{const s=e/(t.width*(1+i)),c=n/(t.height*(1+i)),a=Math.min(s,c),u=jt(a,o,r),d=t.x+t.width/2,f=t.y+t.height/2,l=e/2-d*u,h=n/2-f*u;return{x:l,y:h,zoom:u}},Ve=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0};function Bt(t){return t!==void 0&&t!=="parent"}function vt(t){var e,n;return{width:((e=t.measured)==null?void 0:e.width)??t.width??t.initialWidth??0,height:((n=t.measured)==null?void 0:n.height)??t.height??t.initialHeight??0}}function ri(t){var e,n;return(((e=t.measured)==null?void 0:e.width)??t.width??t.initialWidth)!==void 0&&(((n=t.measured)==null?void 0:n.height)??t.height??t.initialHeight)!==void 0}function ii(t,e={width:0,height:0},n,o,r){const i={...t},s=o.get(n);if(s){const c=s.origin||r;i.x+=s.internals.positionAbsolute.x-(e.width??0)*c[0],i.y+=s.internals.positionAbsolute.y-(e.height??0)*c[1]}return i}function To(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function Jt(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:o,containerBounds:r}){const{x:i,y:s}=xt(t),c=ge({x:i-((r==null?void 0:r.left)??0),y:s-((r==null?void 0:r.top)??0)},o),{x:a,y:u}=n?Ge(c,e):c;return{xSnapped:a,ySnapped:u,...c}}const Ke=t=>({width:t.offsetWidth,height:t.offsetHeight}),si=t=>{var e;return((e=t==null?void 0:t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},Ou=["INPUT","SELECT","TEXTAREA"];function Ln(t){var o,r;const e=((r=(o=t.composedPath)==null?void 0:o.call(t))==null?void 0:r[0])||t.target;return(e==null?void 0:e.nodeType)!==1?!1:Ou.includes(e.nodeName)||e.hasAttribute("contenteditable")||!!e.closest(".nokey")}const ci=t=>"clientX"in t,xt=(t,e)=>{var i,s;const n=ci(t),o=n?t.clientX:(i=t.touches)==null?void 0:i[0].clientX,r=n?t.clientY:(s=t.touches)==null?void 0:s[0].clientY;return{x:o-((e==null?void 0:e.left)??0),y:r-((e==null?void 0:e.top)??0)}},Po=(t,e,n,o,r)=>{const i=e.querySelectorAll(`.${t}`);return!i||!i.length?null:Array.from(i).map(s=>{const c=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:t,nodeId:r,position:s.getAttribute("data-handlepos"),x:(c.left-n.left)/o,y:(c.top-n.top)/o,...Ke(s)}})};function ai({sourceX:t,sourceY:e,targetX:n,targetY:o,sourceControlX:r,sourceControlY:i,targetControlX:s,targetControlY:c}){const a=t*.125+r*.375+s*.375+n*.125,u=e*.125+i*.375+c*.375+o*.125,d=Math.abs(a-t),f=Math.abs(u-e);return[a,u,d,f]}function be(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function zo({pos:t,x1:e,y1:n,x2:o,y2:r,c:i}){switch(t){case O.Left:return[e-be(e-o,i),n];case O.Right:return[e+be(o-e,i),n];case O.Top:return[e,n-be(n-r,i)];case O.Bottom:return[e,n+be(r-n,i)]}}function li({sourceX:t,sourceY:e,sourcePosition:n=O.Bottom,targetX:o,targetY:r,targetPosition:i=O.Top,curvature:s=.25}){const[c,a]=zo({pos:n,x1:t,y1:e,x2:o,y2:r,c:s}),[u,d]=zo({pos:i,x1:o,y1:r,x2:t,y2:e,c:s}),[f,l,h,g]=ai({sourceX:t,sourceY:e,targetX:o,targetY:r,sourceControlX:c,sourceControlY:a,targetControlX:u,targetControlY:d});return[`M${t},${e} C${c},${a} ${u},${d} ${o},${r}`,f,l,h,g]}function ui({sourceX:t,sourceY:e,targetX:n,targetY:o}){const r=Math.abs(n-t)/2,i=n<t?n+r:n-r,s=Math.abs(o-e)/2,c=o<e?o+s:o-s;return[i,c,r,s]}function Xu({sourceNode:t,targetNode:e,selected:n=!1,zIndex:o=0,elevateOnSelect:r=!1}){if(!r)return o;const i=n||e.selected||t.selected,s=Math.max(t.internals.z||0,e.internals.z||0,1e3);return o+(i?s:0)}function Yu({sourceNode:t,targetNode:e,width:n,height:o,transform:r}){const i=We(Le(t),Le(e));i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);const s={x:-r[0]/r[2],y:-r[1]/r[2],width:n/r[2],height:o/r[2]};return ae(s,qe(i))>0}const Wu=({source:t,sourceHandle:e,target:n,targetHandle:o})=>`xy-edge__${t}${e||""}-${n}${o||""}`,qu=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),Gu=(t,e)=>{if(!t.source||!t.target)return e;let n;return Ur(t)?n={...t}:n={...t,id:Wu(t)},qu(n,e)?e:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,e.concat(n))};function fi({sourceX:t,sourceY:e,targetX:n,targetY:o}){const[r,i,s,c]=ui({sourceX:t,sourceY:e,targetX:n,targetY:o});return[`M ${t},${e}L ${n},${o}`,r,i,s,c]}const Ho={[O.Left]:{x:-1,y:0},[O.Right]:{x:1,y:0},[O.Top]:{x:0,y:-1},[O.Bottom]:{x:0,y:1}},Ku=({source:t,sourcePosition:e=O.Bottom,target:n})=>e===O.Left||e===O.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},Do=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function Zu({source:t,sourcePosition:e=O.Bottom,target:n,targetPosition:o=O.Top,center:r,offset:i}){const s=Ho[e],c=Ho[o],a={x:t.x+s.x*i,y:t.y+s.y*i},u={x:n.x+c.x*i,y:n.y+c.y*i},d=Ku({source:a,sourcePosition:e,target:u}),f=d.x!==0?"x":"y",l=d[f];let h=[],g,y;const E={x:0,y:0},x={x:0,y:0},[b,p,w,M]=ui({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(s[f]*c[f]===-1){g=r.x??b,y=r.y??p;const C=[{x:g,y:a.y},{x:g,y:u.y}],z=[{x:a.x,y},{x:u.x,y}];s[f]===l?h=f==="x"?C:z:h=f==="x"?z:C}else{const C=[{x:a.x,y:u.y}],z=[{x:u.x,y:a.y}];if(f==="x"?h=s.x===l?z:C:h=s.y===l?C:z,e===o){const D=Math.abs(t[f]-n[f]);if(D<=i){const m=Math.min(i-1,i-D);s[f]===l?E[f]=(a[f]>t[f]?-1:1)*m:x[f]=(u[f]>n[f]?-1:1)*m}}if(e!==o){const D=f==="x"?"y":"x",m=s[f]===c[D],S=a[D]>u[D],v=a[D]<u[D];(s[f]===1&&(!m&&S||m&&v)||s[f]!==1&&(!m&&v||m&&S))&&(h=f==="x"?C:z)}const A={x:a.x+E.x,y:a.y+E.y},P={x:u.x+x.x,y:u.y+x.y},V=Math.max(Math.abs(A.x-h[0].x),Math.abs(P.x-h[0].x)),L=Math.max(Math.abs(A.y-h[0].y),Math.abs(P.y-h[0].y));V>=L?(g=(A.x+P.x)/2,y=h[0].y):(g=h[0].x,y=(A.y+P.y)/2)}return[[t,{x:a.x+E.x,y:a.y+E.y},...h,{x:u.x+x.x,y:u.y+x.y},n],g,y,w,M]}function Uu(t,e,n,o){const r=Math.min(Do(t,e)/2,Do(e,n)/2,o),{x:i,y:s}=e;if(t.x===i&&i===n.x||t.y===s&&s===n.y)return`L${i} ${s}`;if(t.y===s){const u=t.x<n.x?-1:1,d=t.y<n.y?1:-1;return`L ${i+r*u},${s}Q ${i},${s} ${i},${s+r*d}`}const c=t.x<n.x?1:-1,a=t.y<n.y?-1:1;return`L ${i},${s+r*a}Q ${i},${s} ${i+r*c},${s}`}function Vn({sourceX:t,sourceY:e,sourcePosition:n=O.Bottom,targetX:o,targetY:r,targetPosition:i=O.Top,borderRadius:s=5,centerX:c,centerY:a,offset:u=20}){const[d,f,l,h,g]=Zu({source:{x:t,y:e},sourcePosition:n,target:{x:o,y:r},targetPosition:i,center:{x:c,y:a},offset:u});return[d.reduce((E,x,b)=>{let p="";return b>0&&b<d.length-1?p=Uu(d[b-1],x,d[b+1],s):p=`${b===0?"M":"L"}${x.x} ${x.y}`,E+=p,E},""),f,l,h,g]}function Lo(t){var e;return t&&!!(t.internals.handleBounds||(e=t.handles)!=null&&e.length)&&!!(t.measured.width||t.width||t.initialWidth)}function Qu(t){var f;const{sourceNode:e,targetNode:n}=t;if(!Lo(e)||!Lo(n))return null;const o=e.internals.handleBounds||Vo(e.handles),r=n.internals.handleBounds||Vo(n.handles),i=jo((o==null?void 0:o.source)??[],t.sourceHandle),s=jo(t.connectionMode===Vt.Strict?(r==null?void 0:r.target)??[]:((r==null?void 0:r.target)??[]).concat((r==null?void 0:r.source)??[]),t.targetHandle);if(!i||!s)return(f=t.onError)==null||f.call(t,"008",dt.error008(i?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const c=(i==null?void 0:i.position)||O.Bottom,a=(s==null?void 0:s.position)||O.Top,u=le(e,i,c),d=le(n,s,a);return{sourceX:u.x,sourceY:u.y,targetX:d.x,targetY:d.y,sourcePosition:c,targetPosition:a}}function Vo(t){if(!t)return null;const e=[],n=[];for(const o of t)o.width=o.width??1,o.height=o.height??1,o.type==="source"?e.push(o):o.type==="target"&&n.push(o);return{source:e,target:n}}function le(t,e,n=O.Left,o=!1){const r=((e==null?void 0:e.x)??0)+t.internals.positionAbsolute.x,i=((e==null?void 0:e.y)??0)+t.internals.positionAbsolute.y,{width:s,height:c}=e??vt(t);if(o)return{x:r+s/2,y:i+c/2};switch((e==null?void 0:e.position)??n){case O.Top:return{x:r+s/2,y:i};case O.Right:return{x:r+s,y:i+c/2};case O.Bottom:return{x:r+s/2,y:i+c};case O.Left:return{x:r,y:i+c/2}}}function jo(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function jn(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(o=>`${o}=${t[o]}`).join("&")}`:""}function Ju(t,{id:e,defaultColor:n,defaultMarkerStart:o,defaultMarkerEnd:r}){const i=new Set;return t.reduce((s,c)=>([c.markerStart||o,c.markerEnd||r].forEach(a=>{if(a&&typeof a=="object"){const u=jn(a,e);i.has(u)||(s.push({id:u,color:a.color||n,...a}),i.add(u))}}),s),[]).sort((s,c)=>s.id.localeCompare(c.id))}function tf(t,e,n,o,r){let i=.5;r==="start"?i=0:r==="end"&&(i=1);let s=[(t.x+t.width*i)*e.zoom+e.x,t.y*e.zoom+e.y-o],c=[-100*i,-100];switch(n){case O.Right:s=[(t.x+t.width)*e.zoom+e.x+o,(t.y+t.height*i)*e.zoom+e.y],c=[0,-100*i];break;case O.Bottom:s[1]=(t.y+t.height)*e.zoom+e.y+o,c[1]=0;break;case O.Left:s=[t.x*e.zoom+e.x-o,(t.y+t.height*i)*e.zoom+e.y],c=[-100,-100*i];break}return`translate(${s[0]}px, ${s[1]}px) translate(${c[0]}%, ${c[1]}%)`}const Un={nodeOrigin:[0,0],nodeExtent:se,elevateNodesOnSelect:!0,defaults:{}},ef={...Un,checkEquality:!0};function Qn(t,e){const n={...t};for(const o in e)e[o]!==void 0&&(n[o]=e[o]);return n}function nf(t,e,n){const o=Qn(Un,n);for(const r of t.values())if(r.parentId)Jn(r,t,e,o);else{const i=he(r,o.nodeOrigin),s=Bt(r.extent)?r.extent:o.nodeExtent,c=At(i,s,vt(r));r.internals.positionAbsolute=c}}function Rn(t,e,n,o){var c,a;const r=Qn(ef,o),i=new Map(e),s=r!=null&&r.elevateNodesOnSelect?1e3:0;e.clear(),n.clear();for(const u of t){let d=i.get(u.id);if(r.checkEquality&&u===(d==null?void 0:d.internals.userNode))e.set(u.id,d);else{const f=he(u,r.nodeOrigin),l=Bt(u.extent)?u.extent:r.nodeExtent,h=At(f,l,vt(u));d={...r.defaults,...u,measured:{width:(c=u.measured)==null?void 0:c.width,height:(a=u.measured)==null?void 0:a.height},internals:{positionAbsolute:h,handleBounds:u.measured?d==null?void 0:d.internals.handleBounds:void 0,z:di(u,s),userNode:u}},e.set(u.id,d)}u.parentId&&Jn(d,e,n,o)}}function of(t,e){if(!t.parentId)return;const n=e.get(t.parentId);n?n.set(t.id,t):e.set(t.parentId,new Map([[t.id,t]]))}function Jn(t,e,n,o){const{elevateNodesOnSelect:r,nodeOrigin:i,nodeExtent:s}=Qn(Un,o),c=t.parentId,a=e.get(c);if(!a){console.warn(`Parent node ${c} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}of(t,n);const u=r?1e3:0,{x:d,y:f,z:l}=rf(t,a,i,s,u),{positionAbsolute:h}=t.internals,g=d!==h.x||f!==h.y;(g||l!==t.internals.z)&&e.set(t.id,{...t,internals:{...t.internals,positionAbsolute:g?{x:d,y:f}:h,z:l}})}function di(t,e){return(ft(t.zIndex)?t.zIndex:0)+(t.selected?e:0)}function rf(t,e,n,o,r){const{x:i,y:s}=e.internals.positionAbsolute,c=vt(t),a=he(t,n),u=Bt(t.extent)?At(a,t.extent,c):a;let d=At({x:i+u.x,y:s+u.y},o,c);t.extent==="parent"&&(d=ti(d,c,e));const f=di(t,r),l=e.internals.z??0;return{x:d.x,y:d.y,z:l>f?l:f}}function to(t,e,n,o=[0,0]){var s;const r=[],i=new Map;for(const c of t){const a=e.get(c.parentId);if(!a)continue;const u=((s=i.get(c.parentId))==null?void 0:s.expandedRect)??Rt(a),d=ni(u,c.rect);i.set(c.parentId,{expandedRect:d,parent:a})}return i.size>0&&i.forEach(({expandedRect:c,parent:a},u)=>{var p;const d=a.internals.positionAbsolute,f=vt(a),l=a.origin??o,h=c.x<d.x?Math.round(Math.abs(d.x-c.x)):0,g=c.y<d.y?Math.round(Math.abs(d.y-c.y)):0,y=Math.max(f.width,Math.round(c.width)),E=Math.max(f.height,Math.round(c.height)),x=(y-f.width)*l[0],b=(E-f.height)*l[1];(h>0||g>0||x||b)&&(r.push({id:u,type:"position",position:{x:a.position.x-h+x,y:a.position.y-g+b}}),(p=n.get(u))==null||p.forEach(w=>{t.some(M=>M.id===w.id)||r.push({id:w.id,type:"position",position:{x:w.position.x+h,y:w.position.y+g}})})),(f.width<c.width||f.height<c.height||h||g)&&r.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:y+(h?l[0]*h-x:0),height:E+(g?l[1]*g-b:0)}})}),r}function sf(t,e,n,o,r,i){const s=o==null?void 0:o.querySelector(".xyflow__viewport");let c=!1;if(!s)return{changes:[],updatedInternals:c};const a=[],u=window.getComputedStyle(s),{m22:d}=new window.DOMMatrixReadOnly(u.transform),f=[];for(const l of t.values()){const h=e.get(l.id);if(!h)continue;if(h.hidden){e.set(h.id,{...h,internals:{...h.internals,handleBounds:void 0}}),c=!0;continue}const g=Ke(l.nodeElement),y=h.measured.width!==g.width||h.measured.height!==g.height;if(!!(g.width&&g.height&&(y||!h.internals.handleBounds||l.force))){const x=l.nodeElement.getBoundingClientRect(),b=Bt(h.extent)?h.extent:i;let{positionAbsolute:p}=h.internals;h.parentId&&h.extent==="parent"?p=ti(p,g,e.get(h.parentId)):b&&(p=At(p,b,g));const w={...h,measured:g,internals:{...h.internals,positionAbsolute:p,handleBounds:{source:Po("source",l.nodeElement,x,d,h.id),target:Po("target",l.nodeElement,x,d,h.id)}}};e.set(h.id,w),h.parentId&&Jn(w,e,n,{nodeOrigin:r}),c=!0,y&&(a.push({id:h.id,type:"dimensions",dimensions:g}),h.expandParent&&h.parentId&&f.push({id:h.id,parentId:h.parentId,rect:Rt(w,r)}))}}if(f.length>0){const l=to(f,e,n,r);a.push(...l)}return{changes:a,updatedInternals:c}}async function cf({delta:t,panZoom:e,transform:n,translateExtent:o,width:r,height:i}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const s=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[r,i]],o),c=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(c)}function Ro(t,e,n,o,r,i){let s=r;const c=o.get(s)||new Map;o.set(s,c.set(n,e)),s=`${r}-${t}`;const a=o.get(s)||new Map;if(o.set(s,a.set(n,e)),i){s=`${r}-${t}-${i}`;const u=o.get(s)||new Map;o.set(s,u.set(n,e))}}function hi(t,e,n){t.clear(),e.clear();for(const o of n){const{source:r,target:i,sourceHandle:s=null,targetHandle:c=null}=o,a={edgeId:o.id,source:r,target:i,sourceHandle:s,targetHandle:c},u=`${r}-${s}--${i}-${c}`,d=`${i}-${c}--${r}-${s}`;Ro("source",a,d,t,r,s),Ro("target",a,u,t,i,c),e.set(o.id,o)}}function gi(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:gi(n,e):!1}function Bo(t,e,n){var r;let o=t;do{if((r=o==null?void 0:o.matches)!=null&&r.call(o,e))return!0;if(o===n)return!1;o=o==null?void 0:o.parentElement}while(o);return!1}function af(t,e,n,o){const r=new Map;for(const[i,s]of t)if((s.selected||s.id===o)&&(!s.parentId||!gi(s,t))&&(s.draggable||e&&typeof s.draggable>"u")){const c=t.get(i);c&&r.set(i,{id:i,position:c.position||{x:0,y:0},distance:{x:n.x-c.internals.positionAbsolute.x,y:n.y-c.internals.positionAbsolute.y},extent:c.extent,parentId:c.parentId,origin:c.origin,expandParent:c.expandParent,internals:{positionAbsolute:c.internals.positionAbsolute||{x:0,y:0}},measured:{width:c.measured.width??0,height:c.measured.height??0}})}return r}function gn({nodeId:t,dragItems:e,nodeLookup:n,dragging:o=!0}){var s,c,a;const r=[];for(const[u,d]of e){const f=(s=n.get(u))==null?void 0:s.internals.userNode;f&&r.push({...f,position:d.position,dragging:o})}if(!t)return[r[0],r];const i=(c=n.get(t))==null?void 0:c.internals.userNode;return[i?{...i,position:((a=e.get(t))==null?void 0:a.position)||i.position,dragging:o}:r[0],r]}function lf({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:o,onDragStop:r}){let i={x:null,y:null},s=0,c=new Map,a=!1,u={x:0,y:0},d=null,f=!1,l=null,h=!1;function g({noDragClassName:E,handleSelector:x,domNode:b,isSelectable:p,nodeId:w,nodeClickDistance:M=0}){l=st(b);function I({x:P,y:V},L){const{nodeLookup:D,nodeExtent:m,snapGrid:S,snapToGrid:v,nodeOrigin:k,onNodeDrag:$,onSelectionDrag:N,onError:H,updateNodePositions:j}=e();i={x:P,y:V};let R=!1,Y={x:0,y:0,x2:0,y2:0};if(c.size>1&&m){const F=Ft(c);Y=Dn(F)}for(const[F,X]of c){if(!D.has(F))continue;let W={x:P-X.distance.x,y:V-X.distance.y};v&&(W=Ge(W,S));let B=[[m[0][0],m[0][1]],[m[1][0],m[1][1]]];if(c.size>1&&m&&!X.extent){const{positionAbsolute:J}=X.internals,K=J.x-Y.x+m[0][0],G=J.x+X.measured.width-Y.x2+m[1][0],Q=J.y-Y.y+m[0][1],tt=J.y+X.measured.height-Y.y2+m[1][1];B=[[K,Q],[G,tt]]}const{position:q,positionAbsolute:Z}=Jr({nodeId:F,nextPosition:W,nodeLookup:D,nodeExtent:B,nodeOrigin:k,onError:H});R=R||X.position.x!==q.x||X.position.y!==q.y,X.position=q,X.internals.positionAbsolute=Z}if(R&&(j(c,!0),L&&(o||$||!w&&N))){const[F,X]=gn({nodeId:w,dragItems:c,nodeLookup:D});o==null||o(L,c,F,X),$==null||$(L,F,X),w||N==null||N(L,X)}}async function C(){if(!d)return;const{transform:P,panBy:V,autoPanSpeed:L,autoPanOnNodeDrag:D}=e();if(!D){a=!1,cancelAnimationFrame(s);return}const[m,S]=ei(u,d,L);(m!==0||S!==0)&&(i.x=(i.x??0)-m/P[2],i.y=(i.y??0)-S/P[2],await V({x:m,y:S})&&I(i,null)),s=requestAnimationFrame(C)}function z(P){var R;const{nodeLookup:V,multiSelectionActive:L,nodesDraggable:D,transform:m,snapGrid:S,snapToGrid:v,selectNodesOnDrag:k,onNodeDragStart:$,onSelectionDragStart:N,unselectNodesAndEdges:H}=e();f=!0,(!k||!p)&&!L&&w&&((R=V.get(w))!=null&&R.selected||H()),p&&k&&w&&(t==null||t(w));const j=Jt(P.sourceEvent,{transform:m,snapGrid:S,snapToGrid:v,containerBounds:d});if(i=j,c=af(V,D,j,w),c.size>0&&(n||$||!w&&N)){const[Y,F]=gn({nodeId:w,dragItems:c,nodeLookup:V});n==null||n(P.sourceEvent,c,Y,F),$==null||$(P.sourceEvent,Y,F),w||N==null||N(P.sourceEvent,F)}}const A=Tr().clickDistance(M).on("start",P=>{const{domNode:V,nodeDragThreshold:L,transform:D,snapGrid:m,snapToGrid:S}=e();d=(V==null?void 0:V.getBoundingClientRect())||null,h=!1,L===0&&z(P),i=Jt(P.sourceEvent,{transform:D,snapGrid:m,snapToGrid:S,containerBounds:d}),u=xt(P.sourceEvent,d)}).on("drag",P=>{const{autoPanOnNodeDrag:V,transform:L,snapGrid:D,snapToGrid:m,nodeDragThreshold:S,nodeLookup:v}=e(),k=Jt(P.sourceEvent,{transform:L,snapGrid:D,snapToGrid:m,containerBounds:d});if((P.sourceEvent.type==="touchmove"&&P.sourceEvent.touches.length>1||w&&!v.has(w))&&(h=!0),!h){if(!a&&V&&f&&(a=!0,C()),!f){const $=k.xSnapped-(i.x??0),N=k.ySnapped-(i.y??0);Math.sqrt($*$+N*N)>S&&z(P)}(i.x!==k.xSnapped||i.y!==k.ySnapped)&&c&&f&&(u=xt(P.sourceEvent,d),I(k,P.sourceEvent))}}).on("end",P=>{if(!(!f||h)&&(a=!1,f=!1,cancelAnimationFrame(s),c.size>0)){const{nodeLookup:V,updateNodePositions:L,onNodeDragStop:D,onSelectionDragStop:m}=e();if(L(c,!1),r||D||!w&&m){const[S,v]=gn({nodeId:w,dragItems:c,nodeLookup:V,dragging:!1});r==null||r(P.sourceEvent,c,S,v),D==null||D(P.sourceEvent,S,v),w||m==null||m(P.sourceEvent,v)}}}).filter(P=>{const V=P.target;return!P.button&&(!E||!Bo(V,`.${E}`,b))&&(!x||Bo(V,x,b))});l.call(A)}function y(){l==null||l.on(".drag",null)}return{update:g,destroy:y}}function uf(t,e,n){const o=[],r={x:t.x-n,y:t.y-n,width:n*2,height:n*2};for(const i of e.values())ae(r,Rt(i))>0&&o.push(i);return o}const ff=250;function df(t,e,n,o){var c,a;let r=[],i=1/0;const s=uf(t,n,e+ff);for(const u of s){const d=[...((c=u.internals.handleBounds)==null?void 0:c.source)??[],...((a=u.internals.handleBounds)==null?void 0:a.target)??[]];for(const f of d){if(o.nodeId===f.nodeId&&o.type===f.type&&o.id===f.id)continue;const{x:l,y:h}=le(u,f,f.position,!0),g=Math.sqrt(Math.pow(l-t.x,2)+Math.pow(h-t.y,2));g>e||(g<i?(r=[{...f,x:l,y:h}],i=g):g===i&&r.push({...f,x:l,y:h}))}}if(!r.length)return null;if(r.length>1){const u=o.type==="source"?"target":"source";return r.find(d=>d.type===u)??r[0]}return r[0]}function pi(t,e,n,o,r,i=!1){var u,d,f;const s=o.get(t);if(!s)return null;const c=r==="strict"?(u=s.internals.handleBounds)==null?void 0:u[e]:[...((d=s.internals.handleBounds)==null?void 0:d.source)??[],...((f=s.internals.handleBounds)==null?void 0:f.target)??[]],a=(n?c==null?void 0:c.find(l=>l.id===n):c==null?void 0:c[0])??null;return a&&i?{...a,...le(s,a,a.position,!0)}:a}function mi(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function hf(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const yi=()=>!0;function gf(t,{connectionMode:e,connectionRadius:n,handleId:o,nodeId:r,edgeUpdaterType:i,isTarget:s,domNode:c,nodeLookup:a,lib:u,autoPanOnConnect:d,flowId:f,panBy:l,cancelConnection:h,onConnectStart:g,onConnect:y,onConnectEnd:E,isValidConnection:x=yi,onReconnectEnd:b,updateConnection:p,getTransform:w,getFromHandle:M,autoPanSpeed:I}){const C=si(t.target);let z=0,A;const{x:P,y:V}=xt(t),L=C==null?void 0:C.elementFromPoint(P,V),D=mi(i,L),m=c==null?void 0:c.getBoundingClientRect();if(!m||!D)return;const S=pi(r,D,o,a,e);if(!S)return;let v=xt(t,m),k=!1,$=null,N=!1,H=null;function j(){if(!d||!m)return;const[Z,J]=ei(v,m,I);l({x:Z,y:J}),z=requestAnimationFrame(j)}const R={...S,nodeId:r,type:D,position:S.position},Y=a.get(r),X={inProgress:!0,isValid:null,from:le(Y,R,O.Left,!0),fromHandle:R,fromPosition:R.position,fromNode:Y,to:v,toHandle:null,toPosition:Mo[R.position],toNode:null};p(X);let W=X;g==null||g(t,{nodeId:r,handleId:o,handleType:D});function B(Z){if(!M()||!R){q(Z);return}const J=w();v=xt(Z,m),A=df(ge(v,J,!1,[1,1]),n,a,R),k||(j(),k=!0);const K=xi(Z,{handle:A,connectionMode:e,fromNodeId:r,fromHandleId:o,fromType:s?"target":"source",isValidConnection:x,doc:C,lib:u,flowId:f,nodeLookup:a});H=K.handleDomNode,$=K.connection,N=hf(!!A,K.isValid);const G={...W,isValid:N,to:A&&N?oi({x:A.x,y:A.y},J):v,toHandle:K.toHandle,toPosition:N&&K.toHandle?K.toHandle.position:Mo[R.position],toNode:K.toHandle?a.get(K.toHandle.nodeId):null};N&&A&&W.toHandle&&G.toHandle&&W.toHandle.type===G.toHandle.type&&W.toHandle.nodeId===G.toHandle.nodeId&&W.toHandle.id===G.toHandle.id&&W.to.x===G.to.x&&W.to.y===G.to.y||(p(G),W=G)}function q(Z){(A||H)&&$&&N&&(y==null||y($));const{inProgress:J,...K}=W,G={...K,toPosition:W.toHandle?W.toPosition:null};E==null||E(Z,G),i&&(b==null||b(Z,G)),h(),cancelAnimationFrame(z),k=!1,N=!1,$=null,H=null,C.removeEventListener("mousemove",B),C.removeEventListener("mouseup",q),C.removeEventListener("touchmove",B),C.removeEventListener("touchend",q)}C.addEventListener("mousemove",B),C.addEventListener("mouseup",q),C.addEventListener("touchmove",B),C.addEventListener("touchend",q)}function xi(t,{handle:e,connectionMode:n,fromNodeId:o,fromHandleId:r,fromType:i,doc:s,lib:c,flowId:a,isValidConnection:u=yi,nodeLookup:d}){const f=i==="target",l=e?s.querySelector(`.${c}-flow__handle[data-id="${a}-${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`):null,{x:h,y:g}=xt(t),y=s.elementFromPoint(h,g),E=y!=null&&y.classList.contains(`${c}-flow__handle`)?y:l,x={handleDomNode:E,isValid:!1,connection:null,toHandle:null};if(E){const b=mi(void 0,E),p=E.getAttribute("data-nodeid"),w=E.getAttribute("data-handleid"),M=E.classList.contains("connectable"),I=E.classList.contains("connectableend");if(!p||!b)return x;const C={source:f?p:o,sourceHandle:f?w:r,target:f?o:p,targetHandle:f?r:w};x.connection=C;const A=M&&I&&(n===Vt.Strict?f&&b==="source"||!f&&b==="target":p!==o||w!==r);x.isValid=A&&u(C),x.toHandle=pi(p,b,w,d,n,!1)}return x}const Bn={onPointerDown:gf,isValid:xi};function pf({domNode:t,panZoom:e,getTransform:n,getViewScale:o}){const r=st(t);function i({translateExtent:c,width:a,height:u,zoomStep:d=10,pannable:f=!0,zoomable:l=!0,inversePan:h=!1}){const g=p=>{const w=n();if(p.sourceEvent.type!=="wheel"||!e)return;const M=-p.sourceEvent.deltaY*(p.sourceEvent.deltaMode===1?.05:p.sourceEvent.deltaMode?1:.002)*d,I=w[2]*Math.pow(2,M);e.scaleTo(I)};let y=[0,0];const E=p=>{(p.sourceEvent.type==="mousedown"||p.sourceEvent.type==="touchstart")&&(y=[p.sourceEvent.clientX??p.sourceEvent.touches[0].clientX,p.sourceEvent.clientY??p.sourceEvent.touches[0].clientY])},x=p=>{const w=n();if(p.sourceEvent.type!=="mousemove"&&p.sourceEvent.type!=="touchmove"||!e)return;const M=[p.sourceEvent.clientX??p.sourceEvent.touches[0].clientX,p.sourceEvent.clientY??p.sourceEvent.touches[0].clientY],I=[M[0]-y[0],M[1]-y[1]];y=M;const C=o()*Math.max(w[2],Math.log(w[2]))*(h?-1:1),z={x:w[0]-I[0]*C,y:w[1]-I[1]*C},A=[[0,0],[a,u]];e.setViewportConstrained({x:z.x,y:z.y,zoom:w[2]},A,c)},b=qr().on("start",E).on("zoom",f?x:null).on("zoom.wheel",l?g:null);r.call(b,{})}function s(){r.on("zoom",null)}return{update:i,destroy:s,pointer:lt}}const mf=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,Ze=t=>({x:t.x,y:t.y,zoom:t.k}),pn=({x:t,y:e,zoom:n})=>Ye.translate(t,e).scale(n),Tt=(t,e)=>t.target.closest(`.${e}`),wi=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),mn=(t,e=0,n=()=>{})=>{const o=typeof e=="number"&&e>0;return o||n(),o?t.transition().duration(e).on("end",n):t},vi=t=>{const e=t.ctrlKey&&Ve()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function yf({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:o,panOnScrollMode:r,panOnScrollSpeed:i,zoomOnPinch:s,onPanZoomStart:c,onPanZoom:a,onPanZoomEnd:u}){return d=>{if(Tt(d,e))return!1;d.preventDefault(),d.stopImmediatePropagation();const f=n.property("__zoom").k||1;if(d.ctrlKey&&s){const E=lt(d),x=vi(d),b=f*Math.pow(2,x);o.scaleTo(n,b,E,d);return}const l=d.deltaMode===1?20:1;let h=r===$t.Vertical?0:d.deltaX*l,g=r===$t.Horizontal?0:d.deltaY*l;!Ve()&&d.shiftKey&&r!==$t.Vertical&&(h=d.deltaY*l,g=0),o.translateBy(n,-(h/f)*i,-(g/f)*i,{internal:!0});const y=Ze(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling||(t.isPanScrolling=!0,c==null||c(d,y)),t.isPanScrolling&&(a==null||a(d,y),t.panScrollTimeout=setTimeout(()=>{u==null||u(d,y),t.isPanScrolling=!1},150))}}function xf({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(o,r){if(!e&&o.type==="wheel"&&!o.ctrlKey||Tt(o,t))return null;o.preventDefault(),n.call(this,o,r)}}function wf({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return o=>{var i,s,c;if((i=o.sourceEvent)!=null&&i.internal)return;const r=Ze(o.transform);t.mouseButton=((s=o.sourceEvent)==null?void 0:s.button)||0,t.isZoomingOrPanning=!0,t.prevViewport=r,((c=o.sourceEvent)==null?void 0:c.type)==="mousedown"&&e(!0),n&&(n==null||n(o.sourceEvent,r))}}function vf({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:o,onPanZoom:r}){return i=>{var s,c;t.usedRightMouseButton=!!(n&&wi(e,t.mouseButton??0)),(s=i.sourceEvent)!=null&&s.sync||o([i.transform.x,i.transform.y,i.transform.k]),r&&!((c=i.sourceEvent)!=null&&c.internal)&&(r==null||r(i.sourceEvent,Ze(i.transform)))}}function _f({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:o,onPanZoomEnd:r,onPaneContextMenu:i}){return s=>{var c;if(!((c=s.sourceEvent)!=null&&c.internal)&&(t.isZoomingOrPanning=!1,i&&wi(e,t.mouseButton??0)&&!t.usedRightMouseButton&&s.sourceEvent&&i(s.sourceEvent),t.usedRightMouseButton=!1,o(!1),r&&mf(t.prevViewport,s.transform))){const a=Ze(s.transform);t.prevViewport=a,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{r==null||r(s.sourceEvent,a)},n?150:0)}}}function bf({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:o,panOnScroll:r,zoomOnDoubleClick:i,userSelectionActive:s,noWheelClassName:c,noPanClassName:a,lib:u}){return d=>{var g;const f=t||e,l=n&&d.ctrlKey;if(d.button===1&&d.type==="mousedown"&&(Tt(d,`${u}-flow__node`)||Tt(d,`${u}-flow__edge`)))return!0;if(!o&&!f&&!r&&!i&&!n||s||Tt(d,c)&&d.type==="wheel"||Tt(d,a)&&(d.type!=="wheel"||r&&d.type==="wheel"&&!t)||!n&&d.ctrlKey&&d.type==="wheel")return!1;if(!n&&d.type==="touchstart"&&((g=d.touches)==null?void 0:g.length)>1)return d.preventDefault(),!1;if(!f&&!r&&!l&&d.type==="wheel"||!o&&(d.type==="mousedown"||d.type==="touchstart")||Array.isArray(o)&&!o.includes(d.button)&&d.type==="mousedown")return!1;const h=Array.isArray(o)&&o.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||d.type==="wheel")&&h}}function Ef({domNode:t,minZoom:e,maxZoom:n,paneClickDistance:o,translateExtent:r,viewport:i,onPanZoom:s,onPanZoomStart:c,onPanZoomEnd:a,onDraggingChange:u}){const d={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},f=t.getBoundingClientRect(),l=qr().clickDistance(!ft(o)||o<0?0:o).scaleExtent([e,n]).translateExtent(r),h=st(t).call(l);p({x:i.x,y:i.y,zoom:jt(i.zoom,e,n)},[[0,0],[f.width,f.height]],r);const g=h.on("wheel.zoom"),y=h.on("dblclick.zoom");l.wheelDelta(vi);function E(L,D){return h?new Promise(m=>{l==null||l.transform(mn(h,D==null?void 0:D.duration,()=>m(!0)),L)}):Promise.resolve(!1)}function x({noWheelClassName:L,noPanClassName:D,onPaneContextMenu:m,userSelectionActive:S,panOnScroll:v,panOnDrag:k,panOnScrollMode:$,panOnScrollSpeed:N,preventScrolling:H,zoomOnPinch:j,zoomOnScroll:R,zoomOnDoubleClick:Y,zoomActivationKeyPressed:F,lib:X,onTransformChange:W}){S&&!d.isZoomingOrPanning&&b();const q=v&&!F&&!S?yf({zoomPanValues:d,noWheelClassName:L,d3Selection:h,d3Zoom:l,panOnScrollMode:$,panOnScrollSpeed:N,zoomOnPinch:j,onPanZoomStart:c,onPanZoom:s,onPanZoomEnd:a}):xf({noWheelClassName:L,preventScrolling:H,d3ZoomHandler:g});if(h.on("wheel.zoom",q,{passive:!1}),!S){const J=wf({zoomPanValues:d,onDraggingChange:u,onPanZoomStart:c});l.on("start",J);const K=vf({zoomPanValues:d,panOnDrag:k,onPaneContextMenu:!!m,onPanZoom:s,onTransformChange:W});l.on("zoom",K);const G=_f({zoomPanValues:d,panOnDrag:k,panOnScroll:v,onPaneContextMenu:m,onPanZoomEnd:a,onDraggingChange:u});l.on("end",G)}const Z=bf({zoomActivationKeyPressed:F,panOnDrag:k,zoomOnScroll:R,panOnScroll:v,zoomOnDoubleClick:Y,zoomOnPinch:j,userSelectionActive:S,noPanClassName:D,noWheelClassName:L,lib:X});l.filter(Z),Y?h.on("dblclick.zoom",y):h.on("dblclick.zoom",null)}function b(){l.on("zoom",null)}async function p(L,D,m){const S=pn(L),v=l==null?void 0:l.constrain()(S,D,m);return v&&await E(v),new Promise(k=>k(v))}async function w(L,D){const m=pn(L);return await E(m,D),new Promise(S=>S(m))}function M(L){if(h){const D=pn(L),m=h.property("__zoom");(m.k!==L.zoom||m.x!==L.x||m.y!==L.y)&&(l==null||l.transform(h,D,null,{sync:!0}))}}function I(){const L=h?Wr(h.node()):{x:0,y:0,k:1};return{x:L.x,y:L.y,zoom:L.k}}function C(L,D){return h?new Promise(m=>{l==null||l.scaleTo(mn(h,D==null?void 0:D.duration,()=>m(!0)),L)}):Promise.resolve(!1)}function z(L,D){return h?new Promise(m=>{l==null||l.scaleBy(mn(h,D==null?void 0:D.duration,()=>m(!0)),L)}):Promise.resolve(!1)}function A(L){l==null||l.scaleExtent(L)}function P(L){l==null||l.translateExtent(L)}function V(L){const D=!ft(L)||L<0?0:L;l==null||l.clickDistance(D)}return{update:x,destroy:b,setViewport:w,setViewportConstrained:p,getViewport:I,scaleTo:C,scaleBy:z,setScaleExtent:A,setTranslateExtent:P,syncViewport:M,setClickDistance:V}}var te;(function(t){t.Line="line",t.Handle="handle"})(te||(te={}));function Nf({width:t,prevWidth:e,height:n,prevHeight:o,affectsX:r,affectsY:i}){const s=t-e,c=n-o,a=[s>0?1:s<0?-1:0,c>0?1:c<0?-1:0];return s&&r&&(a[0]=a[0]*-1),c&&i&&(a[1]=a[1]*-1),a}function Sf(t){const e=t.includes("right")||t.includes("left"),n=t.includes("bottom")||t.includes("top"),o=t.includes("left"),r=t.includes("top");return{isHorizontal:e,isVertical:n,affectsX:o,affectsY:r}}function _t(t,e){return Math.max(0,e-t)}function bt(t,e){return Math.max(0,t-e)}function Ee(t,e,n){return Math.max(0,e-t,t-n)}function Fo(t,e){return t?!e:e}function Cf(t,e,n,o,r,i,s,c){let{affectsX:a,affectsY:u}=e;const{isHorizontal:d,isVertical:f}=e,l=d&&f,{xSnapped:h,ySnapped:g}=n,{minWidth:y,maxWidth:E,minHeight:x,maxHeight:b}=o,{x:p,y:w,width:M,height:I,aspectRatio:C}=t;let z=Math.floor(d?h-t.pointerX:0),A=Math.floor(f?g-t.pointerY:0);const P=M+(a?-z:z),V=I+(u?-A:A),L=-i[0]*M,D=-i[1]*I;let m=Ee(P,y,E),S=Ee(V,x,b);if(s){let $=0,N=0;a&&z<0?$=_t(p+z+L,s[0][0]):!a&&z>0&&($=bt(p+P+L,s[1][0])),u&&A<0?N=_t(w+A+D,s[0][1]):!u&&A>0&&(N=bt(w+V+D,s[1][1])),m=Math.max(m,$),S=Math.max(S,N)}if(c){let $=0,N=0;a&&z>0?$=bt(p+z,c[0][0]):!a&&z<0&&($=_t(p+P,c[1][0])),u&&A>0?N=bt(w+A,c[0][1]):!u&&A<0&&(N=_t(w+V,c[1][1])),m=Math.max(m,$),S=Math.max(S,N)}if(r){if(d){const $=Ee(P/C,x,b)*C;if(m=Math.max(m,$),s){let N=0;!a&&!u||a&&!u&&l?N=bt(w+D+P/C,s[1][1])*C:N=_t(w+D+(a?z:-z)/C,s[0][1])*C,m=Math.max(m,N)}if(c){let N=0;!a&&!u||a&&!u&&l?N=_t(w+P/C,c[1][1])*C:N=bt(w+(a?z:-z)/C,c[0][1])*C,m=Math.max(m,N)}}if(f){const $=Ee(V*C,y,E)/C;if(S=Math.max(S,$),s){let N=0;!a&&!u||u&&!a&&l?N=bt(p+V*C+L,s[1][0])/C:N=_t(p+(u?A:-A)*C+L,s[0][0])/C,S=Math.max(S,N)}if(c){let N=0;!a&&!u||u&&!a&&l?N=_t(p+V*C,c[1][0])/C:N=bt(p+(u?A:-A)*C,c[0][0])/C,S=Math.max(S,N)}}}A=A+(A<0?S:-S),z=z+(z<0?m:-m),r&&(l?P>V*C?A=(Fo(a,u)?-z:z)/C:z=(Fo(a,u)?-A:A)*C:d?(A=z/C,u=a):(z=A*C,a=u));const v=a?p+z:p,k=u?w+A:w;return{width:M+(a?-z:z),height:I+(u?-A:A),x:i[0]*z*(a?-1:1)+v,y:i[1]*A*(u?-1:1)+k}}const _i={width:0,height:0,x:0,y:0},kf={..._i,pointerX:0,pointerY:0,aspectRatio:1};function Mf(t){return[[0,0],[t.measured.width,t.measured.height]]}function $f(t,e,n){const o=e.position.x+t.position.x,r=e.position.y+t.position.y,i=t.measured.width??0,s=t.measured.height??0,c=n[0]*i,a=n[1]*s;return[[o-c,r-a],[o+i-c,r+s-a]]}function If({domNode:t,nodeId:e,getStoreItems:n,onChange:o,onEnd:r}){const i=st(t);function s({controlPosition:a,boundaries:u,keepAspectRatio:d,onResizeStart:f,onResize:l,onResizeEnd:h,shouldResize:g}){let y={..._i},E={...kf};const x=Sf(a);let b,p=null,w=[],M,I,C;const z=Tr().on("start",A=>{const{nodeLookup:P,transform:V,snapGrid:L,snapToGrid:D,nodeOrigin:m,paneDomNode:S}=n();if(b=P.get(e),!b)return;p=(S==null?void 0:S.getBoundingClientRect())??null;const{xSnapped:v,ySnapped:k}=Jt(A.sourceEvent,{transform:V,snapGrid:L,snapToGrid:D,containerBounds:p});y={width:b.measured.width??0,height:b.measured.height??0,x:b.position.x??0,y:b.position.y??0},E={...y,pointerX:v,pointerY:k,aspectRatio:y.width/y.height},M=void 0,b.parentId&&(b.extent==="parent"||b.expandParent)&&(M=P.get(b.parentId),I=M&&b.extent==="parent"?Mf(M):void 0),w=[],C=void 0;for(const[$,N]of P)if(N.parentId===e&&(w.push({id:$,position:{...N.position},extent:N.extent}),N.extent==="parent"||N.expandParent)){const H=$f(N,b,N.origin??m);C?C=[[Math.min(H[0][0],C[0][0]),Math.min(H[0][1],C[0][1])],[Math.max(H[1][0],C[1][0]),Math.max(H[1][1],C[1][1])]]:C=H}f==null||f(A,{...y})}).on("drag",A=>{const{transform:P,snapGrid:V,snapToGrid:L,nodeOrigin:D}=n(),m=Jt(A.sourceEvent,{transform:P,snapGrid:V,snapToGrid:L,containerBounds:p}),S=[];if(!b)return;const{x:v,y:k,width:$,height:N}=y,H={},j=b.origin??D,{width:R,height:Y,x:F,y:X}=Cf(E,x,m,u,d,j,I,C),W=R!==$,B=Y!==N,q=F!==v&&W,Z=X!==k&&B;if(!q&&!Z&&!W&&!B)return;if((q||Z||j[0]===1||j[1]===1)&&(H.x=q?F:y.x,H.y=Z?X:y.y,y.x=H.x,y.y=H.y,w.length>0)){const Q=F-v,tt=X-k;for(const rt of w)rt.position={x:rt.position.x-Q+j[0]*(R-$),y:rt.position.y-tt+j[1]*(Y-N)},S.push(rt)}if((W||B)&&(H.width=W?R:y.width,H.height=B?Y:y.height,y.width=H.width,y.height=H.height),M&&b.expandParent){const Q=j[0]*(H.width??0);H.x&&H.x<Q&&(y.x=Q,E.x=E.x-(H.x-Q));const tt=j[1]*(H.height??0);H.y&&H.y<tt&&(y.y=tt,E.y=E.y-(H.y-tt))}const J=Nf({width:y.width,prevWidth:$,height:y.height,prevHeight:N,affectsX:x.affectsX,affectsY:x.affectsY}),K={...y,direction:J};(g==null?void 0:g(A,K))!==!1&&(l==null||l(A,K),o(H,S))}).on("end",A=>{h==null||h(A,{...y}),r==null||r()});i.call(z)}function c(){i.on(".drag",null)}return{update:s,destroy:c}}const Af={},Oo=t=>{let e;const n=new Set,o=(d,f)=>{const l=typeof d=="function"?d(e):d;if(!Object.is(l,e)){const h=e;e=f??(typeof l!="object"||l===null)?l:Object.assign({},e,l),n.forEach(g=>g(e,h))}},r=()=>e,a={setState:o,getState:r,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(Af?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=e=t(o,r,a);return a},Tf=t=>t?Oo(t):Oo,{useDebugValue:Pf}=oc,{useSyncExternalStoreWithSelector:zf}=rc,Hf=t=>t;function bi(t,e=Hf,n){const o=zf(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return Pf(o),o}const Xo=(t,e)=>{const n=Tf(t),o=(r,i=e)=>bi(n,r,i);return Object.assign(o,n),o},Df=(t,e)=>t?Xo(t,e):Xo;function nt(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[o,r]of t)if(!Object.is(r,e.get(o)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const o of t)if(!e.has(o))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(e,o)||!Object.is(t[o],e[o]))return!1;return!0}const Ue=T.createContext(null),Lf=Ue.Provider,Ei=dt.error001();function U(t,e){const n=T.useContext(Ue);if(n===null)throw new Error(Ei);return bi(n,t,e)}function et(){const t=T.useContext(Ue);if(t===null)throw new Error(Ei);return T.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const Yo={display:"none"},Vf={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Ni="react-flow__node-desc",Si="react-flow__edge-desc",jf="react-flow__aria-live",Rf=t=>t.ariaLiveMessage;function Bf({rfId:t}){const e=U(Rf);return _.jsx("div",{id:`${jf}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:Vf,children:e})}function Ff({rfId:t,disableKeyboardA11y:e}){return _.jsxs(_.Fragment,{children:[_.jsxs("div",{id:`${Ni}-${t}`,style:Yo,children:["Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),_.jsx("div",{id:`${Si}-${t}`,style:Yo,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!e&&_.jsx(Bf,{rfId:t})]})}const Of=t=>t.userSelectionActive?"none":"all",Qe=T.forwardRef(({position:t="top-left",children:e,className:n,style:o,...r},i)=>{const s=U(Of),c=`${t}`.split("-");return _.jsx("div",{className:ot(["react-flow__panel",n,...c]),style:{...o,pointerEvents:s},ref:i,...r,children:e})});Qe.displayName="Panel";function Xf({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:_.jsx(Qe,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:_.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Yf=t=>{const e=[],n=[];for(const[,o]of t.nodeLookup)o.selected&&e.push(o.internals.userNode);for(const[,o]of t.edgeLookup)o.selected&&n.push(o);return{selectedNodes:e,selectedEdges:n}},Ne=t=>t.id;function Wf(t,e){return nt(t.selectedNodes.map(Ne),e.selectedNodes.map(Ne))&&nt(t.selectedEdges.map(Ne),e.selectedEdges.map(Ne))}function qf({onSelectionChange:t}){const e=et(),{selectedNodes:n,selectedEdges:o}=U(Yf,Wf);return T.useEffect(()=>{const r={nodes:n,edges:o};t==null||t(r),e.getState().onSelectionChangeHandlers.forEach(i=>i(r))},[n,o,t]),null}const Gf=t=>!!t.onSelectionChangeHandlers;function Kf({onSelectionChange:t}){const e=U(Gf);return t||e?_.jsx(qf,{onSelectionChange:t}):null}const Ci=[0,0],Zf={x:0,y:0,zoom:1},Uf=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],Wo=[...Uf,"rfId"],Qf=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setPaneClickDistance:t.setPaneClickDistance}),qo={translateExtent:se,nodeOrigin:Ci,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function Jf(t){const{setNodes:e,setEdges:n,setMinZoom:o,setMaxZoom:r,setTranslateExtent:i,setNodeExtent:s,reset:c,setDefaultNodesAndEdges:a,setPaneClickDistance:u}=U(Qf,nt),d=et();T.useEffect(()=>(a(t.defaultNodes,t.defaultEdges),()=>{f.current=qo,c()}),[]);const f=T.useRef(qo);return T.useEffect(()=>{for(const l of Wo){const h=t[l],g=f.current[l];h!==g&&(typeof t[l]>"u"||(l==="nodes"?e(h):l==="edges"?n(h):l==="minZoom"?o(h):l==="maxZoom"?r(h):l==="translateExtent"?i(h):l==="nodeExtent"?s(h):l==="paneClickDistance"?u(h):l==="fitView"?d.setState({fitViewOnInit:h}):l==="fitViewOptions"?d.setState({fitViewOnInitOptions:h}):d.setState({[l]:h})))}f.current=t},Wo.map(l=>t[l])),null}function Go(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function td(t){var o;const[e,n]=T.useState(t==="system"?null:t);return T.useEffect(()=>{if(t!=="system"){n(t);return}const r=Go(),i=()=>n(r!=null&&r.matches?"dark":"light");return i(),r==null||r.addEventListener("change",i),()=>{r==null||r.removeEventListener("change",i)}},[t]),e!==null?e:(o=Go())!=null&&o.matches?"dark":"light"}const Ko=typeof document<"u"?document:null;function ue(t=null,e={target:Ko,actInsideInputWithModifier:!0}){const[n,o]=T.useState(!1),r=T.useRef(!1),i=T.useRef(new Set([])),[s,c]=T.useMemo(()=>{if(t!==null){const u=(Array.isArray(t)?t:[t]).filter(f=>typeof f=="string").map(f=>f.replace("+",`
`).replace(`

`,`
+`).split(`
`)),d=u.reduce((f,l)=>f.concat(...l),[]);return[u,d]}return[[],[]]},[t]);return T.useEffect(()=>{const a=(e==null?void 0:e.target)||Ko;if(t!==null){const u=l=>{if(r.current=l.ctrlKey||l.metaKey||l.shiftKey,(!r.current||r.current&&!e.actInsideInputWithModifier)&&Ln(l))return!1;const g=Uo(l.code,c);i.current.add(l[g]),Zo(s,i.current,!1)&&(l.preventDefault(),o(!0))},d=l=>{if((!r.current||r.current&&!e.actInsideInputWithModifier)&&Ln(l))return!1;const g=Uo(l.code,c);Zo(s,i.current,!0)?(o(!1),i.current.clear()):i.current.delete(l[g]),l.key==="Meta"&&i.current.clear(),r.current=!1},f=()=>{i.current.clear(),o(!1)};return a==null||a.addEventListener("keydown",u),a==null||a.addEventListener("keyup",d),window.addEventListener("blur",f),window.addEventListener("contextmenu",f),()=>{a==null||a.removeEventListener("keydown",u),a==null||a.removeEventListener("keyup",d),window.removeEventListener("blur",f),window.removeEventListener("contextmenu",f)}}},[t,o]),n}function Zo(t,e,n){return t.filter(o=>n||o.length===e.size).some(o=>o.every(r=>e.has(r)))}function Uo(t,e){return e.includes(t)?"code":"key"}const ed=()=>{const t=et();return T.useMemo(()=>({zoomIn:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1.2,{duration:e==null?void 0:e.duration}):Promise.resolve(!1)},zoomOut:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1/1.2,{duration:e==null?void 0:e.duration}):Promise.resolve(!1)},zoomTo:(e,n)=>{const{panZoom:o}=t.getState();return o?o.scaleTo(e,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(e,n)=>{const{transform:[o,r,i],panZoom:s}=t.getState();return s?(await s.setViewport({x:e.x??o,y:e.y??r,zoom:e.zoom??i},{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[e,n,o]=t.getState().transform;return{x:e,y:n,zoom:o}},fitView:e=>{const{nodeLookup:n,minZoom:o,maxZoom:r,panZoom:i,domNode:s}=t.getState();if(!i||!s)return Promise.resolve(!1);const c=zn(n,e),{width:a,height:u}=Ke(s);return Hn({nodes:c,width:a,height:u,minZoom:o,maxZoom:r,panZoom:i},e)},setCenter:async(e,n,o)=>{const{width:r,height:i,maxZoom:s,panZoom:c}=t.getState(),a=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:s,u=r/2-e*a,d=i/2-n*a;return c?(await c.setViewport({x:u,y:d,zoom:a},{duration:o==null?void 0:o.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(e,n)=>{const{width:o,height:r,minZoom:i,maxZoom:s,panZoom:c}=t.getState(),a=Zn(e,o,r,i,s,(n==null?void 0:n.padding)??.1);return c?(await c.setViewport(a,{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(e,n={})=>{const{transform:o,snapGrid:r,snapToGrid:i,domNode:s}=t.getState();if(!s)return e;const{x:c,y:a}=s.getBoundingClientRect(),u={x:e.x-c,y:e.y-a},d=n.snapGrid??r,f=n.snapToGrid??i;return ge(u,o,f,d)},flowToScreenPosition:e=>{const{transform:n,domNode:o}=t.getState();if(!o)return e;const{x:r,y:i}=o.getBoundingClientRect(),s=oi(e,n);return{x:s.x+r,y:s.y+i}}}),[])};function ki(t,e){const n=[],o=new Map,r=[];for(const i of t)if(i.type==="add"){r.push(i);continue}else if(i.type==="remove"||i.type==="replace")o.set(i.id,[i]);else{const s=o.get(i.id);s?s.push(i):o.set(i.id,[i])}for(const i of e){const s=o.get(i.id);if(!s){n.push(i);continue}if(s[0].type==="remove")continue;if(s[0].type==="replace"){n.push({...s[0].item});continue}const c={...i};for(const a of s)nd(a,c);n.push(c)}return r.length&&r.forEach(i=>{i.index!==void 0?n.splice(i.index,0,{...i.item}):n.push({...i.item})}),n}function nd(t,e){switch(t.type){case"select":{e.selected=t.selected;break}case"position":{typeof t.position<"u"&&(e.position=t.position),typeof t.dragging<"u"&&(e.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(e.measured??(e.measured={}),e.measured.width=t.dimensions.width,e.measured.height=t.dimensions.height,t.setAttributes&&(e.width=t.dimensions.width,e.height=t.dimensions.height)),typeof t.resizing=="boolean"&&(e.resizing=t.resizing);break}}}function Mi(t,e){return ki(t,e)}function $i(t,e){return ki(t,e)}function Ct(t,e){return{id:t,type:"select",selected:e}}function Pt(t,e=new Set,n=!1){const o=[];for(const[r,i]of t){const s=e.has(r);!(i.selected===void 0&&!s)&&i.selected!==s&&(n&&(i.selected=s),o.push(Ct(i.id,s)))}return o}function Qo({items:t=[],lookup:e}){var r;const n=[],o=new Map(t.map(i=>[i.id,i]));for(const[i,s]of t.entries()){const c=e.get(s.id),a=((r=c==null?void 0:c.internals)==null?void 0:r.userNode)??c;a!==void 0&&a!==s&&n.push({id:s.id,item:s,type:"replace"}),a===void 0&&n.push({item:s,type:"add",index:i})}for(const[i]of e)o.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function Jo(t){return{id:t.id,type:"remove"}}const tr=t=>Vu(t),od=t=>Ur(t);function Ii(t){return T.forwardRef(t)}const rd=typeof window<"u"?T.useLayoutEffect:T.useEffect;function er(t){const[e,n]=T.useState(BigInt(0)),[o]=T.useState(()=>id(()=>n(r=>r+BigInt(1))));return rd(()=>{const r=o.get();r.length&&(t(r),o.reset())},[e]),o}function id(t){let e=[];return{get:()=>e,reset:()=>{e=[]},push:n=>{e.push(n),t()}}}const Ai=T.createContext(null);function sd({children:t}){const e=et(),n=T.useCallback(c=>{const{nodes:a=[],setNodes:u,hasDefaultNodes:d,onNodesChange:f,nodeLookup:l}=e.getState();let h=a;for(const g of c)h=typeof g=="function"?g(h):g;d?u(h):f&&f(Qo({items:h,lookup:l}))},[]),o=er(n),r=T.useCallback(c=>{const{edges:a=[],setEdges:u,hasDefaultEdges:d,onEdgesChange:f,edgeLookup:l}=e.getState();let h=a;for(const g of c)h=typeof g=="function"?g(h):g;d?u(h):f&&f(Qo({items:h,lookup:l}))},[]),i=er(r),s=T.useMemo(()=>({nodeQueue:o,edgeQueue:i}),[]);return _.jsx(Ai.Provider,{value:s,children:t})}function cd(){const t=T.useContext(Ai);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const ad=t=>!!t.panZoom;function eo(){const t=ed(),e=et(),n=cd(),o=U(ad),r=T.useMemo(()=>{const i=f=>e.getState().nodeLookup.get(f),s=f=>{n.nodeQueue.push(f)},c=f=>{n.edgeQueue.push(f)},a=f=>{var x,b;const{nodeLookup:l,nodeOrigin:h}=e.getState(),g=tr(f)?f:l.get(f.id),y=g.parentId?ii(g.position,g.measured,g.parentId,l,h):g.position,E={...g,position:y,width:((x=g.measured)==null?void 0:x.width)??g.width,height:((b=g.measured)==null?void 0:b.height)??g.height};return Rt(E)},u=(f,l,h={replace:!1})=>{s(g=>g.map(y=>{if(y.id===f){const E=typeof l=="function"?l(y):l;return h.replace&&tr(E)?E:{...y,...E}}return y}))},d=(f,l,h={replace:!1})=>{c(g=>g.map(y=>{if(y.id===f){const E=typeof l=="function"?l(y):l;return h.replace&&od(E)?E:{...y,...E}}return y}))};return{getNodes:()=>e.getState().nodes.map(f=>({...f})),getNode:f=>{var l;return(l=i(f))==null?void 0:l.internals.userNode},getInternalNode:i,getEdges:()=>{const{edges:f=[]}=e.getState();return f.map(l=>({...l}))},getEdge:f=>e.getState().edgeLookup.get(f),setNodes:s,setEdges:c,addNodes:f=>{const l=Array.isArray(f)?f:[f];n.nodeQueue.push(h=>[...h,...l])},addEdges:f=>{const l=Array.isArray(f)?f:[f];n.edgeQueue.push(h=>[...h,...l])},toObject:()=>{const{nodes:f=[],edges:l=[],transform:h}=e.getState(),[g,y,E]=h;return{nodes:f.map(x=>({...x})),edges:l.map(x=>({...x})),viewport:{x:g,y,zoom:E}}},deleteElements:async({nodes:f=[],edges:l=[]})=>{const{nodes:h,edges:g,onNodesDelete:y,onEdgesDelete:E,triggerNodeChanges:x,triggerEdgeChanges:b,onDelete:p,onBeforeDelete:w}=e.getState(),{nodes:M,edges:I}=await Bu({nodesToRemove:f,edgesToRemove:l,nodes:h,edges:g,onBeforeDelete:w}),C=I.length>0,z=M.length>0;if(C){const A=I.map(Jo);E==null||E(I),b(A)}if(z){const A=M.map(Jo);y==null||y(M),x(A)}return(z||C)&&(p==null||p({nodes:M,edges:I})),{deletedNodes:M,deletedEdges:I}},getIntersectingNodes:(f,l=!0,h)=>{const g=Ao(f),y=g?f:a(f),E=h!==void 0;return y?(h||e.getState().nodes).filter(x=>{const b=e.getState().nodeLookup.get(x.id);if(b&&!g&&(x.id===f.id||!b.internals.positionAbsolute))return!1;const p=Rt(E?x:b),w=ae(p,y);return l&&w>0||w>=y.width*y.height}):[]},isNodeIntersecting:(f,l,h=!0)=>{const y=Ao(f)?f:a(f);if(!y)return!1;const E=ae(y,l);return h&&E>0||E>=y.width*y.height},updateNode:u,updateNodeData:(f,l,h={replace:!1})=>{u(f,g=>{const y=typeof l=="function"?l(g):l;return h.replace?{...g,data:y}:{...g,data:{...g.data,...y}}},h)},updateEdge:d,updateEdgeData:(f,l,h={replace:!1})=>{d(f,g=>{const y=typeof l=="function"?l(g):l;return h.replace?{...g,data:y}:{...g,data:{...g.data,...y}}},h)},getNodesBounds:f=>{const{nodeLookup:l,nodeOrigin:h}=e.getState();return ju(f,{nodeLookup:l,nodeOrigin:h})},getHandleConnections:({type:f,id:l,nodeId:h})=>{var g;return Array.from(((g=e.getState().connectionLookup.get(`${h}-${f}${l?`-${l}`:""}`))==null?void 0:g.values())??[])},getNodeConnections:({type:f,handleId:l,nodeId:h})=>{var g;return Array.from(((g=e.getState().connectionLookup.get(`${h}${f?l?`-${f}-${l}`:`-${f}`:""}`))==null?void 0:g.values())??[])}}},[]);return T.useMemo(()=>({...r,...t,viewportInitialized:o}),[o])}const nr=t=>t.selected,ld={actInsideInputWithModifier:!1},ud=typeof window<"u"?window:void 0;function fd({deleteKeyCode:t,multiSelectionKeyCode:e}){const n=et(),{deleteElements:o}=eo(),r=ue(t,ld),i=ue(e,{target:ud});T.useEffect(()=>{if(r){const{edges:s,nodes:c}=n.getState();o({nodes:c.filter(nr),edges:s.filter(nr)}),n.setState({nodesSelectionActive:!1})}},[r]),T.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])}function dd(t){const e=et();T.useEffect(()=>{const n=()=>{var r,i;if(!t.current)return!1;const o=Ke(t.current);(o.height===0||o.width===0)&&((i=(r=e.getState()).onError)==null||i.call(r,"004",dt.error004())),e.setState({width:o.width||500,height:o.height||500})};if(t.current){n(),window.addEventListener("resize",n);const o=new ResizeObserver(()=>n());return o.observe(t.current),()=>{window.removeEventListener("resize",n),o&&t.current&&o.unobserve(t.current)}}},[])}const Je={position:"absolute",width:"100%",height:"100%",top:0,left:0},hd=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib});function gd({onPaneContextMenu:t,zoomOnScroll:e=!0,zoomOnPinch:n=!0,panOnScroll:o=!1,panOnScrollSpeed:r=.5,panOnScrollMode:i=$t.Free,zoomOnDoubleClick:s=!0,panOnDrag:c=!0,defaultViewport:a,translateExtent:u,minZoom:d,maxZoom:f,zoomActivationKeyCode:l,preventScrolling:h=!0,children:g,noWheelClassName:y,noPanClassName:E,onViewportChange:x,isControlledViewport:b,paneClickDistance:p}){const w=et(),M=T.useRef(null),{userSelectionActive:I,lib:C}=U(hd,nt),z=ue(l),A=T.useRef();dd(M);const P=T.useCallback(V=>{x==null||x({x:V[0],y:V[1],zoom:V[2]}),b||w.setState({transform:V})},[x,b]);return T.useEffect(()=>{if(M.current){A.current=Ef({domNode:M.current,minZoom:d,maxZoom:f,translateExtent:u,viewport:a,paneClickDistance:p,onDraggingChange:m=>w.setState({paneDragging:m}),onPanZoomStart:(m,S)=>{const{onViewportChangeStart:v,onMoveStart:k}=w.getState();k==null||k(m,S),v==null||v(S)},onPanZoom:(m,S)=>{const{onViewportChange:v,onMove:k}=w.getState();k==null||k(m,S),v==null||v(S)},onPanZoomEnd:(m,S)=>{const{onViewportChangeEnd:v,onMoveEnd:k}=w.getState();k==null||k(m,S),v==null||v(S)}});const{x:V,y:L,zoom:D}=A.current.getViewport();return w.setState({panZoom:A.current,transform:[V,L,D],domNode:M.current.closest(".react-flow")}),()=>{var m;(m=A.current)==null||m.destroy()}}},[]),T.useEffect(()=>{var V;(V=A.current)==null||V.update({onPaneContextMenu:t,zoomOnScroll:e,zoomOnPinch:n,panOnScroll:o,panOnScrollSpeed:r,panOnScrollMode:i,zoomOnDoubleClick:s,panOnDrag:c,zoomActivationKeyPressed:z,preventScrolling:h,noPanClassName:E,userSelectionActive:I,noWheelClassName:y,lib:C,onTransformChange:P})},[t,e,n,o,r,i,s,c,z,h,E,I,y,C,P]),_.jsx("div",{className:"react-flow__renderer",ref:M,style:Je,children:g})}const pd=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function md(){const{userSelectionActive:t,userSelectionRect:e}=U(pd,nt);return t&&e?_.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}const yn=(t,e)=>n=>{n.target===e.current&&(t==null||t(n))},yd=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging});function xd({isSelecting:t,selectionKeyPressed:e,selectionMode:n=ce.Full,panOnDrag:o,selectionOnDrag:r,onSelectionStart:i,onSelectionEnd:s,onPaneClick:c,onPaneContextMenu:a,onPaneScroll:u,onPaneMouseEnter:d,onPaneMouseMove:f,onPaneMouseLeave:l,children:h}){const g=et(),{userSelectionActive:y,elementsSelectable:E,dragging:x}=U(yd,nt),b=E&&(t||y),p=T.useRef(null),w=T.useRef(),M=T.useRef(new Set),I=T.useRef(new Set),C=T.useRef(!1),z=T.useRef(!1),A=v=>{if(C.current){C.current=!1;return}c==null||c(v),g.getState().resetSelectedElements(),g.setState({nodesSelectionActive:!1})},P=v=>{if(Array.isArray(o)&&(o!=null&&o.includes(2))){v.preventDefault();return}a==null||a(v)},V=u?v=>u(v):void 0,L=v=>{var j,R;const{resetSelectedElements:k,domNode:$}=g.getState();if(w.current=$==null?void 0:$.getBoundingClientRect(),!E||!t||v.button!==0||v.target!==p.current||!w.current)return;(R=(j=v.target)==null?void 0:j.setPointerCapture)==null||R.call(j,v.pointerId),z.current=!0,C.current=!1;const{x:N,y:H}=xt(v.nativeEvent,w.current);k(),g.setState({userSelectionRect:{width:0,height:0,startX:N,startY:H,x:N,y:H}}),i==null||i(v)},D=v=>{const{userSelectionRect:k,transform:$,nodeLookup:N,edgeLookup:H,connectionLookup:j,triggerNodeChanges:R,triggerEdgeChanges:Y,defaultEdgeOptions:F}=g.getState();if(!w.current||!k)return;C.current=!0;const{x:X,y:W}=xt(v.nativeEvent,w.current),{startX:B,startY:q}=k,Z={startX:B,startY:q,x:X<B?X:B,y:W<q?W:q,width:Math.abs(X-B),height:Math.abs(W-q)},J=M.current,K=I.current;M.current=new Set(Qr(N,Z,$,n===ce.Partial,!0).map(Q=>Q.id)),I.current=new Set;const G=(F==null?void 0:F.selectable)??!0;for(const Q of M.current){const tt=j.get(Q);if(tt)for(const{edgeId:rt}of tt.values()){const at=H.get(rt);at&&(at.selectable??G)&&I.current.add(rt)}}if(!To(J,M.current)){const Q=Pt(N,M.current,!0);R(Q)}if(!To(K,I.current)){const Q=Pt(H,I.current);Y(Q)}g.setState({userSelectionRect:Z,userSelectionActive:!0,nodesSelectionActive:!1})},m=v=>{var $,N;if(v.button!==0||!z.current)return;(N=($=v.target)==null?void 0:$.releasePointerCapture)==null||N.call($,v.pointerId);const{userSelectionRect:k}=g.getState();!y&&k&&v.target===p.current&&(A==null||A(v)),g.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:M.current.size>0}),s==null||s(v),(e||r)&&(C.current=!1),z.current=!1},S=o===!0||Array.isArray(o)&&o.includes(0);return _.jsxs("div",{className:ot(["react-flow__pane",{draggable:S,dragging:x,selection:t}]),onClick:b?void 0:yn(A,p),onContextMenu:yn(P,p),onWheel:yn(V,p),onPointerEnter:b?void 0:d,onPointerDown:b?L:f,onPointerMove:b?D:f,onPointerUp:b?m:void 0,onPointerLeave:l,ref:p,style:Je,children:[h,_.jsx(md,{})]})}function Fn({id:t,store:e,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:r,unselectNodesAndEdges:i,multiSelectionActive:s,nodeLookup:c,onError:a}=e.getState(),u=c.get(t);if(!u){a==null||a("012",dt.error012(t));return}e.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&s)&&(i({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=o==null?void 0:o.current)==null?void 0:d.blur()})):r([t])}function Ti({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:o,nodeId:r,isSelectable:i,nodeClickDistance:s}){const c=et(),[a,u]=T.useState(!1),d=T.useRef();return T.useEffect(()=>{d.current=lf({getStoreItems:()=>c.getState(),onNodeMouseDown:f=>{Fn({id:f,store:c,nodeRef:t})},onDragStart:()=>{u(!0)},onDragStop:()=>{u(!1)}})},[]),T.useEffect(()=>{var f,l;if(e)(f=d.current)==null||f.destroy();else if(t.current)return(l=d.current)==null||l.update({noDragClassName:n,handleSelector:o,domNode:t.current,isSelectable:i,nodeId:r,nodeClickDistance:s}),()=>{var h;(h=d.current)==null||h.destroy()}},[n,o,e,i,t,r]),a}const wd=t=>e=>e.selected&&(e.draggable||t&&typeof e.draggable>"u");function Pi(){const t=et();return T.useCallback(n=>{const{nodeExtent:o,snapToGrid:r,snapGrid:i,nodesDraggable:s,onError:c,updateNodePositions:a,nodeLookup:u,nodeOrigin:d}=t.getState(),f=new Map,l=wd(s),h=r?i[0]:5,g=r?i[1]:5,y=n.direction.x*h*n.factor,E=n.direction.y*g*n.factor;for(const[,x]of u){if(!l(x))continue;let b={x:x.internals.positionAbsolute.x+y,y:x.internals.positionAbsolute.y+E};r&&(b=Ge(b,i));const{position:p,positionAbsolute:w}=Jr({nodeId:x.id,nextPosition:b,nodeLookup:u,nodeExtent:o,nodeOrigin:d,onError:c});x.position=p,x.internals.positionAbsolute=w,f.set(x.id,x)}a(f)},[])}const no=T.createContext(null),vd=no.Provider;no.Consumer;const tn=()=>T.useContext(no),_d=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),bd=(t,e,n)=>o=>{const{connectionClickStartHandle:r,connectionMode:i,connection:s}=o,{fromHandle:c,toHandle:a,isValid:u}=s,d=(a==null?void 0:a.nodeId)===t&&(a==null?void 0:a.id)===e&&(a==null?void 0:a.type)===n;return{connectingFrom:(c==null?void 0:c.nodeId)===t&&(c==null?void 0:c.id)===e&&(c==null?void 0:c.type)===n,connectingTo:d,clickConnecting:(r==null?void 0:r.nodeId)===t&&(r==null?void 0:r.id)===e&&(r==null?void 0:r.type)===n,isPossibleEndHandle:i===Vt.Strict?(c==null?void 0:c.type)!==n:t!==(c==null?void 0:c.nodeId)||e!==(c==null?void 0:c.id),connectionInProcess:!!c,clickConnectionInProcess:!!r,valid:d&&u}};function Ed({type:t="source",position:e=O.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:r=!0,isConnectableEnd:i=!0,id:s,onConnect:c,children:a,className:u,onMouseDown:d,onTouchStart:f,...l},h){var S,v;const g=s||null,y=t==="target",E=et(),x=tn(),{connectOnClick:b,noPanClassName:p,rfId:w}=U(_d,nt),{connectingFrom:M,connectingTo:I,clickConnecting:C,isPossibleEndHandle:z,connectionInProcess:A,clickConnectionInProcess:P,valid:V}=U(bd(x,g,t),nt);x||(v=(S=E.getState()).onError)==null||v.call(S,"010",dt.error010());const L=k=>{const{defaultEdgeOptions:$,onConnect:N,hasDefaultEdges:H}=E.getState(),j={...$,...k};if(H){const{edges:R,setEdges:Y}=E.getState();Y(Gu(j,R))}N==null||N(j),c==null||c(j)},D=k=>{if(!x)return;const $=ci(k.nativeEvent);if(r&&($&&k.button===0||!$)){const N=E.getState();Bn.onPointerDown(k.nativeEvent,{autoPanOnConnect:N.autoPanOnConnect,connectionMode:N.connectionMode,connectionRadius:N.connectionRadius,domNode:N.domNode,nodeLookup:N.nodeLookup,lib:N.lib,isTarget:y,handleId:g,nodeId:x,flowId:N.rfId,panBy:N.panBy,cancelConnection:N.cancelConnection,onConnectStart:N.onConnectStart,onConnectEnd:N.onConnectEnd,updateConnection:N.updateConnection,onConnect:L,isValidConnection:n||N.isValidConnection,getTransform:()=>E.getState().transform,getFromHandle:()=>E.getState().connection.fromHandle,autoPanSpeed:N.autoPanSpeed})}$?d==null||d(k):f==null||f(k)},m=k=>{const{onClickConnectStart:$,onClickConnectEnd:N,connectionClickStartHandle:H,connectionMode:j,isValidConnection:R,lib:Y,rfId:F,nodeLookup:X,connection:W}=E.getState();if(!x||!H&&!r)return;if(!H){$==null||$(k.nativeEvent,{nodeId:x,handleId:g,handleType:t}),E.setState({connectionClickStartHandle:{nodeId:x,type:t,id:g}});return}const B=si(k.target),q=n||R,{connection:Z,isValid:J}=Bn.isValid(k.nativeEvent,{handle:{nodeId:x,id:g,type:t},connectionMode:j,fromNodeId:H.nodeId,fromHandleId:H.id||null,fromType:H.type,isValidConnection:q,flowId:F,doc:B,lib:Y,nodeLookup:X});J&&Z&&L(Z);const K=structuredClone(W);delete K.inProgress,K.toPosition=K.toHandle?K.toHandle.position:null,N==null||N(k,K),E.setState({connectionClickStartHandle:null})};return _.jsx("div",{"data-handleid":g,"data-nodeid":x,"data-handlepos":e,"data-id":`${w}-${x}-${g}-${t}`,className:ot(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",p,u,{source:!y,target:y,connectable:o,connectablestart:r,connectableend:i,clickconnecting:C,connectingfrom:M,connectingto:I,valid:V,connectionindicator:o&&(!A||z)&&(A||P?i:r)}]),onMouseDown:D,onTouchStart:D,onClick:b?m:void 0,ref:h,...l,children:a})}const je=T.memo(Ii(Ed));function Nd({data:t,isConnectable:e,sourcePosition:n=O.Bottom}){return _.jsxs(_.Fragment,{children:[t==null?void 0:t.label,_.jsx(je,{type:"source",position:n,isConnectable:e})]})}function Sd({data:t,isConnectable:e,targetPosition:n=O.Top,sourcePosition:o=O.Bottom}){return _.jsxs(_.Fragment,{children:[_.jsx(je,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label,_.jsx(je,{type:"source",position:o,isConnectable:e})]})}function Cd(){return null}function kd({data:t,isConnectable:e,targetPosition:n=O.Top}){return _.jsxs(_.Fragment,{children:[_.jsx(je,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label]})}const Re={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},or={input:Nd,default:Sd,output:kd,group:Cd};function Md(t){var e,n,o,r;return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??((e=t.style)==null?void 0:e.width),height:t.height??t.initialHeight??((n=t.style)==null?void 0:n.height)}:{width:t.width??((o=t.style)==null?void 0:o.width),height:t.height??((r=t.style)==null?void 0:r.height)}}const $d=t=>{const{width:e,height:n,x:o,y:r}=Ft(t.nodeLookup,{filter:i=>!!i.selected});return{width:ft(e)?e:null,height:ft(n)?n:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${o}px,${r}px)`}};function Id({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const o=et(),{width:r,height:i,transformString:s,userSelectionActive:c}=U($d,nt),a=Pi(),u=T.useRef(null);if(T.useEffect(()=>{var l;n||(l=u.current)==null||l.focus({preventScroll:!0})},[n]),Ti({nodeRef:u}),c||!r||!i)return null;const d=t?l=>{const h=o.getState().nodes.filter(g=>g.selected);t(l,h)}:void 0,f=l=>{Object.prototype.hasOwnProperty.call(Re,l.key)&&(l.preventDefault(),a({direction:Re[l.key],factor:l.shiftKey?4:1}))};return _.jsx("div",{className:ot(["react-flow__nodesselection","react-flow__container",e]),style:{transform:s},children:_.jsx("div",{ref:u,className:"react-flow__nodesselection-rect",onContextMenu:d,tabIndex:n?void 0:-1,onKeyDown:n?void 0:f,style:{width:r,height:i}})})}const rr=typeof window<"u"?window:void 0,Ad=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function zi({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:s,paneClickDistance:c,deleteKeyCode:a,selectionKeyCode:u,selectionOnDrag:d,selectionMode:f,onSelectionStart:l,onSelectionEnd:h,multiSelectionKeyCode:g,panActivationKeyCode:y,zoomActivationKeyCode:E,elementsSelectable:x,zoomOnScroll:b,zoomOnPinch:p,panOnScroll:w,panOnScrollSpeed:M,panOnScrollMode:I,zoomOnDoubleClick:C,panOnDrag:z,defaultViewport:A,translateExtent:P,minZoom:V,maxZoom:L,preventScrolling:D,onSelectionContextMenu:m,noWheelClassName:S,noPanClassName:v,disableKeyboardA11y:k,onViewportChange:$,isControlledViewport:N}){const{nodesSelectionActive:H,userSelectionActive:j}=U(Ad),R=ue(u,{target:rr}),Y=ue(y,{target:rr}),F=Y||z,X=Y||w,W=d&&F!==!0,B=R||j||W;return fd({deleteKeyCode:a,multiSelectionKeyCode:g}),_.jsx(gd,{onPaneContextMenu:i,elementsSelectable:x,zoomOnScroll:b,zoomOnPinch:p,panOnScroll:X,panOnScrollSpeed:M,panOnScrollMode:I,zoomOnDoubleClick:C,panOnDrag:!R&&F,defaultViewport:A,translateExtent:P,minZoom:V,maxZoom:L,zoomActivationKeyCode:E,preventScrolling:D,noWheelClassName:S,noPanClassName:v,onViewportChange:$,isControlledViewport:N,paneClickDistance:c,children:_.jsxs(xd,{onSelectionStart:l,onSelectionEnd:h,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:s,panOnDrag:F,isSelecting:!!B,selectionMode:f,selectionKeyPressed:R,selectionOnDrag:W,children:[t,H&&_.jsx(Id,{onSelectionContextMenu:m,noPanClassName:v,disableKeyboardA11y:k})]})})}zi.displayName="FlowRenderer";const Td=T.memo(zi),Pd=t=>e=>t?Qr(e.nodeLookup,{x:0,y:0,width:e.width,height:e.height},e.transform,!0).map(n=>n.id):Array.from(e.nodeLookup.keys());function zd(t){return U(T.useCallback(Pd(t),[t]),nt)}const Hd=t=>t.updateNodeInternals;function Dd(){const t=U(Hd),[e]=T.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const o=new Map;n.forEach(r=>{const i=r.target.getAttribute("data-id");o.set(i,{id:i,nodeElement:r.target,force:!0})}),t(o)}));return T.useEffect(()=>()=>{e==null||e.disconnect()},[e]),e}function Ld({node:t,nodeType:e,hasDimensions:n,resizeObserver:o}){const r=et(),i=T.useRef(null),s=T.useRef(null),c=T.useRef(t.sourcePosition),a=T.useRef(t.targetPosition),u=T.useRef(e),d=n&&!!t.internals.handleBounds;return T.useEffect(()=>{i.current&&!t.hidden&&(!d||s.current!==i.current)&&(s.current&&(o==null||o.unobserve(s.current)),o==null||o.observe(i.current),s.current=i.current)},[d,t.hidden]),T.useEffect(()=>()=>{s.current&&(o==null||o.unobserve(s.current),s.current=null)},[]),T.useEffect(()=>{if(i.current){const f=u.current!==e,l=c.current!==t.sourcePosition,h=a.current!==t.targetPosition;(f||l||h)&&(u.current=e,c.current=t.sourcePosition,a.current=t.targetPosition,r.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:i.current,force:!0}]])))}},[t.id,e,t.sourcePosition,t.targetPosition]),i}function Vd({id:t,onClick:e,onMouseEnter:n,onMouseMove:o,onMouseLeave:r,onContextMenu:i,onDoubleClick:s,nodesDraggable:c,elementsSelectable:a,nodesConnectable:u,nodesFocusable:d,resizeObserver:f,noDragClassName:l,noPanClassName:h,disableKeyboardA11y:g,rfId:y,nodeTypes:E,nodeClickDistance:x,onError:b}){const{node:p,internals:w,isParent:M}=U(B=>{const q=B.nodeLookup.get(t),Z=B.parentLookup.has(t);return{node:q,internals:q.internals,isParent:Z}},nt);let I=p.type||"default",C=(E==null?void 0:E[I])||or[I];C===void 0&&(b==null||b("003",dt.error003(I)),I="default",C=or.default);const z=!!(p.draggable||c&&typeof p.draggable>"u"),A=!!(p.selectable||a&&typeof p.selectable>"u"),P=!!(p.connectable||u&&typeof p.connectable>"u"),V=!!(p.focusable||d&&typeof p.focusable>"u"),L=et(),D=ri(p),m=Ld({node:p,nodeType:I,hasDimensions:D,resizeObserver:f}),S=Ti({nodeRef:m,disabled:p.hidden||!z,noDragClassName:l,handleSelector:p.dragHandle,nodeId:t,isSelectable:A,nodeClickDistance:x}),v=Pi();if(p.hidden)return null;const k=vt(p),$=Md(p),N=A||z||e||n||o||r,H=n?B=>n(B,{...w.userNode}):void 0,j=o?B=>o(B,{...w.userNode}):void 0,R=r?B=>r(B,{...w.userNode}):void 0,Y=i?B=>i(B,{...w.userNode}):void 0,F=s?B=>s(B,{...w.userNode}):void 0,X=B=>{const{selectNodesOnDrag:q,nodeDragThreshold:Z}=L.getState();A&&(!q||!z||Z>0)&&Fn({id:t,store:L,nodeRef:m}),e&&e(B,{...w.userNode})},W=B=>{if(!(Ln(B.nativeEvent)||g))if(Gr.includes(B.key)&&A){const q=B.key==="Escape";Fn({id:t,store:L,unselect:q,nodeRef:m})}else z&&p.selected&&Object.prototype.hasOwnProperty.call(Re,B.key)&&(B.preventDefault(),L.setState({ariaLiveMessage:`Moved selected node ${B.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~w.positionAbsolute.x}, y: ${~~w.positionAbsolute.y}`}),v({direction:Re[B.key],factor:B.shiftKey?4:1}))};return _.jsx("div",{className:ot(["react-flow__node",`react-flow__node-${I}`,{[h]:z},p.className,{selected:p.selected,selectable:A,parent:M,draggable:z,dragging:S}]),ref:m,style:{zIndex:w.z,transform:`translate(${w.positionAbsolute.x}px,${w.positionAbsolute.y}px)`,pointerEvents:N?"all":"none",visibility:D?"visible":"hidden",...p.style,...$},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:H,onMouseMove:j,onMouseLeave:R,onContextMenu:Y,onClick:X,onDoubleClick:F,onKeyDown:V?W:void 0,tabIndex:V?0:void 0,role:V?"button":void 0,"aria-describedby":g?void 0:`${Ni}-${y}`,"aria-label":p.ariaLabel,children:_.jsx(vd,{value:t,children:_.jsx(C,{id:t,data:p.data,type:I,positionAbsoluteX:w.positionAbsolute.x,positionAbsoluteY:w.positionAbsolute.y,selected:p.selected??!1,selectable:A,draggable:z,deletable:p.deletable??!0,isConnectable:P,sourcePosition:p.sourcePosition,targetPosition:p.targetPosition,dragging:S,dragHandle:p.dragHandle,zIndex:w.z,parentId:p.parentId,...k})})})}const jd=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function Hi(t){const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:o,elementsSelectable:r,onError:i}=U(jd,nt),s=zd(t.onlyRenderVisibleElements),c=Dd();return _.jsx("div",{className:"react-flow__nodes",style:Je,children:s.map(a=>_.jsx(Vd,{id:a,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:c,nodesDraggable:e,nodesConnectable:n,nodesFocusable:o,elementsSelectable:r,nodeClickDistance:t.nodeClickDistance,onError:i},a))})}Hi.displayName="NodeRenderer";const Rd=T.memo(Hi);function Bd(t){return U(T.useCallback(n=>{if(!t)return n.edges.map(r=>r.id);const o=[];if(n.width&&n.height)for(const r of n.edges){const i=n.nodeLookup.get(r.source),s=n.nodeLookup.get(r.target);i&&s&&Yu({sourceNode:i,targetNode:s,width:n.width,height:n.height,transform:n.transform})&&o.push(r.id)}return o},[t]),nt)}const Fd=({color:t="none",strokeWidth:e=1})=>_.jsx("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Od=({color:t="none",strokeWidth:e=1})=>_.jsx("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),ir={[De.Arrow]:Fd,[De.ArrowClosed]:Od};function Xd(t){const e=et();return T.useMemo(()=>{var r,i;return Object.prototype.hasOwnProperty.call(ir,t)?ir[t]:((i=(r=e.getState()).onError)==null||i.call(r,"009",dt.error009(t)),null)},[t])}const Yd=({id:t,type:e,color:n,width:o=12.5,height:r=12.5,markerUnits:i="strokeWidth",strokeWidth:s,orient:c="auto-start-reverse"})=>{const a=Xd(e);return a?_.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${o}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:c,refX:"0",refY:"0",children:_.jsx(a,{color:n,strokeWidth:s})}):null},Di=({defaultColor:t,rfId:e})=>{const n=U(i=>i.edges),o=U(i=>i.defaultEdgeOptions),r=T.useMemo(()=>Ju(n,{id:e,defaultColor:t,defaultMarkerStart:o==null?void 0:o.markerStart,defaultMarkerEnd:o==null?void 0:o.markerEnd}),[n,o,e,t]);return r.length?_.jsx("svg",{className:"react-flow__marker",children:_.jsx("defs",{children:r.map(i=>_.jsx(Yd,{id:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient},i.id))})}):null};Di.displayName="MarkerDefinitions";var Wd=T.memo(Di);function Li({x:t,y:e,label:n,labelStyle:o={},labelShowBg:r=!0,labelBgStyle:i={},labelBgPadding:s=[2,4],labelBgBorderRadius:c=2,children:a,className:u,...d}){const[f,l]=T.useState({x:1,y:0,width:0,height:0}),h=ot(["react-flow__edge-textwrapper",u]),g=T.useRef(null);return T.useEffect(()=>{if(g.current){const y=g.current.getBBox();l({x:y.x,y:y.y,width:y.width,height:y.height})}},[n]),typeof n>"u"||!n?null:_.jsxs("g",{transform:`translate(${t-f.width/2} ${e-f.height/2})`,className:h,visibility:f.width?"visible":"hidden",...d,children:[r&&_.jsx("rect",{width:f.width+2*s[0],x:-s[0],y:-s[1],height:f.height+2*s[1],className:"react-flow__edge-textbg",style:i,rx:c,ry:c}),_.jsx("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:g,style:o,children:n}),a]})}Li.displayName="EdgeText";const qd=T.memo(Li);function en({path:t,labelX:e,labelY:n,label:o,labelStyle:r,labelShowBg:i,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:a,interactionWidth:u=20,...d}){return _.jsxs(_.Fragment,{children:[_.jsx("path",{...d,d:t,fill:"none",className:ot(["react-flow__edge-path",d.className])}),u&&_.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:u,className:"react-flow__edge-interaction"}),o&&ft(e)&&ft(n)?_.jsx(qd,{x:e,y:n,label:o,labelStyle:r,labelShowBg:i,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:a}):null]})}function sr({pos:t,x1:e,y1:n,x2:o,y2:r}){return t===O.Left||t===O.Right?[.5*(e+o),n]:[e,.5*(n+r)]}function Vi({sourceX:t,sourceY:e,sourcePosition:n=O.Bottom,targetX:o,targetY:r,targetPosition:i=O.Top}){const[s,c]=sr({pos:n,x1:t,y1:e,x2:o,y2:r}),[a,u]=sr({pos:i,x1:o,y1:r,x2:t,y2:e}),[d,f,l,h]=ai({sourceX:t,sourceY:e,targetX:o,targetY:r,sourceControlX:s,sourceControlY:c,targetControlX:a,targetControlY:u});return[`M${t},${e} C${s},${c} ${a},${u} ${o},${r}`,d,f,l,h]}function ji(t){return T.memo(({id:e,sourceX:n,sourceY:o,targetX:r,targetY:i,sourcePosition:s=O.Bottom,targetPosition:c=O.Top,label:a,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:l,labelBgBorderRadius:h,style:g,markerEnd:y,markerStart:E,interactionWidth:x})=>{const[b,p,w]=Vi({sourceX:n,sourceY:o,sourcePosition:s,targetX:r,targetY:i,targetPosition:c}),M=t.isInternal?void 0:e;return _.jsx(en,{id:M,path:b,labelX:p,labelY:w,label:a,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:l,labelBgBorderRadius:h,style:g,markerEnd:y,markerStart:E,interactionWidth:x})})}const Gd=ji({isInternal:!1}),Ri=ji({isInternal:!0});Gd.displayName="SimpleBezierEdge";Ri.displayName="SimpleBezierEdgeInternal";function Bi(t){return T.memo(({id:e,sourceX:n,sourceY:o,targetX:r,targetY:i,label:s,labelStyle:c,labelShowBg:a,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:l,sourcePosition:h=O.Bottom,targetPosition:g=O.Top,markerEnd:y,markerStart:E,pathOptions:x,interactionWidth:b})=>{const[p,w,M]=Vn({sourceX:n,sourceY:o,sourcePosition:h,targetX:r,targetY:i,targetPosition:g,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset}),I=t.isInternal?void 0:e;return _.jsx(en,{id:I,path:p,labelX:w,labelY:M,label:s,labelStyle:c,labelShowBg:a,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:l,markerEnd:y,markerStart:E,interactionWidth:b})})}const Fi=Bi({isInternal:!1}),Oi=Bi({isInternal:!0});Fi.displayName="SmoothStepEdge";Oi.displayName="SmoothStepEdgeInternal";function Xi(t){return T.memo(({id:e,...n})=>{var r;const o=t.isInternal?void 0:e;return _.jsx(Fi,{...n,id:o,pathOptions:T.useMemo(()=>{var i;return{borderRadius:0,offset:(i=n.pathOptions)==null?void 0:i.offset}},[(r=n.pathOptions)==null?void 0:r.offset])})})}const Kd=Xi({isInternal:!1}),Yi=Xi({isInternal:!0});Kd.displayName="StepEdge";Yi.displayName="StepEdgeInternal";function Wi(t){return T.memo(({id:e,sourceX:n,sourceY:o,targetX:r,targetY:i,label:s,labelStyle:c,labelShowBg:a,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:l,markerEnd:h,markerStart:g,interactionWidth:y})=>{const[E,x,b]=fi({sourceX:n,sourceY:o,targetX:r,targetY:i}),p=t.isInternal?void 0:e;return _.jsx(en,{id:p,path:E,labelX:x,labelY:b,label:s,labelStyle:c,labelShowBg:a,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:l,markerEnd:h,markerStart:g,interactionWidth:y})})}const Zd=Wi({isInternal:!1}),qi=Wi({isInternal:!0});Zd.displayName="StraightEdge";qi.displayName="StraightEdgeInternal";function Gi(t){return T.memo(({id:e,sourceX:n,sourceY:o,targetX:r,targetY:i,sourcePosition:s=O.Bottom,targetPosition:c=O.Top,label:a,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:l,labelBgBorderRadius:h,style:g,markerEnd:y,markerStart:E,pathOptions:x,interactionWidth:b})=>{const[p,w,M]=li({sourceX:n,sourceY:o,sourcePosition:s,targetX:r,targetY:i,targetPosition:c,curvature:x==null?void 0:x.curvature}),I=t.isInternal?void 0:e;return _.jsx(en,{id:I,path:p,labelX:w,labelY:M,label:a,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:l,labelBgBorderRadius:h,style:g,markerEnd:y,markerStart:E,interactionWidth:b})})}const Ud=Gi({isInternal:!1}),Ki=Gi({isInternal:!0});Ud.displayName="BezierEdge";Ki.displayName="BezierEdgeInternal";const cr={default:Ki,straight:qi,step:Yi,smoothstep:Oi,simplebezier:Ri},ar={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Qd=(t,e,n)=>n===O.Left?t-e:n===O.Right?t+e:t,Jd=(t,e,n)=>n===O.Top?t-e:n===O.Bottom?t+e:t,lr="react-flow__edgeupdater";function ur({position:t,centerX:e,centerY:n,radius:o=10,onMouseDown:r,onMouseEnter:i,onMouseOut:s,type:c}){return _.jsx("circle",{onMouseDown:r,onMouseEnter:i,onMouseOut:s,className:ot([lr,`${lr}-${c}`]),cx:Qd(e,o,t),cy:Jd(n,o,t),r:o,stroke:"transparent",fill:"transparent"})}function th({isReconnectable:t,reconnectRadius:e,edge:n,sourceX:o,sourceY:r,targetX:i,targetY:s,sourcePosition:c,targetPosition:a,onReconnect:u,onReconnectStart:d,onReconnectEnd:f,setReconnecting:l,setUpdateHover:h}){const g=et(),y=(w,M)=>{if(w.button!==0)return;const{autoPanOnConnect:I,domNode:C,isValidConnection:z,connectionMode:A,connectionRadius:P,lib:V,onConnectStart:L,onConnectEnd:D,cancelConnection:m,nodeLookup:S,rfId:v,panBy:k,updateConnection:$}=g.getState(),N=M.type==="target";l(!0),d==null||d(w,n,M.type);const H=(R,Y)=>{l(!1),f==null||f(R,n,M.type,Y)},j=R=>u==null?void 0:u(n,R);Bn.onPointerDown(w.nativeEvent,{autoPanOnConnect:I,connectionMode:A,connectionRadius:P,domNode:C,handleId:M.id,nodeId:M.nodeId,nodeLookup:S,isTarget:N,edgeUpdaterType:M.type,lib:V,flowId:v,cancelConnection:m,panBy:k,isValidConnection:z,onConnect:j,onConnectStart:L,onConnectEnd:D,onReconnectEnd:H,updateConnection:$,getTransform:()=>g.getState().transform,getFromHandle:()=>g.getState().connection.fromHandle})},E=w=>y(w,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),x=w=>y(w,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),b=()=>h(!0),p=()=>h(!1);return _.jsxs(_.Fragment,{children:[(t===!0||t==="source")&&_.jsx(ur,{position:c,centerX:o,centerY:r,radius:e,onMouseDown:E,onMouseEnter:b,onMouseOut:p,type:"source"}),(t===!0||t==="target")&&_.jsx(ur,{position:a,centerX:i,centerY:s,radius:e,onMouseDown:x,onMouseEnter:b,onMouseOut:p,type:"target"})]})}function eh({id:t,edgesFocusable:e,edgesReconnectable:n,elementsSelectable:o,onClick:r,onDoubleClick:i,onContextMenu:s,onMouseEnter:c,onMouseMove:a,onMouseLeave:u,reconnectRadius:d,onReconnect:f,onReconnectStart:l,onReconnectEnd:h,rfId:g,edgeTypes:y,noPanClassName:E,onError:x,disableKeyboardA11y:b}){let p=U(G=>G.edgeLookup.get(t));const w=U(G=>G.defaultEdgeOptions);p=w?{...w,...p}:p;let M=p.type||"default",I=(y==null?void 0:y[M])||cr[M];I===void 0&&(x==null||x("011",dt.error011(M)),M="default",I=cr.default);const C=!!(p.focusable||e&&typeof p.focusable>"u"),z=typeof f<"u"&&(p.reconnectable||n&&typeof p.reconnectable>"u"),A=!!(p.selectable||o&&typeof p.selectable>"u"),P=T.useRef(null),[V,L]=T.useState(!1),[D,m]=T.useState(!1),S=et(),{zIndex:v,sourceX:k,sourceY:$,targetX:N,targetY:H,sourcePosition:j,targetPosition:R}=U(T.useCallback(G=>{const Q=G.nodeLookup.get(p.source),tt=G.nodeLookup.get(p.target);if(!Q||!tt)return{zIndex:p.zIndex,...ar};const rt=Qu({id:t,sourceNode:Q,targetNode:tt,sourceHandle:p.sourceHandle||null,targetHandle:p.targetHandle||null,connectionMode:G.connectionMode,onError:x});return{zIndex:Xu({selected:p.selected,zIndex:p.zIndex,sourceNode:Q,targetNode:tt,elevateOnSelect:G.elevateEdgesOnSelect}),...rt||ar}},[p.source,p.target,p.sourceHandle,p.targetHandle,p.selected,p.zIndex]),nt),Y=T.useMemo(()=>p.markerStart?`url('#${jn(p.markerStart,g)}')`:void 0,[p.markerStart,g]),F=T.useMemo(()=>p.markerEnd?`url('#${jn(p.markerEnd,g)}')`:void 0,[p.markerEnd,g]);if(p.hidden||k===null||$===null||N===null||H===null)return null;const X=G=>{var at;const{addSelectedEdges:Q,unselectNodesAndEdges:tt,multiSelectionActive:rt}=S.getState();A&&(S.setState({nodesSelectionActive:!1}),p.selected&&rt?(tt({nodes:[],edges:[p]}),(at=P.current)==null||at.blur()):Q([t])),r&&r(G,p)},W=i?G=>{i(G,{...p})}:void 0,B=s?G=>{s(G,{...p})}:void 0,q=c?G=>{c(G,{...p})}:void 0,Z=a?G=>{a(G,{...p})}:void 0,J=u?G=>{u(G,{...p})}:void 0,K=G=>{var Q;if(!b&&Gr.includes(G.key)&&A){const{unselectNodesAndEdges:tt,addSelectedEdges:rt}=S.getState();G.key==="Escape"?((Q=P.current)==null||Q.blur(),tt({edges:[p]})):rt([t])}};return _.jsx("svg",{style:{zIndex:v},children:_.jsxs("g",{className:ot(["react-flow__edge",`react-flow__edge-${M}`,p.className,E,{selected:p.selected,animated:p.animated,inactive:!A&&!r,updating:V,selectable:A}]),onClick:X,onDoubleClick:W,onContextMenu:B,onMouseEnter:q,onMouseMove:Z,onMouseLeave:J,onKeyDown:C?K:void 0,tabIndex:C?0:void 0,role:C?"button":"img","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":p.ariaLabel===null?void 0:p.ariaLabel||`Edge from ${p.source} to ${p.target}`,"aria-describedby":C?`${Si}-${g}`:void 0,ref:P,children:[!D&&_.jsx(I,{id:t,source:p.source,target:p.target,type:p.type,selected:p.selected,animated:p.animated,selectable:A,deletable:p.deletable??!0,label:p.label,labelStyle:p.labelStyle,labelShowBg:p.labelShowBg,labelBgStyle:p.labelBgStyle,labelBgPadding:p.labelBgPadding,labelBgBorderRadius:p.labelBgBorderRadius,sourceX:k,sourceY:$,targetX:N,targetY:H,sourcePosition:j,targetPosition:R,data:p.data,style:p.style,sourceHandleId:p.sourceHandle,targetHandleId:p.targetHandle,markerStart:Y,markerEnd:F,pathOptions:"pathOptions"in p?p.pathOptions:void 0,interactionWidth:p.interactionWidth}),z&&_.jsx(th,{edge:p,isReconnectable:z,reconnectRadius:d,onReconnect:f,onReconnectStart:l,onReconnectEnd:h,sourceX:k,sourceY:$,targetX:N,targetY:H,sourcePosition:j,targetPosition:R,setUpdateHover:L,setReconnecting:m})]})})}const nh=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function Zi({defaultMarkerColor:t,onlyRenderVisibleElements:e,rfId:n,edgeTypes:o,noPanClassName:r,onReconnect:i,onEdgeContextMenu:s,onEdgeMouseEnter:c,onEdgeMouseMove:a,onEdgeMouseLeave:u,onEdgeClick:d,reconnectRadius:f,onEdgeDoubleClick:l,onReconnectStart:h,onReconnectEnd:g,disableKeyboardA11y:y}){const{edgesFocusable:E,edgesReconnectable:x,elementsSelectable:b,onError:p}=U(nh,nt),w=Bd(e);return _.jsxs("div",{className:"react-flow__edges",children:[_.jsx(Wd,{defaultColor:t,rfId:n}),w.map(M=>_.jsx(eh,{id:M,edgesFocusable:E,edgesReconnectable:x,elementsSelectable:b,noPanClassName:r,onReconnect:i,onContextMenu:s,onMouseEnter:c,onMouseMove:a,onMouseLeave:u,onClick:d,reconnectRadius:f,onDoubleClick:l,onReconnectStart:h,onReconnectEnd:g,rfId:n,onError:p,edgeTypes:o,disableKeyboardA11y:y},M))]})}Zi.displayName="EdgeRenderer";const oh=T.memo(Zi),rh=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function ih({children:t}){const e=U(rh);return _.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:e},children:t})}function sh(t){const e=eo(),n=T.useRef(!1);T.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const ch=t=>{var e;return(e=t.panZoom)==null?void 0:e.syncViewport};function ah(t){const e=U(ch),n=et();return T.useEffect(()=>{t&&(e==null||e(t),n.setState({transform:[t.x,t.y,t.zoom]}))},[t,e]),null}function lh(t){return t.connection.inProgress?{...t.connection,to:ge(t.connection.to,t.transform)}:{...t.connection}}function uh(t){return lh}function fh(t){const e=uh();return U(e,nt)}const dh=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function hh({containerStyle:t,style:e,type:n,component:o}){const{nodesConnectable:r,width:i,height:s,isValid:c,inProgress:a}=U(dh,nt);return!(i&&r&&a)?null:_.jsx("svg",{style:t,width:i,height:s,className:"react-flow__connectionline react-flow__container",children:_.jsx("g",{className:ot(["react-flow__connection",Zr(c)]),children:_.jsx(Ui,{style:e,type:n,CustomComponent:o,isValid:c})})})}const Ui=({style:t,type:e=Nt.Bezier,CustomComponent:n,isValid:o})=>{const{inProgress:r,from:i,fromNode:s,fromHandle:c,fromPosition:a,to:u,toNode:d,toHandle:f,toPosition:l}=fh();if(!r)return;if(n)return _.jsx(n,{connectionLineType:e,connectionLineStyle:t,fromNode:s,fromHandle:c,fromX:i.x,fromY:i.y,toX:u.x,toY:u.y,fromPosition:a,toPosition:l,connectionStatus:Zr(o),toNode:d,toHandle:f});let h="";const g={sourceX:i.x,sourceY:i.y,sourcePosition:a,targetX:u.x,targetY:u.y,targetPosition:l};switch(e){case Nt.Bezier:[h]=li(g);break;case Nt.SimpleBezier:[h]=Vi(g);break;case Nt.Step:[h]=Vn({...g,borderRadius:0});break;case Nt.SmoothStep:[h]=Vn(g);break;default:[h]=fi(g)}return _.jsx("path",{d:h,fill:"none",className:"react-flow__connection-path",style:t})};Ui.displayName="ConnectionLine";const gh={};function fr(t=gh){T.useRef(t),et(),T.useEffect(()=>{},[t])}function ph(){et(),T.useRef(!1),T.useEffect(()=>{},[])}function Qi({nodeTypes:t,edgeTypes:e,onInit:n,onNodeClick:o,onEdgeClick:r,onNodeDoubleClick:i,onEdgeDoubleClick:s,onNodeMouseEnter:c,onNodeMouseMove:a,onNodeMouseLeave:u,onNodeContextMenu:d,onSelectionContextMenu:f,onSelectionStart:l,onSelectionEnd:h,connectionLineType:g,connectionLineStyle:y,connectionLineComponent:E,connectionLineContainerStyle:x,selectionKeyCode:b,selectionOnDrag:p,selectionMode:w,multiSelectionKeyCode:M,panActivationKeyCode:I,zoomActivationKeyCode:C,deleteKeyCode:z,onlyRenderVisibleElements:A,elementsSelectable:P,defaultViewport:V,translateExtent:L,minZoom:D,maxZoom:m,preventScrolling:S,defaultMarkerColor:v,zoomOnScroll:k,zoomOnPinch:$,panOnScroll:N,panOnScrollSpeed:H,panOnScrollMode:j,zoomOnDoubleClick:R,panOnDrag:Y,onPaneClick:F,onPaneMouseEnter:X,onPaneMouseMove:W,onPaneMouseLeave:B,onPaneScroll:q,onPaneContextMenu:Z,paneClickDistance:J,nodeClickDistance:K,onEdgeContextMenu:G,onEdgeMouseEnter:Q,onEdgeMouseMove:tt,onEdgeMouseLeave:rt,reconnectRadius:at,onReconnect:nn,onReconnectStart:on,onReconnectEnd:rn,noDragClassName:Ot,noWheelClassName:sn,noPanClassName:Xt,disableKeyboardA11y:Yt,nodeExtent:cn,rfId:Wt,viewport:qt,onViewportChange:pe}){return fr(t),fr(e),ph(),sh(n),ah(qt),_.jsx(Td,{onPaneClick:F,onPaneMouseEnter:X,onPaneMouseMove:W,onPaneMouseLeave:B,onPaneContextMenu:Z,onPaneScroll:q,paneClickDistance:J,deleteKeyCode:z,selectionKeyCode:b,selectionOnDrag:p,selectionMode:w,onSelectionStart:l,onSelectionEnd:h,multiSelectionKeyCode:M,panActivationKeyCode:I,zoomActivationKeyCode:C,elementsSelectable:P,zoomOnScroll:k,zoomOnPinch:$,zoomOnDoubleClick:R,panOnScroll:N,panOnScrollSpeed:H,panOnScrollMode:j,panOnDrag:Y,defaultViewport:V,translateExtent:L,minZoom:D,maxZoom:m,onSelectionContextMenu:f,preventScrolling:S,noDragClassName:Ot,noWheelClassName:sn,noPanClassName:Xt,disableKeyboardA11y:Yt,onViewportChange:pe,isControlledViewport:!!qt,children:_.jsxs(ih,{children:[_.jsx(oh,{edgeTypes:e,onEdgeClick:r,onEdgeDoubleClick:s,onReconnect:nn,onReconnectStart:on,onReconnectEnd:rn,onlyRenderVisibleElements:A,onEdgeContextMenu:G,onEdgeMouseEnter:Q,onEdgeMouseMove:tt,onEdgeMouseLeave:rt,reconnectRadius:at,defaultMarkerColor:v,noPanClassName:Xt,disableKeyboardA11y:Yt,rfId:Wt}),_.jsx(hh,{style:y,type:g,component:E,containerStyle:x}),_.jsx("div",{className:"react-flow__edgelabel-renderer"}),_.jsx(Rd,{nodeTypes:t,onNodeClick:o,onNodeDoubleClick:i,onNodeMouseEnter:c,onNodeMouseMove:a,onNodeMouseLeave:u,onNodeContextMenu:d,nodeClickDistance:K,onlyRenderVisibleElements:A,noPanClassName:Xt,noDragClassName:Ot,disableKeyboardA11y:Yt,nodeExtent:cn,rfId:Wt}),_.jsx("div",{className:"react-flow__viewport-portal"})]})})}Qi.displayName="GraphView";const mh=T.memo(Qi),dr=({nodes:t,edges:e,defaultNodes:n,defaultEdges:o,width:r,height:i,fitView:s,nodeOrigin:c,nodeExtent:a}={})=>{const u=new Map,d=new Map,f=new Map,l=new Map,h=o??e??[],g=n??t??[],y=c??[0,0],E=a??se;hi(f,l,h),Rn(g,u,d,{nodeOrigin:y,nodeExtent:E,elevateNodesOnSelect:!1});let x=[0,0,1];if(s&&r&&i){const b=Ft(u,{filter:I=>!!((I.width||I.initialWidth)&&(I.height||I.initialHeight))}),{x:p,y:w,zoom:M}=Zn(b,r,i,.5,2,.1);x=[p,w,M]}return{rfId:"1",width:0,height:0,transform:x,nodes:g,nodeLookup:u,parentLookup:d,edges:h,edgeLookup:l,connectionLookup:f,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:o!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:se,nodeExtent:E,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Vt.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:y,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...Kr},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:Fu,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},yh=({nodes:t,edges:e,defaultNodes:n,defaultEdges:o,width:r,height:i,fitView:s,nodeOrigin:c,nodeExtent:a})=>Df((u,d)=>({...dr({nodes:t,edges:e,width:r,height:i,fitView:s,nodeOrigin:c,nodeExtent:a,defaultNodes:n,defaultEdges:o}),setNodes:f=>{const{nodeLookup:l,parentLookup:h,nodeOrigin:g,elevateNodesOnSelect:y}=d();Rn(f,l,h,{nodeOrigin:g,nodeExtent:a,elevateNodesOnSelect:y,checkEquality:!0}),u({nodes:f})},setEdges:f=>{const{connectionLookup:l,edgeLookup:h}=d();hi(l,h,f),u({edges:f})},setDefaultNodesAndEdges:(f,l)=>{if(f){const{setNodes:h}=d();h(f),u({hasDefaultNodes:!0})}if(l){const{setEdges:h}=d();h(l),u({hasDefaultEdges:!0})}},updateNodeInternals:(f,l={triggerFitView:!0})=>{const{triggerNodeChanges:h,nodeLookup:g,parentLookup:y,fitViewOnInit:E,fitViewDone:x,fitViewOnInitOptions:b,domNode:p,nodeOrigin:w,nodeExtent:M,debug:I,fitViewSync:C}=d(),{changes:z,updatedInternals:A}=sf(f,g,y,p,w,M);if(A){if(nf(g,y,{nodeOrigin:w,nodeExtent:M}),l.triggerFitView){let P=x;!x&&E&&(P=C({...b,nodes:b==null?void 0:b.nodes})),u({fitViewDone:P})}else u({});(z==null?void 0:z.length)>0&&(I&&console.log("React Flow: trigger node changes",z),h==null||h(z))}},updateNodePositions:(f,l=!1)=>{const h=[],g=[],{nodeLookup:y,triggerNodeChanges:E}=d();for(const[x,b]of f){const p=y.get(x),w=!!(p!=null&&p.expandParent&&(p!=null&&p.parentId)&&(b!=null&&b.position)),M={id:x,type:"position",position:w?{x:Math.max(0,b.position.x),y:Math.max(0,b.position.y)}:b.position,dragging:l};w&&p.parentId&&h.push({id:x,parentId:p.parentId,rect:{...b.internals.positionAbsolute,width:b.measured.width??0,height:b.measured.height??0}}),g.push(M)}if(h.length>0){const{parentLookup:x,nodeOrigin:b}=d(),p=to(h,y,x,b);g.push(...p)}E(g)},triggerNodeChanges:f=>{const{onNodesChange:l,setNodes:h,nodes:g,hasDefaultNodes:y,debug:E}=d();if(f!=null&&f.length){if(y){const x=Mi(f,g);h(x)}E&&console.log("React Flow: trigger node changes",f),l==null||l(f)}},triggerEdgeChanges:f=>{const{onEdgesChange:l,setEdges:h,edges:g,hasDefaultEdges:y,debug:E}=d();if(f!=null&&f.length){if(y){const x=$i(f,g);h(x)}E&&console.log("React Flow: trigger edge changes",f),l==null||l(f)}},addSelectedNodes:f=>{const{multiSelectionActive:l,edgeLookup:h,nodeLookup:g,triggerNodeChanges:y,triggerEdgeChanges:E}=d();if(l){const x=f.map(b=>Ct(b,!0));y(x);return}y(Pt(g,new Set([...f]),!0)),E(Pt(h))},addSelectedEdges:f=>{const{multiSelectionActive:l,edgeLookup:h,nodeLookup:g,triggerNodeChanges:y,triggerEdgeChanges:E}=d();if(l){const x=f.map(b=>Ct(b,!0));E(x);return}E(Pt(h,new Set([...f]))),y(Pt(g,new Set,!0))},unselectNodesAndEdges:({nodes:f,edges:l}={})=>{const{edges:h,nodes:g,nodeLookup:y,triggerNodeChanges:E,triggerEdgeChanges:x}=d(),b=f||g,p=l||h,w=b.map(I=>{const C=y.get(I.id);return C&&(C.selected=!1),Ct(I.id,!1)}),M=p.map(I=>Ct(I.id,!1));E(w),x(M)},setMinZoom:f=>{const{panZoom:l,maxZoom:h}=d();l==null||l.setScaleExtent([f,h]),u({minZoom:f})},setMaxZoom:f=>{const{panZoom:l,minZoom:h}=d();l==null||l.setScaleExtent([h,f]),u({maxZoom:f})},setTranslateExtent:f=>{var l;(l=d().panZoom)==null||l.setTranslateExtent(f),u({translateExtent:f})},setPaneClickDistance:f=>{var l;(l=d().panZoom)==null||l.setClickDistance(f)},resetSelectedElements:()=>{const{edges:f,nodes:l,triggerNodeChanges:h,triggerEdgeChanges:g}=d(),y=l.reduce((x,b)=>b.selected?[...x,Ct(b.id,!1)]:x,[]),E=f.reduce((x,b)=>b.selected?[...x,Ct(b.id,!1)]:x,[]);h(y),g(E)},setNodeExtent:f=>{const{nodes:l,nodeLookup:h,parentLookup:g,nodeOrigin:y,elevateNodesOnSelect:E,nodeExtent:x}=d();f[0][0]===x[0][0]&&f[0][1]===x[0][1]&&f[1][0]===x[1][0]&&f[1][1]===x[1][1]||(Rn(l,h,g,{nodeOrigin:y,nodeExtent:f,elevateNodesOnSelect:E,checkEquality:!1}),u({nodeExtent:f}))},panBy:f=>{const{transform:l,width:h,height:g,panZoom:y,translateExtent:E}=d();return cf({delta:f,panZoom:y,transform:l,translateExtent:E,width:h,height:g})},fitView:f=>{const{panZoom:l,width:h,height:g,minZoom:y,maxZoom:E,nodeLookup:x}=d();if(!l)return Promise.resolve(!1);const b=zn(x,f);return Hn({nodes:b,width:h,height:g,panZoom:l,minZoom:y,maxZoom:E},f)},fitViewSync:f=>{const{panZoom:l,width:h,height:g,minZoom:y,maxZoom:E,nodeLookup:x}=d();if(!l)return!1;const b=zn(x,f);return Hn({nodes:b,width:h,height:g,panZoom:l,minZoom:y,maxZoom:E},f),b.size>0},cancelConnection:()=>{u({connection:{...Kr}})},updateConnection:f=>{u({connection:f})},reset:()=>u({...dr()})}),Object.is);function xh({initialNodes:t,initialEdges:e,defaultNodes:n,defaultEdges:o,initialWidth:r,initialHeight:i,fitView:s,nodeOrigin:c,nodeExtent:a,children:u}){const[d]=T.useState(()=>yh({nodes:t,edges:e,defaultNodes:n,defaultEdges:o,width:r,height:i,fitView:s,nodeOrigin:c,nodeExtent:a}));return _.jsx(Lf,{value:d,children:_.jsx(sd,{children:u})})}function wh({children:t,nodes:e,edges:n,defaultNodes:o,defaultEdges:r,width:i,height:s,fitView:c,nodeOrigin:a,nodeExtent:u}){return T.useContext(Ue)?_.jsx(_.Fragment,{children:t}):_.jsx(xh,{initialNodes:e,initialEdges:n,defaultNodes:o,defaultEdges:r,initialWidth:i,initialHeight:s,fitView:c,nodeOrigin:a,nodeExtent:u,children:t})}const vh={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function _h({nodes:t,edges:e,defaultNodes:n,defaultEdges:o,className:r,nodeTypes:i,edgeTypes:s,onNodeClick:c,onEdgeClick:a,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:l,onConnect:h,onConnectStart:g,onConnectEnd:y,onClickConnectStart:E,onClickConnectEnd:x,onNodeMouseEnter:b,onNodeMouseMove:p,onNodeMouseLeave:w,onNodeContextMenu:M,onNodeDoubleClick:I,onNodeDragStart:C,onNodeDrag:z,onNodeDragStop:A,onNodesDelete:P,onEdgesDelete:V,onDelete:L,onSelectionChange:D,onSelectionDragStart:m,onSelectionDrag:S,onSelectionDragStop:v,onSelectionContextMenu:k,onSelectionStart:$,onSelectionEnd:N,onBeforeDelete:H,connectionMode:j,connectionLineType:R=Nt.Bezier,connectionLineStyle:Y,connectionLineComponent:F,connectionLineContainerStyle:X,deleteKeyCode:W="Backspace",selectionKeyCode:B="Shift",selectionOnDrag:q=!1,selectionMode:Z=ce.Full,panActivationKeyCode:J="Space",multiSelectionKeyCode:K=Ve()?"Meta":"Control",zoomActivationKeyCode:G=Ve()?"Meta":"Control",snapToGrid:Q,snapGrid:tt,onlyRenderVisibleElements:rt=!1,selectNodesOnDrag:at,nodesDraggable:nn,nodesConnectable:on,nodesFocusable:rn,nodeOrigin:Ot=Ci,edgesFocusable:sn,edgesReconnectable:Xt,elementsSelectable:Yt=!0,defaultViewport:cn=Zf,minZoom:Wt=.5,maxZoom:qt=2,translateExtent:pe=se,preventScrolling:ns=!0,nodeExtent:an,defaultMarkerColor:os="#b1b1b7",zoomOnScroll:rs=!0,zoomOnPinch:is=!0,panOnScroll:ss=!1,panOnScrollSpeed:cs=.5,panOnScrollMode:as=$t.Free,zoomOnDoubleClick:ls=!0,panOnDrag:us=!0,onPaneClick:fs,onPaneMouseEnter:ds,onPaneMouseMove:hs,onPaneMouseLeave:gs,onPaneScroll:ps,onPaneContextMenu:ms,paneClickDistance:oo=0,nodeClickDistance:ys=0,children:xs,onReconnect:ws,onReconnectStart:vs,onReconnectEnd:_s,onEdgeContextMenu:bs,onEdgeDoubleClick:Es,onEdgeMouseEnter:Ns,onEdgeMouseMove:Ss,onEdgeMouseLeave:Cs,reconnectRadius:ks=10,onNodesChange:Ms,onEdgesChange:$s,noDragClassName:Is="nodrag",noWheelClassName:As="nowheel",noPanClassName:ro="nopan",fitView:io,fitViewOptions:Ts,connectOnClick:Ps,attributionPosition:zs,proOptions:Hs,defaultEdgeOptions:Ds,elevateNodesOnSelect:Ls,elevateEdgesOnSelect:Vs,disableKeyboardA11y:so=!1,autoPanOnConnect:js,autoPanOnNodeDrag:Rs,autoPanSpeed:Bs,connectionRadius:Fs,isValidConnection:Os,onError:Xs,style:Ys,id:co,nodeDragThreshold:Ws,viewport:qs,onViewportChange:Gs,width:Ks,height:Zs,colorMode:Us="light",debug:Qs,onScroll:me,...Js},tc){const ln=co||"1",ec=td(Us),nc=T.useCallback(ao=>{ao.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),me==null||me(ao)},[me]);return _.jsx("div",{"data-testid":"rf__wrapper",...Js,onScroll:nc,style:{...Ys,...vh},ref:tc,className:ot(["react-flow",r,ec]),id:co,children:_.jsxs(wh,{nodes:t,edges:e,width:Ks,height:Zs,fitView:io,nodeOrigin:Ot,nodeExtent:an,children:[_.jsx(mh,{onInit:u,onNodeClick:c,onEdgeClick:a,onNodeMouseEnter:b,onNodeMouseMove:p,onNodeMouseLeave:w,onNodeContextMenu:M,onNodeDoubleClick:I,nodeTypes:i,edgeTypes:s,connectionLineType:R,connectionLineStyle:Y,connectionLineComponent:F,connectionLineContainerStyle:X,selectionKeyCode:B,selectionOnDrag:q,selectionMode:Z,deleteKeyCode:W,multiSelectionKeyCode:K,panActivationKeyCode:J,zoomActivationKeyCode:G,onlyRenderVisibleElements:rt,defaultViewport:cn,translateExtent:pe,minZoom:Wt,maxZoom:qt,preventScrolling:ns,zoomOnScroll:rs,zoomOnPinch:is,zoomOnDoubleClick:ls,panOnScroll:ss,panOnScrollSpeed:cs,panOnScrollMode:as,panOnDrag:us,onPaneClick:fs,onPaneMouseEnter:ds,onPaneMouseMove:hs,onPaneMouseLeave:gs,onPaneScroll:ps,onPaneContextMenu:ms,paneClickDistance:oo,nodeClickDistance:ys,onSelectionContextMenu:k,onSelectionStart:$,onSelectionEnd:N,onReconnect:ws,onReconnectStart:vs,onReconnectEnd:_s,onEdgeContextMenu:bs,onEdgeDoubleClick:Es,onEdgeMouseEnter:Ns,onEdgeMouseMove:Ss,onEdgeMouseLeave:Cs,reconnectRadius:ks,defaultMarkerColor:os,noDragClassName:Is,noWheelClassName:As,noPanClassName:ro,rfId:ln,disableKeyboardA11y:so,nodeExtent:an,viewport:qs,onViewportChange:Gs}),_.jsx(Jf,{nodes:t,edges:e,defaultNodes:n,defaultEdges:o,onConnect:h,onConnectStart:g,onConnectEnd:y,onClickConnectStart:E,onClickConnectEnd:x,nodesDraggable:nn,nodesConnectable:on,nodesFocusable:rn,edgesFocusable:sn,edgesReconnectable:Xt,elementsSelectable:Yt,elevateNodesOnSelect:Ls,elevateEdgesOnSelect:Vs,minZoom:Wt,maxZoom:qt,nodeExtent:an,onNodesChange:Ms,onEdgesChange:$s,snapToGrid:Q,snapGrid:tt,connectionMode:j,translateExtent:pe,connectOnClick:Ps,defaultEdgeOptions:Ds,fitView:io,fitViewOptions:Ts,onNodesDelete:P,onEdgesDelete:V,onDelete:L,onNodeDragStart:C,onNodeDrag:z,onNodeDragStop:A,onSelectionDrag:S,onSelectionDragStart:m,onSelectionDragStop:v,onMove:d,onMoveStart:f,onMoveEnd:l,noPanClassName:ro,nodeOrigin:Ot,rfId:ln,autoPanOnConnect:js,autoPanOnNodeDrag:Rs,autoPanSpeed:Bs,onError:Xs,connectionRadius:Fs,isValidConnection:Os,selectNodesOnDrag:at,nodeDragThreshold:Ws,onBeforeDelete:H,paneClickDistance:oo,debug:Qs}),_.jsx(Kf,{onSelectionChange:D}),xs,_.jsx(Xf,{proOptions:Hs,position:zs}),_.jsx(Ff,{rfId:ln,disableKeyboardA11y:so})]})})}var $g=Ii(_h);const bh=t=>{var e;return(e=t.domNode)==null?void 0:e.querySelector(".react-flow__edgelabel-renderer")};function Ig({children:t}){const e=U(bh);return e?mr.createPortal(t,e):null}function Ag(){const t=et();return T.useCallback(e=>{const{domNode:n,updateNodeInternals:o}=t.getState(),r=Array.isArray(e)?e:[e],i=new Map;r.forEach(s=>{const c=n==null?void 0:n.querySelector(`.react-flow__node[data-id="${s}"]`);c&&i.set(s,{id:s,nodeElement:c,force:!0})}),requestAnimationFrame(()=>o(i,{triggerFitView:!1}))},[])}const Eh=dt.error014();function Tg({id:t,handleType:e,handleId:n,onConnect:o,onDisconnect:r}={}){const i=tn(),s=t??i;if(!s)throw new Error(Eh);const c=T.useRef(null),a=U(u=>u.connectionLookup.get(`${s}${e?n?`-${e}-${n}`:`-${e}`:""}`),Lu);return T.useEffect(()=>{if(c.current&&c.current!==a){const u=a??new Map;$o(c.current,u,r),$o(u,c.current,o)}c.current=a??new Map},[a,o,r]),T.useMemo(()=>Array.from((a==null?void 0:a.values())??[]),[a])}function Nh({dimensions:t,lineWidth:e,variant:n,className:o}){return _.jsx("path",{strokeWidth:e,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:ot(["react-flow__background-pattern",n,o])})}function Sh({radius:t,className:e}){return _.jsx("circle",{cx:t,cy:t,r:t,className:ot(["react-flow__background-pattern","dots",e])})}var St;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(St||(St={}));const Ch={[St.Dots]:1,[St.Lines]:1,[St.Cross]:6},kh=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function Ji({id:t,variant:e=St.Dots,gap:n=20,size:o,lineWidth:r=1,offset:i=0,color:s,bgColor:c,style:a,className:u,patternClassName:d}){const f=T.useRef(null),{transform:l,patternId:h}=U(kh,nt),g=o||Ch[e],y=e===St.Dots,E=e===St.Cross,x=Array.isArray(n)?n:[n,n],b=[x[0]*l[2]||1,x[1]*l[2]||1],p=g*l[2],w=Array.isArray(i)?i:[i,i],M=E?[p,p]:b,I=[w[0]*l[2]||1+M[0]/2,w[1]*l[2]||1+M[1]/2],C=`${h}${t||""}`;return _.jsxs("svg",{className:ot(["react-flow__background",u]),style:{...a,...Je,"--xy-background-color-props":c,"--xy-background-pattern-color-props":s},ref:f,"data-testid":"rf__background",children:[_.jsx("pattern",{id:C,x:l[0]%b[0],y:l[1]%b[1],width:b[0],height:b[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${I[0]},-${I[1]})`,children:y?_.jsx(Sh,{radius:p/2,className:d}):_.jsx(Nh,{dimensions:M,lineWidth:r,variant:e,className:d})}),_.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${C})`})]})}Ji.displayName="Background";const Pg=T.memo(Ji);function Mh(){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:_.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function $h(){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:_.jsx("path",{d:"M0 0h32v4.2H0z"})})}function Ih(){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:_.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Ah(){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:_.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Th(){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:_.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Se({children:t,className:e,...n}){return _.jsx("button",{type:"button",className:ot(["react-flow__controls-button",e]),...n,children:t})}const Ph=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom});function ts({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:o=!0,fitViewOptions:r,onZoomIn:i,onZoomOut:s,onFitView:c,onInteractiveChange:a,className:u,children:d,position:f="bottom-left",orientation:l="vertical","aria-label":h="React Flow controls"}){const g=et(),{isInteractive:y,minZoomReached:E,maxZoomReached:x}=U(Ph,nt),{zoomIn:b,zoomOut:p,fitView:w}=eo(),M=()=>{b(),i==null||i()},I=()=>{p(),s==null||s()},C=()=>{w(r),c==null||c()},z=()=>{g.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),a==null||a(!y)},A=l==="horizontal"?"horizontal":"vertical";return _.jsxs(Qe,{className:ot(["react-flow__controls",A,u]),position:f,style:t,"data-testid":"rf__controls","aria-label":h,children:[e&&_.jsxs(_.Fragment,{children:[_.jsx(Se,{onClick:M,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:x,children:_.jsx(Mh,{})}),_.jsx(Se,{onClick:I,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:E,children:_.jsx($h,{})})]}),n&&_.jsx(Se,{className:"react-flow__controls-fitview",onClick:C,title:"fit view","aria-label":"fit view",children:_.jsx(Ih,{})}),o&&_.jsx(Se,{className:"react-flow__controls-interactive",onClick:z,title:"toggle interactivity","aria-label":"toggle interactivity",children:y?_.jsx(Th,{}):_.jsx(Ah,{})}),d]})}ts.displayName="Controls";const zg=T.memo(ts);function zh({id:t,x:e,y:n,width:o,height:r,style:i,color:s,strokeColor:c,strokeWidth:a,className:u,borderRadius:d,shapeRendering:f,selected:l,onClick:h}){const{background:g,backgroundColor:y}=i||{},E=s||g||y;return _.jsx("rect",{className:ot(["react-flow__minimap-node",{selected:l},u]),x:e,y:n,rx:d,ry:d,width:o,height:r,style:{fill:E,stroke:c,strokeWidth:a},shapeRendering:f,onClick:h?x=>h(x,t):void 0})}const Hh=T.memo(zh),Dh=t=>t.nodes.map(e=>e.id),xn=t=>t instanceof Function?t:()=>t;function Lh({nodeStrokeColor:t,nodeColor:e,nodeClassName:n="",nodeBorderRadius:o=5,nodeStrokeWidth:r,nodeComponent:i=Hh,onClick:s}){const c=U(Dh,nt),a=xn(e),u=xn(t),d=xn(n),f=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return _.jsx(_.Fragment,{children:c.map(l=>_.jsx(jh,{id:l,nodeColorFunc:a,nodeStrokeColorFunc:u,nodeClassNameFunc:d,nodeBorderRadius:o,nodeStrokeWidth:r,NodeComponent:i,onClick:s,shapeRendering:f},l))})}function Vh({id:t,nodeColorFunc:e,nodeStrokeColorFunc:n,nodeClassNameFunc:o,nodeBorderRadius:r,nodeStrokeWidth:i,shapeRendering:s,NodeComponent:c,onClick:a}){const{node:u,x:d,y:f,width:l,height:h}=U(g=>{const y=g.nodeLookup.get(t),{x:E,y:x}=y.internals.positionAbsolute,{width:b,height:p}=vt(y);return{node:y,x:E,y:x,width:b,height:p}},nt);return!u||u.hidden||!ri(u)?null:_.jsx(c,{x:d,y:f,width:l,height:h,style:u.style,selected:!!u.selected,className:o(u),color:e(u),borderRadius:r,strokeColor:n(u),strokeWidth:i,shapeRendering:s,onClick:a,id:u.id})}const jh=T.memo(Vh);var Rh=T.memo(Lh);const Bh=200,Fh=150,Oh=t=>{const e={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:e,boundingRect:t.nodeLookup.size>0?ni(Ft(t.nodeLookup),e):e,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height}},Xh="react-flow__minimap-desc";function es({style:t,className:e,nodeStrokeColor:n,nodeColor:o,nodeClassName:r="",nodeBorderRadius:i=5,nodeStrokeWidth:s,nodeComponent:c,bgColor:a,maskColor:u,maskStrokeColor:d,maskStrokeWidth:f,position:l="bottom-right",onClick:h,onNodeClick:g,pannable:y=!1,zoomable:E=!1,ariaLabel:x="React Flow mini map",inversePan:b,zoomStep:p=10,offsetScale:w=5}){const M=et(),I=T.useRef(null),{boundingRect:C,viewBB:z,rfId:A,panZoom:P,translateExtent:V,flowWidth:L,flowHeight:D}=U(Oh,nt),m=(t==null?void 0:t.width)??Bh,S=(t==null?void 0:t.height)??Fh,v=C.width/m,k=C.height/S,$=Math.max(v,k),N=$*m,H=$*S,j=w*$,R=C.x-(N-C.width)/2-j,Y=C.y-(H-C.height)/2-j,F=N+j*2,X=H+j*2,W=`${Xh}-${A}`,B=T.useRef(0),q=T.useRef();B.current=$,T.useEffect(()=>{if(I.current&&P)return q.current=pf({domNode:I.current,panZoom:P,getTransform:()=>M.getState().transform,getViewScale:()=>B.current}),()=>{var K;(K=q.current)==null||K.destroy()}},[P]),T.useEffect(()=>{var K;(K=q.current)==null||K.update({translateExtent:V,width:L,height:D,inversePan:b,pannable:y,zoomStep:p,zoomable:E})},[y,E,b,p,V,L,D]);const Z=h?K=>{var tt;const[G,Q]=((tt=q.current)==null?void 0:tt.pointer(K))||[0,0];h(K,{x:G,y:Q})}:void 0,J=g?T.useCallback((K,G)=>{const Q=M.getState().nodeLookup.get(G);g(K,Q)},[]):void 0;return _.jsx(Qe,{position:l,style:{...t,"--xy-minimap-background-color-props":typeof a=="string"?a:void 0,"--xy-minimap-mask-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-stroke-width-props":typeof f=="number"?f*$:void 0,"--xy-minimap-node-background-color-props":typeof o=="string"?o:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof s=="string"?s:void 0},className:ot(["react-flow__minimap",e]),"data-testid":"rf__minimap",children:_.jsxs("svg",{width:m,height:S,viewBox:`${R} ${Y} ${F} ${X}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":W,ref:I,onClick:Z,children:[x&&_.jsx("title",{id:W,children:x}),_.jsx(Rh,{onClick:J,nodeColor:o,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:r,nodeStrokeWidth:s,nodeComponent:c}),_.jsx("path",{className:"react-flow__minimap-mask",d:`M${R-j},${Y-j}h${F+j*2}v${X+j*2}h${-F-j*2}z
        M${z.x},${z.y}h${z.width}v${z.height}h${-z.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}es.displayName="MiniMap";T.memo(es);function Yh({nodeId:t,position:e,variant:n=te.Handle,className:o,style:r={},children:i,color:s,minWidth:c=10,minHeight:a=10,maxWidth:u=Number.MAX_VALUE,maxHeight:d=Number.MAX_VALUE,keepAspectRatio:f=!1,shouldResize:l,onResizeStart:h,onResize:g,onResizeEnd:y}){const E=tn(),x=typeof t=="string"?t:E,b=et(),p=T.useRef(null),w=n===te.Line?"right":"bottom-right",M=e??w,I=T.useRef(null);T.useEffect(()=>{if(!(!p.current||!x))return I.current||(I.current=If({domNode:p.current,nodeId:x,getStoreItems:()=>{const{nodeLookup:P,transform:V,snapGrid:L,snapToGrid:D,nodeOrigin:m,domNode:S}=b.getState();return{nodeLookup:P,transform:V,snapGrid:L,snapToGrid:D,nodeOrigin:m,paneDomNode:S}},onChange:(P,V)=>{const{triggerNodeChanges:L,nodeLookup:D,parentLookup:m,nodeOrigin:S}=b.getState(),v=[],k={x:P.x,y:P.y},$=D.get(x);if($&&$.expandParent&&$.parentId){const N=$.origin??S,H=P.width??$.measured.width??0,j=P.height??$.measured.height??0,R={id:$.id,parentId:$.parentId,rect:{width:H,height:j,...ii({x:P.x??$.position.x,y:P.y??$.position.y},{width:H,height:j},$.parentId,D,N)}},Y=to([R],D,m,S);v.push(...Y),k.x=P.x?Math.max(N[0]*H,P.x):void 0,k.y=P.y?Math.max(N[1]*j,P.y):void 0}if(k.x!==void 0&&k.y!==void 0){const N={id:x,type:"position",position:{...k}};v.push(N)}if(P.width!==void 0&&P.height!==void 0){const N={id:x,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:P.width,height:P.height}};v.push(N)}for(const N of V){const H={...N,type:"position"};v.push(H)}L(v)},onEnd:()=>{const P={id:x,type:"dimensions",resizing:!1};b.getState().triggerNodeChanges([P])}})),I.current.update({controlPosition:M,boundaries:{minWidth:c,minHeight:a,maxWidth:u,maxHeight:d},keepAspectRatio:f,onResizeStart:h,onResize:g,onResizeEnd:y,shouldResize:l}),()=>{var P;(P=I.current)==null||P.destroy()}},[M,c,a,u,d,f,h,g,y,l]);const C=M.split("-"),z=n===te.Line?"borderColor":"backgroundColor",A=s?{...r,[z]:s}:r;return _.jsx("div",{className:ot(["react-flow__resize-control","nodrag",...C,n,o]),ref:p,style:A,children:i})}T.memo(Yh);const Wh=t=>{var e;return(e=t.domNode)==null?void 0:e.querySelector(".react-flow__renderer")};function qh({children:t}){const e=U(Wh);return e?mr.createPortal(t,e):null}const Gh=(t,e)=>(t==null?void 0:t.internals.positionAbsolute.x)!==(e==null?void 0:e.internals.positionAbsolute.x)||(t==null?void 0:t.internals.positionAbsolute.y)!==(e==null?void 0:e.internals.positionAbsolute.y)||(t==null?void 0:t.measured.width)!==(e==null?void 0:e.measured.width)||(t==null?void 0:t.measured.height)!==(e==null?void 0:e.measured.height)||(t==null?void 0:t.selected)!==(e==null?void 0:e.selected)||(t==null?void 0:t.internals.z)!==(e==null?void 0:e.internals.z),Kh=(t,e)=>{if(t.size!==e.size)return!1;for(const[n,o]of t)if(Gh(o,e.get(n)))return!1;return!0},Zh=t=>({x:t.transform[0],y:t.transform[1],zoom:t.transform[2],selectedNodesCount:t.nodes.filter(e=>e.selected).length});function Hg({nodeId:t,children:e,className:n,style:o,isVisible:r,position:i=O.Top,offset:s=10,align:c="center",...a}){var M;const u=tn(),d=T.useCallback(I=>(Array.isArray(t)?t:[t||u||""]).reduce((A,P)=>{const V=I.nodeLookup.get(P);return V&&A.set(V.id,V),A},new Map),[t,u]),f=U(d,Kh),{x:l,y:h,zoom:g,selectedNodesCount:y}=U(Zh,nt);if(!(typeof r=="boolean"?r:f.size===1&&((M=f.values().next().value)==null?void 0:M.selected)&&y===1)||!f.size)return null;const x=Ft(f),b=Array.from(f.values()),p=Math.max(...b.map(I=>I.internals.z+1)),w={position:"absolute",transform:tf(x,{x:l,y:h,zoom:g},i,s,c),zIndex:p,...o};return _.jsx(qh,{children:_.jsx("div",{style:w,className:ot(["react-flow__node-toolbar",n]),...a,"data-id":b.reduce((I,C)=>`${I}${C.id} `,"").trim(),children:e})})}const Dg=ic((t,e)=>({nodes:[],edges:[],onNodesChange(n){t({nodes:Mi(n,e().nodes)})},onEdgesChange(n){t({edges:$i(n,e().edges)})},addEdge(n){const r={id:sc(),...n,type:"custom-edge",animated:!1};t({edges:[r,...e().edges]})},addNode(n){const{nodes:o}=e(),r=[...o,n];t({nodes:[...r]})},updateEdges(){t({edges:[...e().edges]})},updateNodes(n){t({nodes:[...n]})},setNodes(n){t({nodes:[...n]})},setEdges(n){t({edges:[...n]})}})),Uh=()=>_.jsx("svg",{width:"25",height:"23",viewBox:"0 0 25 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("path",{d:"M1 12.9738C2 7.47388 2.44298 0.441054 7.5 1.03528C13.745 1.7691 11.2721 21.1074 17.5 21.9739C22.3812 22.653 24.5 10.4739 24.5 10.4739",stroke:"black"})}),Qh=()=>_.jsxs("svg",{width:"38",height:"24",viewBox:"0 0 44 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("rect",{x:"0.25",y:"15.25",width:"14.5",height:"6.5",fill:"white",stroke:"black",strokeWidth:"0.5"}),_.jsx("line",{x1:"15",y1:"18.75",x2:"26",y2:"18.75",stroke:"black",strokeWidth:"0.5"}),_.jsx("path",{d:"M25.75 12.552L32.6181 18.5L25.75 24.448V12.552Z",fill:"white",stroke:"black",strokeWidth:"0.5"}),_.jsx("line",{x1:"33.2",y1:"11",x2:"33.2",y2:"26",stroke:"black",strokeWidth:"0.4"}),_.jsx("path",{d:"M29.8845 3.90568L34.6284 2.91502L34.3726 7.75447L29.8845 3.90568Z",fill:"black",stroke:"black",strokeWidth:"0.5"}),_.jsx("line",{x1:"32.3292",y1:"5.67282",x2:"29.0743",y2:"9.4683",stroke:"black",strokeWidth:"0.5"}),_.jsx("path",{d:"M35.8845 8.90568L40.6284 7.91502L40.3726 12.7545L35.8845 8.90568Z",fill:"black",stroke:"black",strokeWidth:"0.5"}),_.jsx("line",{x1:"38.3292",y1:"10.6728",x2:"35.0743",y2:"14.4683",stroke:"black",strokeWidth:"0.5"})]}),Jh="_input_p0sg5_1",tg="_img_p0sg5_13",eg="_text_p0sg5_27",wn={input:Jh,img:tg,text:eg},vn=({width:t,height:e,text:n,icon:o})=>_.jsxs("div",{className:wn.input,style:{width:t,height:e},children:[o&&_.jsx("div",{className:wn.img,children:o}),_.jsx("div",{className:wn.text,children:n})]}),ng={discreteInput:{view:vn,width:280,height:50,text:"Дискретный вход",icon:_.jsx(Qh,{}),name:"Дискретный вход"},analogInput:{view:vn,width:280,height:50,text:"Аналоговый вход",icon:_.jsx(Uh,{}),name:"Аналоговый вход"},constInt:{view:vn,width:280,height:50,text:"Переменная",name:"Значение переменной типа int"}},og="_logic_gv8ij_1",rg="_inverse_gv8ij_13",ig="_text_gv8ij_43",_n={logic:og,inverse:rg,text:ig},Zt=({width:t,height:e,inverse:n,text:o})=>_.jsx("div",{className:yr(_n.logic,{[_n.inverse]:n}),style:{width:t,height:e},children:_.jsx("div",{className:_n.text,children:o})}),sg={and:{view:Zt,width:100,height:120,text:"&",name:"Логическая и"},xor:{view:Zt,width:100,height:120,text:"=1",name:"Исключающее или"},or:{view:Zt,width:100,height:120,text:"1",name:"Логическая или"},nand:{view:Zt,width:100,height:120,text:"&",name:"Инверсия лог-й и",inverse:!0},nor:{view:Zt,width:100,height:120,text:"1",name:"Инверсия лог-й или",inverse:!0}},bn=({width:t,height:e,text:n})=>_.jsxs("svg",{width:t,height:e,viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("polygon",{points:"0,0 0,100 100,50",stroke:"black",fill:"white",strokeWidth:"2"}),_.jsx("text",{x:"8",y:"30",fontSize:"16",fill:"gray",children:"x"}),_.jsx("text",{x:"8",y:"80",fontSize:"16",fill:"gray",children:"y"}),_.jsx("text",{x:"40",y:"55",fontSize:"18",fill:"black",children:n})]}),cg={equalsInt:{view:bn,width:100,height:100,text:"=",name:"Операция сравнения равно"},moreInt:{view:bn,width:100,height:100,text:">",name:"Операция сравнения больше"},lessInt:{view:bn,width:100,height:100,text:"<",name:"Операция сравнения меньше"}},ag=()=>_.jsx("svg",{width:"25",height:"23",viewBox:"0 0 25 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("path",{d:"M1 12.9738C2 7.47388 2.44298 0.441054 7.5 1.03528C13.745 1.7691 11.2721 21.1074 17.5 21.9739C22.3812 22.653 24.5 10.4739 24.5 10.4739",stroke:"black"})}),lg=()=>_.jsxs("svg",{width:"35",height:"34",viewBox:"0 0 44 38",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("line",{x1:"38.72",y1:"28.5",x2:"44",y2:"28.5",stroke:"black"}),_.jsx("rect",{x:"0.5",y:"10.5",width:"16.6",height:"18",fill:"white",stroke:"black"}),_.jsx("path",{d:"M8.79999 0V10",stroke:"black"}),_.jsx("path",{d:"M8.79999 28V38",stroke:"black"}),_.jsx("line",{x1:"21.12",y1:"28.5",x2:"26.4",y2:"28.5",stroke:"black"}),_.jsx("line",{y1:"-0.5",x2:"14.1698",y2:"-0.5",transform:"matrix(0.869457 -0.494009 0.402739 0.915315 26.4 29)",stroke:"black"})]}),ug="_input_zejc1_1",fg="_img_zejc1_13",dg="_text_zejc1_27",En={input:ug,img:fg,text:dg},hr=({width:t,height:e,text:n,icon:o})=>_.jsxs("div",{className:En.input,style:{width:t,height:e},children:[_.jsx("div",{className:En.text,children:n}),_.jsx("div",{className:En.img,children:o})]}),hg={discreteOutput:{view:hr,width:280,height:50,text:"Дискретный выход",icon:_.jsx(lg,{}),name:"Дискретный выход"},analogOutput:{view:hr,width:280,height:50,text:"Аналоговый выход",icon:_.jsx(ag,{}),name:"Аналоговый выход"}},gg="_algebraic_1fmoa_1",pg="_text_1fmoa_15",gr={algebraic:gg,text:pg},Nn=({width:t,height:e,text:n})=>_.jsx("div",{className:gr.algebraic,style:{width:t,height:e},children:_.jsx("div",{className:gr.text,children:n})}),mg={multInt:{view:Nn,width:100,height:120,text:"×",name:"Операция математического умножения int"},sumInt:{view:Nn,width:100,height:120,text:"+",name:"Операция математического сложения int"},subInt:{view:Nn,width:100,height:120,text:"-",name:"Операция математического вычитания int"}},yg="_timer_1yzv0_1",xg="_line_1yzv0_51",Sn={timer:yg,"sides-lines":"_sides-lines_1yzv0_35",line:xg},wg=({width:t,height:e})=>_.jsxs("div",{className:Sn.timer,style:{width:t,height:e},children:[_.jsx("div",{children:"T"}),_.jsx("div",{children:"DT"}),_.jsx("div",{className:Sn["sides-lines"],children:_.jsx("div",{className:Sn.line})})]}),vg={timerInt:{view:wg,width:100,height:100,name:"Таймер"}},_g="_fourier_1hu6c_1",bg="_text_1hu6c_21",pr={fourier:_g,text:bg},Eg=({width:t,height:e})=>_.jsx("div",{className:yr(pr.fourier),style:{width:t,height:e},children:_.jsx("div",{className:pr.text,children:"F"})}),Ng={fourierInt:{view:Eg,width:100,height:140,name:"Фурье"}},Lg={...ng,...sg,...cg,...hg,...mg,...vg,...Ng},Vg=t=>Object.keys(t);export{en as B,Nt as C,Ig as E,Ng as F,je as H,Hg as N,O as P,xh as R,U as a,Ru as b,ue as c,Tg as d,Ag as e,Lg as f,Vn as g,mg as h,ng as i,cg as j,Dg as k,sg as l,Mg as m,Vg as n,hg as o,Qe as p,kg as q,$g as r,Pg as s,vg as t,eo as u,zg as v};
