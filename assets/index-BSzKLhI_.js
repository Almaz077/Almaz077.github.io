import{g as ls,b as ns,d as is,j as Qt,r as os}from"./index-Be2Hz3rG.js";import{a as rs}from"./useBleStore-DElSP8Wo.js";import{s as ss}from"./shallow-Bm4ufq9Z.js";var fn={exports:{}};const fs=!0,Ae="u-",us="uplot",cs=Ae+"hz",as=Ae+"vt",ps=Ae+"title",hs=Ae+"wrap",ds=Ae+"under",ms=Ae+"over",gs=Ae+"axis",Xt=Ae+"off",ws=Ae+"select",_s=Ae+"cursor-x",Ss=Ae+"cursor-y",vs=Ae+"cursor-pt",ys=Ae+"legend",bs=Ae+"live",xs=Ae+"inline",ks=Ae+"series",Ms=Ae+"marker",Zi=Ae+"label",Es=Ae+"value",Gl="width",Ul="height",Wl="top",Qi="bottom",bl="left",In="right",si="#000",Xi=si+"0",Bn="mousemove",eo="mousedown",Yn="mouseup",to="mouseenter",lo="mouseleave",no="dblclick",Ts="resize",Ds="scroll",io="change",cn="dppxchange",fi="--",Al=typeof window<"u",Zn=Al?document:null,kl=Al?window:null,As=Al?navigator:null;let re,on;function Qn(){let e=devicePixelRatio;re!=e&&(re=e,on&&ei(io,on,Qn),on=matchMedia(`(min-resolution: ${re-.001}dppx) and (max-resolution: ${re+.001}dppx)`),el(io,on,Qn),kl.dispatchEvent(new CustomEvent(cn)))}function et(e,l){if(l!=null){let o=e.classList;!o.contains(l)&&o.add(l)}}function Xn(e,l){let o=e.classList;o.contains(l)&&o.remove(l)}function ge(e,l,o){e.style[l]=o+"px"}function gt(e,l,o,n){let r=Zn.createElement(e);return l!=null&&et(r,l),o!=null&&o.insertBefore(r,n),r}function ut(e,l){return gt("div",e,l)}const oo=new WeakMap;function Et(e,l,o,n,r){let c="translate("+l+"px,"+o+"px)",u=oo.get(e);c!=u&&(e.style.transform=c,oo.set(e,c),l<0||o<0||l>n||o>r?et(e,Xt):Xn(e,Xt))}const ro=new WeakMap;function so(e,l,o){let n=l+o,r=ro.get(e);n!=r&&(ro.set(e,n),e.style.background=l,e.style.borderColor=o)}const fo=new WeakMap;function uo(e,l,o,n){let r=l+""+o,c=fo.get(e);r!=c&&(fo.set(e,r),e.style.height=o+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-o/2+"px":0)}const ui={passive:!0},Ps={...ui,capture:!0};function el(e,l,o,n){l.addEventListener(e,o,n?Ps:ui)}function ei(e,l,o,n){l.removeEventListener(e,o,ui)}Al&&Qn();function wt(e,l,o,n){let r;o=o||0,n=n||l.length-1;let c=n<=2147483647;for(;n-o>1;)r=c?o+n>>1:tt((o+n)/2),l[r]<e?o=r:n=r;return e-l[o]<=l[n]-e?o:n}function Wo(e){return(o,n,r)=>{let c=-1,u=-1;for(let d=n;d<=r;d++)if(e(o[d])){c=d;break}for(let d=r;d>=n;d--)if(e(o[d])){u=d;break}return[c,u]}}const jo=e=>e!=null,Go=e=>e!=null&&e>0,hn=Wo(jo),Ls=Wo(Go);function Rs(e,l,o,n=0,r=!1){let c=r?Ls:hn,u=r?Go:jo;[l,o]=c(e,l,o);let d=e[l],p=e[l];if(l>-1)if(n==1)d=e[l],p=e[o];else if(n==-1)d=e[o],p=e[l];else for(let h=l;h<=o;h++){let S=e[h];u(S)&&(S<d?d=S:S>p&&(p=S))}return[d??ce,p??-ce]}function dn(e,l,o,n){let r=po(e),c=po(l);e==l&&(r==-1?(e*=o,l/=o):(e/=o,l*=o));let u=o==10?Pt:Uo,d=r==1?tt:ct,p=c==1?ct:tt,h=d(u(De(e))),S=p(u(De(l))),g=Ml(o,h),w=Ml(o,S);return o==10&&(h<0&&(g=ae(g,-h)),S<0&&(w=ae(w,-S))),n||o==2?(e=g*r,l=w*c):(e=Ko(e,g),l=mn(l,w)),[e,l]}function ci(e,l,o,n){let r=dn(e,l,o,n);return e==0&&(r[0]=0),l==0&&(r[1]=0),r}const ai=.1,co={mode:3,pad:ai},Bl={pad:0,soft:null,mode:0},Cs={min:Bl,max:Bl};function an(e,l,o,n){return gn(o)?ao(e,l,o):(Bl.pad=o,Bl.soft=n?0:null,Bl.mode=n?3:0,ao(e,l,Cs))}function ie(e,l){return e??l}function Os(e,l,o){for(l=ie(l,0),o=ie(o,e.length-1);l<=o;){if(e[l]!=null)return!0;l++}return!1}function ao(e,l,o){let n=o.min,r=o.max,c=ie(n.pad,0),u=ie(r.pad,0),d=ie(n.hard,-ce),p=ie(r.hard,ce),h=ie(n.soft,ce),S=ie(r.soft,-ce),g=ie(n.mode,0),w=ie(r.mode,0),C=l-e,x=Pt(C),E=Be(De(e),De(l)),T=Pt(E),L=De(T-x);(C<1e-24||L>10)&&(C=0,(e==0||l==0)&&(C=1e-24,g==2&&h!=ce&&(c=0),w==2&&S!=-ce&&(u=0)));let v=C||E||1e3,V=Pt(v),k=Ml(10,tt(V)),Y=v*(C==0?e==0?.1:1:c),P=ae(Ko(e-Y,k/10),24),j=e>=h&&(g==1||g==3&&P<=h||g==2&&P>=h)?h:ce,I=Be(d,P<j&&e>=j?j:_t(j,P)),$=v*(C==0?l==0?.1:1:u),U=ae(mn(l+$,k/10),24),M=l<=S&&(w==1||w==3&&U>=S||w==2&&U<=S)?S:-ce,J=_t(p,U>M&&l<=M?M:Be(M,U));return I==J&&I==0&&(J=100),[I,J]}const Vs=new Intl.NumberFormat(Al?As.language:"en-US"),pi=e=>Vs.format(e),lt=Math,un=lt.PI,De=lt.abs,tt=lt.floor,Te=lt.round,ct=lt.ceil,_t=lt.min,Be=lt.max,Ml=lt.pow,po=lt.sign,Pt=lt.log10,Uo=lt.log2,zs=(e,l=1)=>lt.sinh(e)*l,Kn=(e,l=1)=>lt.asinh(e/l),ce=1/0;function ho(e){return(Pt((e^e>>31)-(e>>31))|0)+1}function ti(e,l,o){return _t(Be(e,l),o)}function Io(e){return typeof e=="function"}function ee(e){return Io(e)?e:()=>e}const Fs=()=>{},Bo=e=>e,Yo=(e,l)=>l,Ns=e=>null,mo=e=>!0,go=(e,l)=>e==l,Hs=/\.\d*?(?=9{6,}|0{6,})/gm,tl=e=>{if($o(e)||Ht.has(e))return e;const l=`${e}`,o=l.match(Hs);if(o==null)return e;let n=o[0].length-1;if(l.indexOf("e-")!=-1){let[r,c]=l.split("e");return+`${tl(r)}e${c}`}return ae(e,n)};function Jt(e,l){return tl(ae(tl(e/l))*l)}function mn(e,l){return tl(ct(tl(e/l))*l)}function Ko(e,l){return tl(tt(tl(e/l))*l)}function ae(e,l=0){if($o(e))return e;let o=10**l,n=e*o*(1+Number.EPSILON);return Te(n)/o}const Ht=new Map;function qo(e){return((""+e).split(".")[1]||"").length}function Kl(e,l,o,n){let r=[],c=n.map(qo);for(let u=l;u<o;u++){let d=De(u),p=ae(Ml(e,u),d);for(let h=0;h<n.length;h++){let S=e==10?+`${n[h]}e${u}`:n[h]*p,g=(u>=0?0:d)+(u>=c[h]?0:c[h]),w=e==10?S:ae(S,g);r.push(w),Ht.set(w,g)}}return r}const Yl={},hi=[],El=[null,null],Nt=Array.isArray,$o=Number.isInteger,Ws=e=>e===void 0;function wo(e){return typeof e=="string"}function gn(e){let l=!1;if(e!=null){let o=e.constructor;l=o==null||o==Object}return l}function js(e){return e!=null&&typeof e=="object"}const Gs=Object.getPrototypeOf(Uint8Array),Jo="__proto__";function Tl(e,l=gn){let o;if(Nt(e)){let n=e.find(r=>r!=null);if(Nt(n)||l(n)){o=Array(e.length);for(let r=0;r<e.length;r++)o[r]=Tl(e[r],l)}else o=e.slice()}else if(e instanceof Gs)o=e.slice();else if(l(e)){o={};for(let n in e)n!=Jo&&(o[n]=Tl(e[n],l))}else o=e;return o}function ke(e){let l=arguments;for(let o=1;o<l.length;o++){let n=l[o];for(let r in n)r!=Jo&&(gn(e[r])?ke(e[r],Tl(n[r])):e[r]=Tl(n[r]))}return e}const Us=0,Is=1,Bs=2;function Ys(e,l,o){for(let n=0,r,c=-1;n<l.length;n++){let u=l[n];if(u>c){for(r=u-1;r>=0&&e[r]==null;)e[r--]=null;for(r=u+1;r<o&&e[r]==null;)e[c=r++]=null}}}function Ks(e,l){if(Js(e)){let u=e[0].slice();for(let d=1;d<e.length;d++)u.push(...e[d].slice(1));return Zs(u[0])||(u=$s(u)),u}let o=new Set;for(let u=0;u<e.length;u++){let p=e[u][0],h=p.length;for(let S=0;S<h;S++)o.add(p[S])}let n=[Array.from(o).sort((u,d)=>u-d)],r=n[0].length,c=new Map;for(let u=0;u<r;u++)c.set(n[0][u],u);for(let u=0;u<e.length;u++){let d=e[u],p=d[0];for(let h=1;h<d.length;h++){let S=d[h],g=Array(r).fill(void 0),w=l?l[u][h]:Is,C=[];for(let x=0;x<S.length;x++){let E=S[x],T=c.get(p[x]);E===null?w!=Us&&(g[T]=E,w==Bs&&C.push(T)):g[T]=E}Ys(g,C,r),n.push(g)}}return n}const qs=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask;function $s(e){let l=e[0],o=l.length,n=Array(o);for(let c=0;c<n.length;c++)n[c]=c;n.sort((c,u)=>l[c]-l[u]);let r=[];for(let c=0;c<e.length;c++){let u=e[c],d=Array(o);for(let p=0;p<o;p++)d[p]=u[n[p]];r.push(d)}return r}function Js(e){let l=e[0][0],o=l.length;for(let n=1;n<e.length;n++){let r=e[n][0];if(r.length!=o)return!1;if(r!=l){for(let c=0;c<o;c++)if(r[c]!=l[c])return!1}}return!0}function Zs(e,l=100){const o=e.length;if(o<=1)return!0;let n=0,r=o-1;for(;n<=r&&e[n]==null;)n++;for(;r>=n&&e[r]==null;)r--;if(r<=n)return!0;const c=Be(1,tt((r-n+1)/l));for(let u=e[n],d=n+c;d<=r;d+=c){const p=e[d];if(p!=null){if(p<=u)return!1;u=p}}return!0}const Zo=["January","February","March","April","May","June","July","August","September","October","November","December"],Qo=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Xo(e){return e.slice(0,3)}const Qs=Qo.map(Xo),Xs=Zo.map(Xo),ef={MMMM:Zo,MMM:Xs,WWWW:Qo,WWW:Qs};function jl(e){return(e<10?"0":"")+e}function tf(e){return(e<10?"00":e<100?"0":"")+e}const lf={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>jl(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>jl(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>jl(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return l==0?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>jl(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>jl(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>tf(e.getMilliseconds())};function di(e,l){l=l||ef;let o=[],n=/\{([a-z]+)\}|[^{]+/gi,r;for(;r=n.exec(e);)o.push(r[0][0]=="{"?lf[r[1]]:r[0]);return c=>{let u="";for(let d=0;d<o.length;d++)u+=typeof o[d]=="string"?o[d]:o[d](c,l);return u}}const nf=new Intl.DateTimeFormat().resolvedOptions().timeZone;function of(e,l){let o;return l=="UTC"||l=="Etc/UTC"?o=new Date(+e+e.getTimezoneOffset()*6e4):l==nf?o=e:(o=new Date(e.toLocaleString("en-US",{timeZone:l})),o.setMilliseconds(e.getMilliseconds())),o}const er=e=>e%1==0,pn=[1,2,2.5,5],rf=Kl(10,-32,0,pn),tr=Kl(10,0,32,pn),sf=tr.filter(er),Zt=rf.concat(tr),mi=`
`,lr="{YYYY}",_o=mi+lr,nr="{M}/{D}",Il=mi+nr,rn=Il+"/{YY}",ir="{aa}",ff="{h}:{mm}",xl=ff+ir,So=mi+xl,vo=":{ss}",se=null;function or(e){let l=e*1e3,o=l*60,n=o*60,r=n*24,c=r*30,u=r*365,p=(e==1?Kl(10,0,3,pn).filter(er):Kl(10,-3,0,pn)).concat([l,l*5,l*10,l*15,l*30,o,o*5,o*10,o*15,o*30,n,n*2,n*3,n*4,n*6,n*8,n*12,r,r*2,r*3,r*4,r*5,r*6,r*7,r*8,r*9,r*10,r*15,c,c*2,c*3,c*4,c*6,u,u*2,u*5,u*10,u*25,u*50,u*100]);const h=[[u,lr,se,se,se,se,se,se,1],[r*28,"{MMM}",_o,se,se,se,se,se,1],[r,nr,_o,se,se,se,se,se,1],[n,"{h}"+ir,rn,se,Il,se,se,se,1],[o,xl,rn,se,Il,se,se,se,1],[l,vo,rn+" "+xl,se,Il+" "+xl,se,So,se,1],[e,vo+".{fff}",rn+" "+xl,se,Il+" "+xl,se,So,se,1]];function S(g){return(w,C,x,E,T,L)=>{let v=[],V=T>=u,k=T>=c&&T<u,Y=g(x),P=ae(Y*e,3),j=qn(Y.getFullYear(),V?0:Y.getMonth(),k||V?1:Y.getDate()),I=ae(j*e,3);if(k||V){let $=k?T/c:0,U=V?T/u:0,M=P==I?P:ae(qn(j.getFullYear()+U,j.getMonth()+$,1)*e,3),J=new Date(Te(M/e)),N=J.getFullYear(),G=J.getMonth();for(let z=0;M<=E;z++){let K=qn(N+U*z,G+$*z,1),F=K-g(ae(K*e,3));M=ae((+K+F)*e,3),M<=E&&v.push(M)}}else{let $=T>=r?r:T,U=tt(x)-tt(P),M=I+U+mn(P-I,$);v.push(M);let J=g(M),N=J.getHours()+J.getMinutes()/o+J.getSeconds()/n,G=T/n,z=w.axes[C]._space,K=L/z;for(;M=ae(M+T,e==1?0:3),!(M>E);)if(G>1){let F=tt(ae(N+G,6))%24,te=g(M).getHours()-F;te>1&&(te=-1),M-=te*n,N=(N+G)%24;let fe=v[v.length-1];ae((M-fe)/T,3)*K>=.7&&v.push(M)}else v.push(M)}return v}}return[p,h,S]}const[uf,cf,af]=or(1),[pf,hf,df]=or(.001);Kl(2,-53,53,[1]);function yo(e,l){return e.map(o=>o.map((n,r)=>r==0||r==8||n==null?n:l(r==1||o[8]==0?n:o[1]+n)))}function bo(e,l){return(o,n,r,c,u)=>{let d=l.find(x=>u>=x[0])||l[l.length-1],p,h,S,g,w,C;return n.map(x=>{let E=e(x),T=E.getFullYear(),L=E.getMonth(),v=E.getDate(),V=E.getHours(),k=E.getMinutes(),Y=E.getSeconds(),P=T!=p&&d[2]||L!=h&&d[3]||v!=S&&d[4]||V!=g&&d[5]||k!=w&&d[6]||Y!=C&&d[7]||d[1];return p=T,h=L,S=v,g=V,w=k,C=Y,P(E)})}}function mf(e,l){let o=di(l);return(n,r,c,u,d)=>r.map(p=>o(e(p)))}function qn(e,l,o){return new Date(e,l,o)}function xo(e,l){return l(e)}const gf="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function ko(e,l){return(o,n,r,c)=>c==null?fi:l(e(n))}function wf(e,l){let o=e.series[l];return o.width?o.stroke(e,l):o.points.width?o.points.stroke(e,l):null}function _f(e,l){return e.series[l].fill(e,l)}const Sf={show:!0,live:!0,isolate:!1,mount:Fs,markers:{show:!0,width:2,stroke:wf,fill:_f,dash:"solid"},idx:null,idxs:null,values:[]};function vf(e,l){let o=e.cursor.points,n=ut(),r=o.size(e,l);ge(n,Gl,r),ge(n,Ul,r);let c=r/-2;ge(n,"marginLeft",c),ge(n,"marginTop",c);let u=o.width(e,l,r);return u&&ge(n,"borderWidth",u),n}function yf(e,l){let o=e.series[l].points;return o._fill||o._stroke}function bf(e,l){let o=e.series[l].points;return o._stroke||o._fill}function xf(e,l){return e.series[l].points.size}const $n=[0,0];function kf(e,l,o){return $n[0]=l,$n[1]=o,$n}function sn(e,l,o,n=!0){return r=>{r.button==0&&(!n||r.target==l)&&o(r)}}function Jn(e,l,o,n=!0){return r=>{(!n||r.target==l)&&o(r)}}const Mf={show:!0,x:!0,y:!0,lock:!1,move:kf,points:{one:!1,show:vf,size:xf,width:0,stroke:bf,fill:yf},bind:{mousedown:sn,mouseup:sn,click:sn,dblclick:sn,mousemove:Jn,mouseleave:Jn,mouseenter:Jn},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,l)=>{l.stopPropagation(),l.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,l,o,n,r)=>n-r,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},rr={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},gi=ke({},rr,{filter:Yo}),sr=ke({},gi,{size:10}),fr=ke({},rr,{show:!1}),wi='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',ur="bold "+wi,cr=1.5,Mo={show:!0,scale:"x",stroke:si,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:ur,side:2,grid:gi,ticks:sr,border:fr,font:wi,lineGap:cr,rotate:0},Ef="Value",Tf="Time",Eo={show:!0,scale:"x",auto:!1,sorted:1,min:ce,max:-ce,idxs:[]};function Df(e,l,o,n,r){return l.map(c=>c==null?"":pi(c))}function Af(e,l,o,n,r,c,u){let d=[],p=Ht.get(r)||0;o=u?o:ae(mn(o,r),p);for(let h=o;h<=n;h=ae(h+r,p))d.push(Object.is(h,-0)?0:h);return d}function li(e,l,o,n,r,c,u){const d=[],p=e.scales[e.axes[l].scale].log,h=p==10?Pt:Uo,S=tt(h(o));r=Ml(p,S),p==10&&(r=Zt[wt(r,Zt)]);let g=o,w=r*p;p==10&&(w=Zt[wt(w,Zt)]);do d.push(g),g=g+r,p==10&&!Ht.has(g)&&(g=ae(g,Ht.get(r))),g>=w&&(r=g,w=r*p,p==10&&(w=Zt[wt(w,Zt)]));while(g<=n);return d}function Pf(e,l,o,n,r,c,u){let p=e.scales[e.axes[l].scale].asinh,h=n>p?li(e,l,Be(p,o),n,r):[p],S=n>=0&&o<=0?[0]:[];return(o<-p?li(e,l,Be(p,-n),-o,r):[p]).reverse().map(w=>-w).concat(S,h)}const ar=/./,Lf=/[12357]/,Rf=/[125]/,To=/1/,ni=(e,l,o,n)=>e.map((r,c)=>l==4&&r==0||c%n==0&&o.test(r.toExponential()[r<0?1:0])?r:null);function Cf(e,l,o,n,r){let c=e.axes[o],u=c.scale,d=e.scales[u],p=e.valToPos,h=c._space,S=p(10,u),g=p(9,u)-S>=h?ar:p(7,u)-S>=h?Lf:p(5,u)-S>=h?Rf:To;if(g==To){let w=De(p(1,u)-S);if(w<h)return ni(l.slice().reverse(),d.distr,g,ct(h/w)).reverse()}return ni(l,d.distr,g,1)}function Of(e,l,o,n,r){let c=e.axes[o],u=c.scale,d=c._space,p=e.valToPos,h=De(p(1,u)-p(2,u));return h<d?ni(l.slice().reverse(),3,ar,ct(d/h)).reverse():l}function Vf(e,l,o,n){return n==null?fi:l==null?"":pi(l)}const Do={show:!0,scale:"y",stroke:si,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:ur,side:3,grid:gi,ticks:sr,border:fr,font:wi,lineGap:cr,rotate:0};function zf(e,l){let o=3+(e||1)*2;return ae(o*l,3)}function Ff(e,l){let{scale:o,idxs:n}=e.series[0],r=e._data[0],c=e.valToPos(r[n[0]],o,!0),u=e.valToPos(r[n[1]],o,!0),d=De(u-c),p=e.series[l],h=d/(p.points.space*re);return n[1]-n[0]<=h}const Ao={scale:null,auto:!0,sorted:0,min:ce,max:-ce},pr=(e,l,o,n,r)=>r,Po={show:!0,auto:!0,sorted:0,gaps:pr,alpha:1,facets:[ke({},Ao,{scale:"x"}),ke({},Ao,{scale:"y"})]},Lo={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:pr,alpha:1,points:{show:Ff,filter:null},values:null,min:ce,max:-ce,idxs:[],path:null,clip:null};function Nf(e,l,o,n,r){return o/10}const hr={time:fs,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},Hf=ke({},hr,{time:!1,ori:1}),Ro={};function dr(e,l){let o=Ro[e];return o||(o={key:e,plots:[],sub(n){o.plots.push(n)},unsub(n){o.plots=o.plots.filter(r=>r!=n)},pub(n,r,c,u,d,p,h){for(let S=0;S<o.plots.length;S++)o.plots[S]!=r&&o.plots[S].pub(n,r,c,u,d,p,h)}},e!=null&&(Ro[e]=o)),o}const Dl=1,ii=2;function ll(e,l,o){const n=e.mode,r=e.series[l],c=n==2?e._data[l]:e._data,u=e.scales,d=e.bbox;let p=c[0],h=n==2?c[1]:c[l],S=n==2?u[r.facets[0].scale]:u[e.series[0].scale],g=n==2?u[r.facets[1].scale]:u[r.scale],w=d.left,C=d.top,x=d.width,E=d.height,T=e.valToPosH,L=e.valToPosV;return S.ori==0?o(r,p,h,S,g,T,L,w,C,x,E,_n,Pl,vn,gr,_r):o(r,p,h,S,g,L,T,C,w,E,x,Sn,Ll,vi,wr,Sr)}function _i(e,l){let o=0,n=0,r=ie(e.bands,hi);for(let c=0;c<r.length;c++){let u=r[c];u.series[0]==l?o=u.dir:u.series[1]==l&&(u.dir==1?n|=1:n|=2)}return[o,n==1?-1:n==2?1:n==3?2:0]}function Wf(e,l,o,n,r){let c=e.mode,u=e.series[l],d=c==2?u.facets[1].scale:u.scale,p=e.scales[d];return r==-1?p.min:r==1?p.max:p.distr==3?p.dir==1?p.min:p.max:0}function Lt(e,l,o,n,r,c){return ll(e,l,(u,d,p,h,S,g,w,C,x,E,T)=>{let L=u.pxRound;const v=h.dir*(h.ori==0?1:-1),V=h.ori==0?Pl:Ll;let k,Y;v==1?(k=o,Y=n):(k=n,Y=o);let P=L(g(d[k],h,E,C)),j=L(w(p[k],S,T,x)),I=L(g(d[Y],h,E,C)),$=L(w(c==1?S.max:S.min,S,T,x)),U=new Path2D(r);return V(U,I,$),V(U,P,$),V(U,P,j),U})}function wn(e,l,o,n,r,c){let u=null;if(e.length>0){u=new Path2D;const d=l==0?vn:vi;let p=o;for(let g=0;g<e.length;g++){let w=e[g];if(w[1]>w[0]){let C=w[0]-p;C>0&&d(u,p,n,C,n+c),p=w[1]}}let h=o+r-p,S=10;h>0&&d(u,p,n-S/2,h,n+c+S)}return u}function jf(e,l,o){let n=e[e.length-1];n&&n[0]==l?n[1]=o:e.push([l,o])}function Si(e,l,o,n,r,c,u){let d=[],p=e.length;for(let h=r==1?o:n;h>=o&&h<=n;h+=r)if(l[h]===null){let g=h,w=h;if(r==1)for(;++h<=n&&l[h]===null;)w=h;else for(;--h>=o&&l[h]===null;)w=h;let C=c(e[g]),x=w==g?C:c(e[w]),E=g-r;C=u<=0&&E>=0&&E<p?c(e[E]):C;let L=w+r;x=u>=0&&L>=0&&L<p?c(e[L]):x,x>=C&&d.push([C,x])}return d}function Co(e){return e==0?Bo:e==1?Te:l=>Jt(l,e)}function mr(e){let l=e==0?_n:Sn,o=e==0?(r,c,u,d,p,h)=>{r.arcTo(c,u,d,p,h)}:(r,c,u,d,p,h)=>{r.arcTo(u,c,p,d,h)},n=e==0?(r,c,u,d,p)=>{r.rect(c,u,d,p)}:(r,c,u,d,p)=>{r.rect(u,c,p,d)};return(r,c,u,d,p,h=0,S=0)=>{h==0&&S==0?n(r,c,u,d,p):(h=_t(h,d/2,p/2),S=_t(S,d/2,p/2),l(r,c+h,u),o(r,c+d,u,c+d,u+p,h),o(r,c+d,u+p,c,u+p,S),o(r,c,u+p,c,u,S),o(r,c,u,c+d,u,h),r.closePath())}}const _n=(e,l,o)=>{e.moveTo(l,o)},Sn=(e,l,o)=>{e.moveTo(o,l)},Pl=(e,l,o)=>{e.lineTo(l,o)},Ll=(e,l,o)=>{e.lineTo(o,l)},vn=mr(0),vi=mr(1),gr=(e,l,o,n,r,c)=>{e.arc(l,o,n,r,c)},wr=(e,l,o,n,r,c)=>{e.arc(o,l,n,r,c)},_r=(e,l,o,n,r,c,u)=>{e.bezierCurveTo(l,o,n,r,c,u)},Sr=(e,l,o,n,r,c,u)=>{e.bezierCurveTo(o,l,r,n,u,c)};function vr(e){return(l,o,n,r,c)=>ll(l,o,(u,d,p,h,S,g,w,C,x,E,T)=>{let{pxRound:L,points:v}=u,V,k;h.ori==0?(V=_n,k=gr):(V=Sn,k=wr);const Y=ae(v.width*re,3);let P=(v.size-v.width)/2*re,j=ae(P*2,3),I=new Path2D,$=new Path2D,{left:U,top:M,width:J,height:N}=l.bbox;vn($,U-j,M-j,J+j*2,N+j*2);const G=z=>{if(p[z]!=null){let K=L(g(d[z],h,E,C)),F=L(w(p[z],S,T,x));V(I,K+P,F),k(I,K,F,P,0,un*2)}};if(c)c.forEach(G);else for(let z=n;z<=r;z++)G(z);return{stroke:Y>0?I:null,fill:I,clip:$,flags:Dl|ii}})}function yr(e){return(l,o,n,r,c,u)=>{n!=r&&(c!=n&&u!=n&&e(l,o,n),c!=r&&u!=r&&e(l,o,r),e(l,o,u))}}const Gf=yr(Pl),Uf=yr(Ll);function br(e){const l=ie(e==null?void 0:e.alignGaps,0);return(o,n,r,c)=>ll(o,n,(u,d,p,h,S,g,w,C,x,E,T)=>{[r,c]=hn(p,r,c);let L=u.pxRound,v=N=>L(g(N,h,E,C)),V=N=>L(w(N,S,T,x)),k,Y;h.ori==0?(k=Pl,Y=Gf):(k=Ll,Y=Uf);const P=h.dir*(h.ori==0?1:-1),j={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Dl},I=j.stroke;let $=!1;if(c-r>=E*4){let N=H=>o.posToVal(H,h.key,!0),G=null,z=null,K,F,Ye,we=v(d[P==1?r:c]),te=v(d[r]),fe=v(d[c]),Q=N(P==1?te+1:fe-1);for(let H=P==1?r:c;H>=r&&H<=c;H+=P){let Me=d[H],_e=(P==1?Me<Q:Me>Q)?we:v(Me),le=p[H];_e==we?le!=null?(F=le,G==null?(k(I,_e,V(F)),K=G=z=F):F<G?G=F:F>z&&(z=F)):le===null&&($=!0):(G!=null&&Y(I,we,V(G),V(z),V(K),V(F)),le!=null?(F=le,k(I,_e,V(F)),G=z=K=F):(G=z=null,le===null&&($=!0)),we=_e,Q=N(we+P))}G!=null&&G!=z&&Ye!=we&&Y(I,we,V(G),V(z),V(K),V(F))}else for(let N=P==1?r:c;N>=r&&N<=c;N+=P){let G=p[N];G===null?$=!0:G!=null&&k(I,v(d[N]),V(G))}let[M,J]=_i(o,n);if(u.fill!=null||M!=0){let N=j.fill=new Path2D(I),G=u.fillTo(o,n,u.min,u.max,M),z=V(G),K=v(d[r]),F=v(d[c]);P==-1&&([F,K]=[K,F]),k(N,F,z),k(N,K,z)}if(!u.spanGaps){let N=[];$&&N.push(...Si(d,p,r,c,P,v,l)),j.gaps=N=u.gaps(o,n,r,c,N),j.clip=wn(N,h.ori,C,x,E,T)}return J!=0&&(j.band=J==2?[Lt(o,n,r,c,I,-1),Lt(o,n,r,c,I,1)]:Lt(o,n,r,c,I,J)),j})}function If(e){const l=ie(e.align,1),o=ie(e.ascDesc,!1),n=ie(e.alignGaps,0),r=ie(e.extend,!1);return(c,u,d,p)=>ll(c,u,(h,S,g,w,C,x,E,T,L,v,V)=>{[d,p]=hn(g,d,p);let k=h.pxRound,{left:Y,width:P}=c.bbox,j=te=>k(x(te,w,v,T)),I=te=>k(E(te,C,V,L)),$=w.ori==0?Pl:Ll;const U={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Dl},M=U.stroke,J=w.dir*(w.ori==0?1:-1);let N=I(g[J==1?d:p]),G=j(S[J==1?d:p]),z=G,K=G;r&&l==-1&&(K=Y,$(M,K,N)),$(M,G,N);for(let te=J==1?d:p;te>=d&&te<=p;te+=J){let fe=g[te];if(fe==null)continue;let Q=j(S[te]),H=I(fe);l==1?$(M,Q,N):$(M,z,H),$(M,Q,H),N=H,z=Q}let F=z;r&&l==1&&(F=Y+P,$(M,F,N));let[Ye,we]=_i(c,u);if(h.fill!=null||Ye!=0){let te=U.fill=new Path2D(M),fe=h.fillTo(c,u,h.min,h.max,Ye),Q=I(fe);$(te,F,Q),$(te,K,Q)}if(!h.spanGaps){let te=[];te.push(...Si(S,g,d,p,J,j,n));let fe=h.width*re/2,Q=o||l==1?fe:-fe,H=o||l==-1?-fe:fe;te.forEach(Me=>{Me[0]+=Q,Me[1]+=H}),U.gaps=te=h.gaps(c,u,d,p,te),U.clip=wn(te,w.ori,T,L,v,V)}return we!=0&&(U.band=we==2?[Lt(c,u,d,p,M,-1),Lt(c,u,d,p,M,1)]:Lt(c,u,d,p,M,we)),U})}function Oo(e,l,o,n,r,c,u=ce){if(e.length>1){let d=null;for(let p=0,h=1/0;p<e.length;p++)if(l[p]!==void 0){if(d!=null){let S=De(e[p]-e[d]);S<h&&(h=S,u=De(o(e[p],n,r,c)-o(e[d],n,r,c)))}d=p}}return u}function Bf(e){e=e||Yl;const l=ie(e.size,[.6,ce,1]),o=e.align||0,n=e.gap||0;let r=e.radius;r=r==null?[0,0]:typeof r=="number"?[r,0]:r;const c=ee(r),u=1-l[0],d=ie(l[1],ce),p=ie(l[2],1),h=ie(e.disp,Yl),S=ie(e.each,C=>{}),{fill:g,stroke:w}=h;return(C,x,E,T)=>ll(C,x,(L,v,V,k,Y,P,j,I,$,U,M)=>{let J=L.pxRound,N=o,G=n*re,z=d*re,K=p*re,F,Ye;k.ori==0?[F,Ye]=c(C,x):[Ye,F]=c(C,x);const we=k.dir*(k.ori==0?1:-1);let te=k.ori==0?vn:vi,fe=k.ori==0?S:(R,pe,Ee,rl,Gt,vt,Ut)=>{S(R,pe,Ee,Gt,rl,Ut,vt)},Q=ie(C.bands,hi).find(R=>R.series[0]==x),H=Q!=null?Q.dir:0,Me=L.fillTo(C,x,L.min,L.max,H),We=J(j(Me,Y,M,$)),_e,le,at,$e=U,ve=J(L.width*re),St=!1,Tt=null,nt=null,Rt=null,nl=null;g!=null&&(ve==0||w!=null)&&(St=!0,Tt=g.values(C,x,E,T),nt=new Map,new Set(Tt).forEach(R=>{R!=null&&nt.set(R,new Path2D)}),ve>0&&(Rt=w.values(C,x,E,T),nl=new Map,new Set(Rt).forEach(R=>{R!=null&&nl.set(R,new Path2D)})));let{x0:il,size:Rl}=h;if(il!=null&&Rl!=null){N=1,v=il.values(C,x,E,T),il.unit==2&&(v=v.map(Ee=>C.posToVal(I+Ee*U,k.key,!0)));let R=Rl.values(C,x,E,T);Rl.unit==2?le=R[0]*U:le=P(R[0],k,U,I)-P(0,k,U,I),$e=Oo(v,V,P,k,U,I,$e),at=$e-le+G}else $e=Oo(v,V,P,k,U,I,$e),at=$e*u+G,le=$e-at;at<1&&(at=0),ve>=le/2&&(ve=0),at<5&&(J=Bo);let ql=at>0,Wt=$e-at-(ql?ve:0);le=J(ti(Wt,K,z)),_e=(N==0?le/2:N==we?0:le)-N*we*((N==0?G/2:0)+(ql?ve/2:0));const je={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},ol=St?null:new Path2D;let Dt=null;if(Q!=null)Dt=C.data[Q.series[1]];else{let{y0:R,y1:pe}=h;R!=null&&pe!=null&&(V=pe.values(C,x,E,T),Dt=R.values(C,x,E,T))}let jt=F*le,Z=Ye*le;for(let R=we==1?E:T;R>=E&&R<=T;R+=we){let pe=V[R];if(pe==null)continue;if(Dt!=null){let Ke=Dt[R]??0;if(pe-Ke==0)continue;We=j(Ke,Y,M,$)}let Ee=k.distr!=2||h!=null?v[R]:R,rl=P(Ee,k,U,I),Gt=j(ie(pe,Me),Y,M,$),vt=J(rl-_e),Ut=J(Be(Gt,We)),Je=J(_t(Gt,We)),it=Ut-Je;if(pe!=null){let Ke=pe<0?Z:jt,pt=pe<0?jt:Z;St?(ve>0&&Rt[R]!=null&&te(nl.get(Rt[R]),vt,Je+tt(ve/2),le,Be(0,it-ve),Ke,pt),Tt[R]!=null&&te(nt.get(Tt[R]),vt,Je+tt(ve/2),le,Be(0,it-ve),Ke,pt)):te(ol,vt,Je+tt(ve/2),le,Be(0,it-ve),Ke,pt),fe(C,x,R,vt-ve/2,Je,le+ve,it)}}return ve>0?je.stroke=St?nl:ol:St||(je._fill=L.width==0?L._fill:L._stroke??L._fill,je.width=0),je.fill=St?nt:ol,je})}function Yf(e,l){const o=ie(l==null?void 0:l.alignGaps,0);return(n,r,c,u)=>ll(n,r,(d,p,h,S,g,w,C,x,E,T,L)=>{[c,u]=hn(h,c,u);let v=d.pxRound,V=F=>v(w(F,S,T,x)),k=F=>v(C(F,g,L,E)),Y,P,j;S.ori==0?(Y=_n,j=Pl,P=_r):(Y=Sn,j=Ll,P=Sr);const I=S.dir*(S.ori==0?1:-1);let $=V(p[I==1?c:u]),U=$,M=[],J=[];for(let F=I==1?c:u;F>=c&&F<=u;F+=I)if(h[F]!=null){let we=p[F],te=V(we);M.push(U=te),J.push(k(h[F]))}const N={stroke:e(M,J,Y,j,P,v),fill:null,clip:null,band:null,gaps:null,flags:Dl},G=N.stroke;let[z,K]=_i(n,r);if(d.fill!=null||z!=0){let F=N.fill=new Path2D(G),Ye=d.fillTo(n,r,d.min,d.max,z),we=k(Ye);j(F,U,we),j(F,$,we)}if(!d.spanGaps){let F=[];F.push(...Si(p,h,c,u,I,V,o)),N.gaps=F=d.gaps(n,r,c,u,F),N.clip=wn(F,S.ori,x,E,T,L)}return K!=0&&(N.band=K==2?[Lt(n,r,c,u,G,-1),Lt(n,r,c,u,G,1)]:Lt(n,r,c,u,G,K)),N})}function Kf(e){return Yf(qf,e)}function qf(e,l,o,n,r,c){const u=e.length;if(u<2)return null;const d=new Path2D;if(o(d,e[0],l[0]),u==2)n(d,e[1],l[1]);else{let p=Array(u),h=Array(u-1),S=Array(u-1),g=Array(u-1);for(let w=0;w<u-1;w++)S[w]=l[w+1]-l[w],g[w]=e[w+1]-e[w],h[w]=S[w]/g[w];p[0]=h[0];for(let w=1;w<u-1;w++)h[w]===0||h[w-1]===0||h[w-1]>0!=h[w]>0?p[w]=0:(p[w]=3*(g[w-1]+g[w])/((2*g[w]+g[w-1])/h[w-1]+(g[w]+2*g[w-1])/h[w]),isFinite(p[w])||(p[w]=0));p[u-1]=h[u-2];for(let w=0;w<u-1;w++)r(d,e[w]+g[w]/3,l[w]+p[w]*g[w]/3,e[w+1]-g[w]/3,l[w+1]-p[w+1]*g[w]/3,e[w+1],l[w+1])}return d}const oi=new Set;function Vo(){for(let e of oi)e.syncRect(!0)}Al&&(el(Ts,kl,Vo),el(Ds,kl,Vo,!0),el(cn,kl,()=>{He.pxRatio=re}));const $f=br(),Jf=vr();function zo(e,l,o,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((c,u)=>ri(c,u,l,o))}function Zf(e,l){return e.map((o,n)=>n==0?{}:ke({},l,o))}function ri(e,l,o,n){return ke({},l==0?o:n,e)}function xr(e,l,o){return l==null?El:[l,o]}const Qf=xr;function Xf(e,l,o){return l==null?El:an(l,o,ai,!0)}function kr(e,l,o,n){return l==null?El:dn(l,o,e.scales[n].log,!1)}const eu=kr;function Mr(e,l,o,n){return l==null?El:ci(l,o,e.scales[n].log,!1)}const tu=Mr;function lu(e,l,o,n,r){let c=Be(ho(e),ho(l)),u=l-e,d=wt(r/n*u,o);do{let p=o[d],h=n*p/u;if(h>=r&&c+(p<5?Ht.get(p):0)<=17)return[p,h]}while(++d<o.length);return[0,0]}function Fo(e){let l,o;return e=e.replace(/(\d+)px/,(n,r)=>(l=Te((o=+r)*re))+"px"),[e,l,o]}function nu(e){e.show&&[e.font,e.labelFont].forEach(l=>{let o=ae(l[2]*re,1);l[0]=l[0].replace(/[0-9.]+px/,o+"px"),l[1]=o})}function He(e,l,o){const n={mode:ie(e.mode,1)},r=n.mode;function c(t,i,s,f){let a=i.valToPct(t);return f+s*(i.dir==-1?1-a:a)}function u(t,i,s,f){let a=i.valToPct(t);return f+s*(i.dir==-1?a:1-a)}function d(t,i,s,f){return i.ori==0?c(t,i,s,f):u(t,i,s,f)}n.valToPosH=c,n.valToPosV=u;let p=!1;n.status=0;const h=n.root=ut(us);if(e.id!=null&&(h.id=e.id),et(h,e.class),e.title){let t=ut(ps,h);t.textContent=e.title}const S=gt("canvas"),g=n.ctx=S.getContext("2d"),w=ut(hs,h);el("click",w,t=>{t.target===x&&(he!=wl||Se!=_l)&&Fe.click(n,t)},!0);const C=n.under=ut(ds,w);w.appendChild(S);const x=n.over=ut(ms,w);e=Tl(e);const E=+ie(e.pxAlign,1),T=Co(E);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const L=e.ms||.001,v=n.series=r==1?zo(e.series||[],Eo,Lo,!1):Zf(e.series||[null],Po),V=n.axes=zo(e.axes||[],Mo,Do,!0),k=n.scales={},Y=n.bands=e.bands||[];Y.forEach(t=>{t.fill=ee(t.fill||null),t.dir=ie(t.dir,-1)});const P=r==2?v[1].facets[0].scale:v[0].scale,j={axes:jr,series:zr},I=(e.drawOrder||["axes","series"]).map(t=>j[t]);function $(t){const i=t.distr==3?s=>Pt(s>0?s:t.clamp(n,s,t.min,t.max,t.key)):t.distr==4?s=>Kn(s,t.asinh):t.distr==100?s=>t.fwd(s):s=>s;return s=>{let f=i(s),{_min:a,_max:m}=t,_=m-a;return(f-a)/_}}function U(t){let i=k[t];if(i==null){let s=(e.scales||Yl)[t]||Yl;if(s.from!=null){U(s.from);let f=ke({},k[s.from],s,{key:t});f.valToPct=$(f),k[t]=f}else{i=k[t]=ke({},t==P?hr:Hf,s),i.key=t;let f=i.time,a=i.range,m=Nt(a);if((t!=P||r==2&&!f)&&(m&&(a[0]==null||a[1]==null)&&(a={min:a[0]==null?co:{mode:1,hard:a[0],soft:a[0]},max:a[1]==null?co:{mode:1,hard:a[1],soft:a[1]}},m=!1),!m&&gn(a))){let _=a;a=(y,b,D)=>b==null?El:an(b,D,_)}i.range=ee(a||(f?Qf:t==P?i.distr==3?eu:i.distr==4?tu:xr:i.distr==3?kr:i.distr==4?Mr:Xf)),i.auto=ee(m?!1:i.auto),i.clamp=ee(i.clamp||Nf),i._min=i._max=null,i.valToPct=$(i)}}}U("x"),U("y"),r==1&&v.forEach(t=>{U(t.scale)}),V.forEach(t=>{U(t.scale)});for(let t in e.scales)U(t);const M=k[P],J=M.distr;let N,G;M.ori==0?(et(h,cs),N=c,G=u):(et(h,as),N=u,G=c);const z={};for(let t in k){let i=k[t];(i.min!=null||i.max!=null)&&(z[t]={min:i.min,max:i.max},i.min=i.max=null)}const K=e.tzDate||(t=>new Date(Te(t/L))),F=e.fmtDate||di,Ye=L==1?af(K):df(K),we=bo(K,yo(L==1?cf:hf,F)),te=ko(K,xo(gf,F)),fe=[],Q=n.legend=ke({},Sf,e.legend),H=n.cursor=ke({},Mf,{drag:{y:r==2}},e.cursor),Me=Q.show,We=H.show,_e=Q.markers;Q.idxs=fe,_e.width=ee(_e.width),_e.dash=ee(_e.dash),_e.stroke=ee(_e.stroke),_e.fill=ee(_e.fill);let le,at,$e,ve=[],St=[],Tt,nt=!1,Rt={};if(Q.live){const t=v[1]?v[1].values:null;nt=t!=null,Tt=nt?t(n,1,0):{_:0};for(let i in Tt)Rt[i]=fi}if(Me)if(le=gt("table",ys,h),$e=gt("tbody",null,le),Q.mount(n,le),nt){at=gt("thead",null,le,$e);let t=gt("tr",null,at);gt("th",null,t);for(var nl in Tt)gt("th",Zi,t).textContent=nl}else et(le,xs),Q.live&&et(le,bs);const il={show:!0},Rl={show:!1};function ql(t,i){if(i==0&&(nt||!Q.live||r==2))return El;let s=[],f=gt("tr",ks,$e,$e.childNodes[i]);et(f,t.class),t.show||et(f,Xt);let a=gt("th",null,f);if(_e.show){let y=ut(Ms,a);if(i>0){let b=_e.width(n,i);b&&(y.style.border=b+"px "+_e.dash(n,i)+" "+_e.stroke(n,i)),y.style.background=_e.fill(n,i)}}let m=ut(Zi,a);t.label instanceof HTMLElement?m.appendChild(t.label):m.textContent=t.label,i>0&&(_e.show||(m.style.color=t.width>0?_e.stroke(n,i):_e.fill(n,i)),je("click",a,y=>{if(H._lock)return;Bt(y);let b=v.indexOf(t);if((y.ctrlKey||y.metaKey)!=Q.isolate){let D=v.some((A,O)=>O>0&&O!=b&&A.show);v.forEach((A,O)=>{O>0&&bt(O,D?O==b?il:Rl:il,!0,xe.setSeries)})}else bt(b,{show:!t.show},!0,xe.setSeries)},!1),fl&&je(to,a,y=>{H._lock||(Bt(y),bt(v.indexOf(t),vl,!0,xe.setSeries))},!1));for(var _ in Tt){let y=gt("td",Es,f);y.textContent="--",s.push(y)}return[f,s]}const Wt=new Map;function je(t,i,s,f=!0){const a=Wt.get(i)||{},m=H.bind[t](n,i,s,f);m&&(el(t,i,a[t]=m),Wt.set(i,a))}function ol(t,i,s){const f=Wt.get(i)||{};for(let a in f)(t==null||a==t)&&(ei(a,i,f[a]),delete f[a]);t==null&&Wt.delete(i)}let Dt=0,jt=0,Z=0,R=0,pe=0,Ee=0,rl=pe,Gt=Ee,vt=Z,Ut=R,Je=0,it=0,Ke=0,pt=0;n.bbox={};let yn=!1,$l=!1,sl=!1,It=!1,Jl=!1,ot=!1;function bn(t,i,s){(s||t!=n.width||i!=n.height)&&yi(t,i),hl(!1),sl=!0,$l=!0,dl()}function yi(t,i){n.width=Dt=Z=t,n.height=jt=R=i,pe=Ee=0,Ar(),Pr();let s=n.bbox;Je=s.left=Jt(pe*re,.5),it=s.top=Jt(Ee*re,.5),Ke=s.width=Jt(Z*re,.5),pt=s.height=Jt(R*re,.5)}const Er=3;function Tr(){let t=!1,i=0;for(;!t;){i++;let s=Hr(i),f=Wr(i);t=i==Er||s&&f,t||(yi(n.width,n.height),$l=!0)}}function Dr({width:t,height:i}){bn(t,i)}n.setSize=Dr;function Ar(){let t=!1,i=!1,s=!1,f=!1;V.forEach((a,m)=>{if(a.show&&a._show){let{side:_,_size:y}=a,b=_%2,D=a.label!=null?a.labelSize:0,A=y+D;A>0&&(b?(Z-=A,_==3?(pe+=A,f=!0):s=!0):(R-=A,_==0?(Ee+=A,t=!0):i=!0))}}),Yt[0]=t,Yt[1]=s,Yt[2]=i,Yt[3]=f,Z-=Ct[1]+Ct[3],pe+=Ct[3],R-=Ct[2]+Ct[0],Ee+=Ct[0]}function Pr(){let t=pe+Z,i=Ee+R,s=pe,f=Ee;function a(m,_){switch(m){case 1:return t+=_,t-_;case 2:return i+=_,i-_;case 3:return s-=_,s+_;case 0:return f-=_,f+_}}V.forEach((m,_)=>{if(m.show&&m._show){let y=m.side;m._pos=a(y,m._size),m.label!=null&&(m._lpos=a(y,m.labelSize))}})}if(H.dataIdx==null){let t=H.hover,i=t.skip=new Set(t.skip??[]);i.add(void 0);let s=t.prox=ee(t.prox),f=t.bias??(t.bias=0);H.dataIdx=(a,m,_,y)=>{if(m==0)return _;let b=_,D=s(a,m,_,y)??ce,A=D>=0&&D<ce,O=M.ori==0?Z:R,q=H.left,oe=l[0],ne=l[m];if(i.has(ne[_])){b=null;let X=null,B=null,W;if(f==0||f==-1)for(W=_;X==null&&W-- >0;)i.has(ne[W])||(X=W);if(f==0||f==1)for(W=_;B==null&&W++<ne.length;)i.has(ne[W])||(B=W);if(X!=null||B!=null)if(A){let me=X==null?-1/0:N(oe[X],M,O,0),ye=B==null?1/0:N(oe[B],M,O,0),Ve=q-me,ue=ye-q;Ve<=ue?Ve<=D&&(b=X):ue<=D&&(b=B)}else b=B==null?X:X==null?B:_-X<=B-_?X:B}else A&&De(q-N(oe[_],M,O,0))>D&&(b=null);return b}}const Bt=t=>{H.event=t};H.idxs=fe,H._lock=!1;let Ne=H.points;Ne.show=ee(Ne.show),Ne.size=ee(Ne.size),Ne.stroke=ee(Ne.stroke),Ne.width=ee(Ne.width),Ne.fill=ee(Ne.fill);const yt=n.focus=ke({},e.focus||{alpha:.3},H.focus),fl=yt.prox>=0,ul=fl&&Ne.one;let rt=[],cl=[],al=[];function bi(t,i){let s=Ne.show(n,i);if(s instanceof HTMLElement)return et(s,vs),et(s,t.class),Et(s,-10,-10,Z,R),x.insertBefore(s,rt[i]),s}function xi(t,i){if(r==1||i>0){let s=r==1&&k[t.scale].time,f=t.value;t.value=s?wo(f)?ko(K,xo(f,F)):f||te:f||Vf,t.label=t.label||(s?Tf:Ef)}if(ul||i>0){t.width=t.width==null?1:t.width,t.paths=t.paths||$f||Ns,t.fillTo=ee(t.fillTo||Wf),t.pxAlign=+ie(t.pxAlign,E),t.pxRound=Co(t.pxAlign),t.stroke=ee(t.stroke||null),t.fill=ee(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let s=zf(Be(1,t.width),1),f=t.points=ke({},{size:s,width:Be(1,s*.2),stroke:t.stroke,space:s*2,paths:Jf,_stroke:null,_fill:null},t.points);f.show=ee(f.show),f.filter=ee(f.filter),f.fill=ee(f.fill),f.stroke=ee(f.stroke),f.paths=ee(f.paths),f.pxAlign=t.pxAlign}if(Me){let s=ql(t,i);ve.splice(i,0,s[0]),St.splice(i,0,s[1]),Q.values.push(null)}if(We){fe.splice(i,0,null);let s=null;ul?i==0&&(s=bi(t,i)):i>0&&(s=bi(t,i)),rt.splice(i,0,s),cl.splice(i,0,0),al.splice(i,0,0)}Oe("addSeries",i)}function Lr(t,i){i=i??v.length,t=r==1?ri(t,i,Eo,Lo):ri(t,i,{},Po),v.splice(i,0,t),xi(v[i],i)}n.addSeries=Lr;function Rr(t){if(v.splice(t,1),Me){Q.values.splice(t,1),St.splice(t,1);let i=ve.splice(t,1)[0];ol(null,i.firstChild),i.remove()}We&&(fe.splice(t,1),rt.splice(t,1)[0].remove(),cl.splice(t,1),al.splice(t,1)),Oe("delSeries",t)}n.delSeries=Rr;const Yt=[!1,!1,!1,!1];function Cr(t,i){if(t._show=t.show,t.show){let s=t.side%2,f=k[t.scale];f==null&&(t.scale=s?v[1].scale:P,f=k[t.scale]);let a=f.time;t.size=ee(t.size),t.space=ee(t.space),t.rotate=ee(t.rotate),Nt(t.incrs)&&t.incrs.forEach(_=>{!Ht.has(_)&&Ht.set(_,qo(_))}),t.incrs=ee(t.incrs||(f.distr==2?sf:a?L==1?uf:pf:Zt)),t.splits=ee(t.splits||(a&&f.distr==1?Ye:f.distr==3?li:f.distr==4?Pf:Af)),t.stroke=ee(t.stroke),t.grid.stroke=ee(t.grid.stroke),t.ticks.stroke=ee(t.ticks.stroke),t.border.stroke=ee(t.border.stroke);let m=t.values;t.values=Nt(m)&&!Nt(m[0])?ee(m):a?Nt(m)?bo(K,yo(m,F)):wo(m)?mf(K,m):m||we:m||Df,t.filter=ee(t.filter||(f.distr>=3&&f.log==10?Cf:f.distr==3&&f.log==2?Of:Yo)),t.font=Fo(t.font),t.labelFont=Fo(t.labelFont),t._size=t.size(n,null,i,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(Yt[i]=!0,t._el=ut(gs,w))}}function Cl(t,i,s,f){let[a,m,_,y]=s,b=i%2,D=0;return b==0&&(y||m)&&(D=i==0&&!a||i==2&&!_?Te(Mo.size/3):0),b==1&&(a||_)&&(D=i==1&&!m||i==3&&!y?Te(Do.size/2):0),D}const ki=n.padding=(e.padding||[Cl,Cl,Cl,Cl]).map(t=>ee(ie(t,Cl))),Ct=n._padding=ki.map((t,i)=>t(n,i,Yt,0));let ze,Pe=null,Le=null;const Zl=r==1?v[0].idxs:null;let ht=null,Ol=!1;function Mi(t,i){if(l=t??[],n.data=n._data=l,r==2){ze=0;for(let s=1;s<v.length;s++)ze+=l[s][0].length}else{l.length==0&&(n.data=n._data=l=[[]]),ht=l[0],ze=ht.length;let s=l;if(J==2){s=l.slice();let f=s[0]=Array(ze);for(let a=0;a<ze;a++)f[a]=a}n._data=l=s}if(hl(!0),Oe("setData"),J==2&&(sl=!0),i!==!1){let s=M;s.auto(n,Ol)?xn():Vt(P,s.min,s.max),It=It||H.left>=0,ot=!0,dl()}}n.setData=Mi;function xn(){Ol=!0;let t,i;r==1&&(ze>0?(Pe=Zl[0]=0,Le=Zl[1]=ze-1,t=l[0][Pe],i=l[0][Le],J==2?(t=Pe,i=Le):t==i&&(J==3?[t,i]=dn(t,t,M.log,!1):J==4?[t,i]=ci(t,t,M.log,!1):M.time?i=t+Te(86400/L):[t,i]=an(t,i,ai,!0))):(Pe=Zl[0]=t=null,Le=Zl[1]=i=null)),Vt(P,t,i)}let Ql,pl,kn,Mn,En,Tn,Dn,An,Pn,qe;function Ei(t,i,s,f,a,m){t??(t=Xi),s??(s=hi),f??(f="butt"),a??(a=Xi),m??(m="round"),t!=Ql&&(g.strokeStyle=Ql=t),a!=pl&&(g.fillStyle=pl=a),i!=kn&&(g.lineWidth=kn=i),m!=En&&(g.lineJoin=En=m),f!=Tn&&(g.lineCap=Tn=f),s!=Mn&&g.setLineDash(Mn=s)}function Ti(t,i,s,f){i!=pl&&(g.fillStyle=pl=i),t!=Dn&&(g.font=Dn=t),s!=An&&(g.textAlign=An=s),f!=Pn&&(g.textBaseline=Pn=f)}function Ln(t,i,s,f,a=0){if(f.length>0&&t.auto(n,Ol)&&(i==null||i.min==null)){let m=ie(Pe,0),_=ie(Le,f.length-1),y=s.min==null?Rs(f,m,_,a,t.distr==3):[s.min,s.max];t.min=_t(t.min,s.min=y[0]),t.max=Be(t.max,s.max=y[1])}}const Di={min:null,max:null};function Or(){for(let f in k){let a=k[f];z[f]==null&&(a.min==null||z[P]!=null&&a.auto(n,Ol))&&(z[f]=Di)}for(let f in k){let a=k[f];z[f]==null&&a.from!=null&&z[a.from]!=null&&(z[f]=Di)}z[P]!=null&&hl(!0);let t={};for(let f in z){let a=z[f];if(a!=null){let m=t[f]=Tl(k[f],js);if(a.min!=null)ke(m,a);else if(f!=P||r==2)if(ze==0&&m.from==null){let _=m.range(n,null,null,f);m.min=_[0],m.max=_[1]}else m.min=ce,m.max=-ce}}if(ze>0){v.forEach((f,a)=>{if(r==1){let m=f.scale,_=z[m];if(_==null)return;let y=t[m];if(a==0){let b=y.range(n,y.min,y.max,m);y.min=b[0],y.max=b[1],Pe=wt(y.min,l[0]),Le=wt(y.max,l[0]),Le-Pe>1&&(l[0][Pe]<y.min&&Pe++,l[0][Le]>y.max&&Le--),f.min=ht[Pe],f.max=ht[Le]}else f.show&&f.auto&&Ln(y,_,f,l[a],f.sorted);f.idxs[0]=Pe,f.idxs[1]=Le}else if(a>0&&f.show&&f.auto){let[m,_]=f.facets,y=m.scale,b=_.scale,[D,A]=l[a],O=t[y],q=t[b];O!=null&&Ln(O,z[y],m,D,m.sorted),q!=null&&Ln(q,z[b],_,A,_.sorted),f.min=_.min,f.max=_.max}});for(let f in t){let a=t[f],m=z[f];if(a.from==null&&(m==null||m.min==null)){let _=a.range(n,a.min==ce?null:a.min,a.max==-ce?null:a.max,f);a.min=_[0],a.max=_[1]}}}for(let f in t){let a=t[f];if(a.from!=null){let m=t[a.from];if(m.min==null)a.min=a.max=null;else{let _=a.range(n,m.min,m.max,f);a.min=_[0],a.max=_[1]}}}let i={},s=!1;for(let f in t){let a=t[f],m=k[f];if(m.min!=a.min||m.max!=a.max){m.min=a.min,m.max=a.max;let _=m.distr;m._min=_==3?Pt(m.min):_==4?Kn(m.min,m.asinh):_==100?m.fwd(m.min):m.min,m._max=_==3?Pt(m.max):_==4?Kn(m.max,m.asinh):_==100?m.fwd(m.max):m.max,i[f]=s=!0}}if(s){v.forEach((f,a)=>{r==2?a>0&&i.y&&(f._paths=null):i[f.scale]&&(f._paths=null)});for(let f in i)sl=!0,Oe("setScale",f);We&&H.left>=0&&(It=ot=!0)}for(let f in z)z[f]=null}function Vr(t){let i=ti(Pe-1,0,ze-1),s=ti(Le+1,0,ze-1);for(;t[i]==null&&i>0;)i--;for(;t[s]==null&&s<ze-1;)s++;return[i,s]}function zr(){if(ze>0){let t=v.some(i=>i._focus)&&qe!=yt.alpha;t&&(g.globalAlpha=qe=yt.alpha),v.forEach((i,s)=>{if(s>0&&i.show&&(Ai(s,!1),Ai(s,!0),i._paths==null)){let f=qe;qe!=i.alpha&&(g.globalAlpha=qe=i.alpha);let a=r==2?[0,l[s][0].length-1]:Vr(l[s]);i._paths=i.paths(n,s,a[0],a[1]),qe!=f&&(g.globalAlpha=qe=f)}}),v.forEach((i,s)=>{if(s>0&&i.show){let f=qe;qe!=i.alpha&&(g.globalAlpha=qe=i.alpha),i._paths!=null&&Pi(s,!1);{let a=i._paths!=null?i._paths.gaps:null,m=i.points.show(n,s,Pe,Le,a),_=i.points.filter(n,s,m,a);(m||_)&&(i.points._paths=i.points.paths(n,s,Pe,Le,_),Pi(s,!0))}qe!=f&&(g.globalAlpha=qe=f),Oe("drawSeries",s)}}),t&&(g.globalAlpha=qe=1)}}function Ai(t,i){let s=i?v[t].points:v[t];s._stroke=s.stroke(n,t),s._fill=s.fill(n,t)}function Pi(t,i){let s=i?v[t].points:v[t],{stroke:f,fill:a,clip:m,flags:_,_stroke:y=s._stroke,_fill:b=s._fill,_width:D=s.width}=s._paths;D=ae(D*re,3);let A=null,O=D%2/2;i&&b==null&&(b=D>0?"#fff":y);let q=s.pxAlign==1&&O>0;if(q&&g.translate(O,O),!i){let oe=Je-D/2,ne=it-D/2,X=Ke+D,B=pt+D;A=new Path2D,A.rect(oe,ne,X,B)}i?Rn(y,D,s.dash,s.cap,b,f,a,_,m):Fr(t,y,D,s.dash,s.cap,b,f,a,_,A,m),q&&g.translate(-O,-O)}function Fr(t,i,s,f,a,m,_,y,b,D,A){let O=!1;b!=0&&Y.forEach((q,oe)=>{if(q.series[0]==t){let ne=v[q.series[1]],X=l[q.series[1]],B=(ne._paths||Yl).band;Nt(B)&&(B=q.dir==1?B[0]:B[1]);let W,me=null;ne.show&&B&&Os(X,Pe,Le)?(me=q.fill(n,oe)||m,W=ne._paths.clip):B=null,Rn(i,s,f,a,me,_,y,b,D,A,W,B),O=!0}}),O||Rn(i,s,f,a,m,_,y,b,D,A)}const Li=Dl|ii;function Rn(t,i,s,f,a,m,_,y,b,D,A,O){Ei(t,i,s,f,a),(b||D||O)&&(g.save(),b&&g.clip(b),D&&g.clip(D)),O?(y&Li)==Li?(g.clip(O),A&&g.clip(A),en(a,_),Xl(t,m,i)):y&ii?(en(a,_),g.clip(O),Xl(t,m,i)):y&Dl&&(g.save(),g.clip(O),A&&g.clip(A),en(a,_),g.restore(),Xl(t,m,i)):(en(a,_),Xl(t,m,i)),(b||D||O)&&g.restore()}function Xl(t,i,s){s>0&&(i instanceof Map?i.forEach((f,a)=>{g.strokeStyle=Ql=a,g.stroke(f)}):i!=null&&t&&g.stroke(i))}function en(t,i){i instanceof Map?i.forEach((s,f)=>{g.fillStyle=pl=f,g.fill(s)}):i!=null&&t&&g.fill(i)}function Nr(t,i,s,f){let a=V[t],m;if(f<=0)m=[0,0];else{let _=a._space=a.space(n,t,i,s,f),y=a._incrs=a.incrs(n,t,i,s,f,_);m=lu(i,s,y,f,_)}return a._found=m}function Cn(t,i,s,f,a,m,_,y,b,D){let A=_%2/2;E==1&&g.translate(A,A),Ei(y,_,b,D,y),g.beginPath();let O,q,oe,ne,X=a+(f==0||f==3?-m:m);s==0?(q=a,ne=X):(O=a,oe=X);for(let B=0;B<t.length;B++)i[B]!=null&&(s==0?O=oe=t[B]:q=ne=t[B],g.moveTo(O,q),g.lineTo(oe,ne));g.stroke(),E==1&&g.translate(-A,-A)}function Hr(t){let i=!0;return V.forEach((s,f)=>{if(!s.show)return;let a=k[s.scale];if(a.min==null){s._show&&(i=!1,s._show=!1,hl(!1));return}else s._show||(i=!1,s._show=!0,hl(!1));let m=s.side,_=m%2,{min:y,max:b}=a,[D,A]=Nr(f,y,b,_==0?Z:R);if(A==0)return;let O=a.distr==2,q=s._splits=s.splits(n,f,y,b,D,A,O),oe=a.distr==2?q.map(W=>ht[W]):q,ne=a.distr==2?ht[q[1]]-ht[q[0]]:D,X=s._values=s.values(n,s.filter(n,oe,f,A,ne),f,A,ne);s._rotate=m==2?s.rotate(n,X,f,A):0;let B=s._size;s._size=ct(s.size(n,X,f,t)),B!=null&&s._size!=B&&(i=!1)}),i}function Wr(t){let i=!0;return ki.forEach((s,f)=>{let a=s(n,f,Yt,t);a!=Ct[f]&&(i=!1),Ct[f]=a}),i}function jr(){for(let t=0;t<V.length;t++){let i=V[t];if(!i.show||!i._show)continue;let s=i.side,f=s%2,a,m,_=i.stroke(n,t),y=s==0||s==3?-1:1,[b,D]=i._found;if(i.label!=null){let Ue=i.labelGap*y,Xe=Te((i._lpos+Ue)*re);Ti(i.labelFont[0],_,"center",s==2?Wl:Qi),g.save(),f==1?(a=m=0,g.translate(Xe,Te(it+pt/2)),g.rotate((s==3?-un:un)/2)):(a=Te(Je+Ke/2),m=Xe);let $t=Io(i.label)?i.label(n,t,b,D):i.label;g.fillText($t,a,m),g.restore()}if(D==0)continue;let A=k[i.scale],O=f==0?Ke:pt,q=f==0?Je:it,oe=i._splits,ne=A.distr==2?oe.map(Ue=>ht[Ue]):oe,X=A.distr==2?ht[oe[1]]-ht[oe[0]]:b,B=i.ticks,W=i.border,me=B.show?B.size:0,ye=Te(me*re),Ve=Te((i.alignTo==2?i._size-me-i.gap:i.gap)*re),ue=i._rotate*-un/180,be=T(i._pos*re),Ze=(ye+Ve)*y,Ge=be+Ze;m=f==0?Ge:0,a=f==1?Ge:0;let st=i.font[0],dt=i.align==1?bl:i.align==2?In:ue>0?bl:ue<0?In:f==0?"center":s==3?In:bl,kt=ue||f==1?"middle":s==2?Wl:Qi;Ti(st,_,dt,kt);let Qe=i.font[1]*i.lineGap,ft=oe.map(Ue=>T(d(Ue,A,O,q))),mt=i._values;for(let Ue=0;Ue<mt.length;Ue++){let Xe=mt[Ue];if(Xe!=null){f==0?a=ft[Ue]:m=ft[Ue],Xe=""+Xe;let $t=Xe.indexOf(`
`)==-1?[Xe]:Xe.split(/\n/gm);for(let Ie=0;Ie<$t.length;Ie++){let Ji=$t[Ie];ue?(g.save(),g.translate(a,m+Ie*Qe),g.rotate(ue),g.fillText(Ji,0,0),g.restore()):g.fillText(Ji,a,m+Ie*Qe)}}}B.show&&Cn(ft,B.filter(n,ne,t,D,X),f,s,be,ye,ae(B.width*re,3),B.stroke(n,t),B.dash,B.cap);let Mt=i.grid;Mt.show&&Cn(ft,Mt.filter(n,ne,t,D,X),f,f==0?2:1,f==0?it:Je,f==0?pt:Ke,ae(Mt.width*re,3),Mt.stroke(n,t),Mt.dash,Mt.cap),W.show&&Cn([be],[1],f==0?1:0,f==0?1:2,f==1?it:Je,f==1?pt:Ke,ae(W.width*re,3),W.stroke(n,t),W.dash,W.cap)}Oe("drawAxes")}function hl(t){v.forEach((i,s)=>{s>0&&(i._paths=null,t&&(r==1?(i.min=null,i.max=null):i.facets.forEach(f=>{f.min=null,f.max=null})))})}let tn=!1,On=!1,Vl=[];function Gr(){On=!1;for(let t=0;t<Vl.length;t++)Oe(...Vl[t]);Vl.length=0}function dl(){tn||(qs(Ri),tn=!0)}function Ur(t,i=!1){tn=!0,On=i,t(n),Ri(),i&&Vl.length>0&&queueMicrotask(Gr)}n.batch=Ur;function Ri(){if(yn&&(Or(),yn=!1),sl&&(Tr(),sl=!1),$l){if(ge(C,bl,pe),ge(C,Wl,Ee),ge(C,Gl,Z),ge(C,Ul,R),ge(x,bl,pe),ge(x,Wl,Ee),ge(x,Gl,Z),ge(x,Ul,R),ge(w,Gl,Dt),ge(w,Ul,jt),S.width=Te(Dt*re),S.height=Te(jt*re),V.forEach(({_el:t,_show:i,_size:s,_pos:f,side:a})=>{if(t!=null)if(i){let m=a===3||a===0?s:0,_=a%2==1;ge(t,_?"left":"top",f-m),ge(t,_?"width":"height",s),ge(t,_?"top":"left",_?Ee:pe),ge(t,_?"height":"width",_?R:Z),Xn(t,Xt)}else et(t,Xt)}),Ql=pl=kn=En=Tn=Dn=An=Pn=Mn=null,qe=1,Nl(!0),pe!=rl||Ee!=Gt||Z!=vt||R!=Ut){hl(!1);let t=Z/vt,i=R/Ut;if(We&&!It&&H.left>=0){H.left*=t,H.top*=i,ml&&Et(ml,Te(H.left),0,Z,R),gl&&Et(gl,0,Te(H.top),Z,R);for(let s=0;s<rt.length;s++){let f=rt[s];f!=null&&(cl[s]*=t,al[s]*=i,Et(f,ct(cl[s]),ct(al[s]),Z,R))}}if(de.show&&!Jl&&de.left>=0&&de.width>0){de.left*=t,de.width*=t,de.top*=i,de.height*=i;for(let s in Wn)ge(Sl,s,de[s])}rl=pe,Gt=Ee,vt=Z,Ut=R}Oe("setSize"),$l=!1}Dt>0&&jt>0&&(g.clearRect(0,0,S.width,S.height),Oe("drawClear"),I.forEach(t=>t()),Oe("draw")),de.show&&Jl&&(ln(de),Jl=!1),We&&It&&(qt(null,!0,!1),It=!1),Q.show&&Q.live&&ot&&(Nn(),ot=!1),p||(p=!0,n.status=1,Oe("ready")),Ol=!1,tn=!1}n.redraw=(t,i)=>{sl=i||!1,t!==!1?Vt(P,M.min,M.max):dl()};function Vn(t,i){let s=k[t];if(s.from==null){if(ze==0){let f=s.range(n,i.min,i.max,t);i.min=f[0],i.max=f[1]}if(i.min>i.max){let f=i.min;i.min=i.max,i.max=f}if(ze>1&&i.min!=null&&i.max!=null&&i.max-i.min<1e-16)return;t==P&&s.distr==2&&ze>0&&(i.min=wt(i.min,l[0]),i.max=wt(i.max,l[0]),i.min==i.max&&i.max++),z[t]=i,yn=!0,dl()}}n.setScale=Vn;let zn,Fn,ml,gl,Ci,Oi,wl,_l,Vi,zi,he,Se,Ot=!1;const Fe=H.drag;let Re=Fe.x,Ce=Fe.y;We&&(H.x&&(zn=ut(_s,x)),H.y&&(Fn=ut(Ss,x)),M.ori==0?(ml=zn,gl=Fn):(ml=Fn,gl=zn),he=H.left,Se=H.top);const de=n.select=ke({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),Sl=de.show?ut(ws,de.over?x:C):null;function ln(t,i){if(de.show){for(let s in t)de[s]=t[s],s in Wn&&ge(Sl,s,t[s]);i!==!1&&Oe("setSelect")}}n.setSelect=ln;function Ir(t){if(v[t].show)Me&&Xn(ve[t],Xt);else if(Me&&et(ve[t],Xt),We){let s=ul?rt[0]:rt[t];s!=null&&Et(s,-10,-10,Z,R)}}function Vt(t,i,s){Vn(t,{min:i,max:s})}function bt(t,i,s,f){i.focus!=null&&$r(t),i.show!=null&&v.forEach((a,m)=>{m>0&&(t==m||t==null)&&(a.show=i.show,Ir(m),r==2?(Vt(a.facets[0].scale,null,null),Vt(a.facets[1].scale,null,null)):Vt(a.scale,null,null),dl())}),s!==!1&&Oe("setSeries",t,i),f&&Hl("setSeries",n,t,i)}n.setSeries=bt;function Br(t,i){ke(Y[t],i)}function Yr(t,i){t.fill=ee(t.fill||null),t.dir=ie(t.dir,-1),i=i??Y.length,Y.splice(i,0,t)}function Kr(t){t==null?Y.length=0:Y.splice(t,1)}n.addBand=Yr,n.setBand=Br,n.delBand=Kr;function qr(t,i){v[t].alpha=i,We&&rt[t]!=null&&(rt[t].style.opacity=i),Me&&ve[t]&&(ve[t].style.opacity=i)}let At,zt,Kt;const vl={focus:!0};function $r(t){if(t!=Kt){let i=t==null,s=yt.alpha!=1;v.forEach((f,a)=>{if(r==1||a>0){let m=i||a==0||a==t;f._focus=i?null:m,s&&qr(a,m?1:yt.alpha)}}),Kt=t,s&&dl()}}Me&&fl&&je(lo,le,t=>{H._lock||(Bt(t),Kt!=null&&bt(null,vl,!0,xe.setSeries))});function xt(t,i,s){let f=k[i];s&&(t=t/re-(f.ori==1?Ee:pe));let a=Z;f.ori==1&&(a=R,t=a-t),f.dir==-1&&(t=a-t);let m=f._min,_=f._max,y=t/a,b=m+(_-m)*y,D=f.distr;return D==3?Ml(10,b):D==4?zs(b,f.asinh):D==100?f.bwd(b):b}function Jr(t,i){let s=xt(t,P,i);return wt(s,l[0],Pe,Le)}n.valToIdx=t=>wt(t,l[0]),n.posToIdx=Jr,n.posToVal=xt,n.valToPos=(t,i,s)=>k[i].ori==0?c(t,k[i],s?Ke:Z,s?Je:0):u(t,k[i],s?pt:R,s?it:0),n.setCursor=(t,i,s)=>{he=t.left,Se=t.top,qt(null,i,s)};function Fi(t,i){ge(Sl,bl,de.left=t),ge(Sl,Gl,de.width=i)}function Ni(t,i){ge(Sl,Wl,de.top=t),ge(Sl,Ul,de.height=i)}let zl=M.ori==0?Fi:Ni,Fl=M.ori==1?Fi:Ni;function Zr(){if(Me&&Q.live)for(let t=r==2?1:0;t<v.length;t++){if(t==0&&nt)continue;let i=Q.values[t],s=0;for(let f in i)St[t][s++].firstChild.nodeValue=i[f]}}function Nn(t,i){if(t!=null&&(t.idxs?t.idxs.forEach((s,f)=>{fe[f]=s}):Ws(t.idx)||fe.fill(t.idx),Q.idx=fe[0]),Me&&Q.live){for(let s=0;s<v.length;s++)(s>0||r==1&&!nt)&&Qr(s,fe[s]);Zr()}ot=!1,i!==!1&&Oe("setLegend")}n.setLegend=Nn;function Qr(t,i){let s=v[t],f=t==0&&J==2?ht:l[t],a;nt?a=s.values(n,t,i)??Rt:(a=s.value(n,i==null?null:f[i],t,i),a=a==null?Rt:{_:a}),Q.values[t]=a}function qt(t,i,s){Vi=he,zi=Se,[he,Se]=H.move(n,he,Se),H.left=he,H.top=Se,We&&(ml&&Et(ml,Te(he),0,Z,R),gl&&Et(gl,0,Te(Se),Z,R));let f,a=Pe>Le;At=ce,zt=null;let m=M.ori==0?Z:R,_=M.ori==1?Z:R;if(he<0||ze==0||a){f=H.idx=null;for(let y=0;y<v.length;y++){let b=rt[y];b!=null&&Et(b,-10,-10,Z,R)}fl&&bt(null,vl,!0,t==null&&xe.setSeries),Q.live&&(fe.fill(f),ot=!0)}else{let y,b,D;r==1&&(y=M.ori==0?he:Se,b=xt(y,P),f=H.idx=wt(b,l[0],Pe,Le),D=N(l[0][f],M,m,0));let A=-10,O=-10,q=0,oe=0,ne=!0,X="",B="";for(let W=r==2?1:0;W<v.length;W++){let me=v[W],ye=fe[W],Ve=ye==null?null:r==1?l[W][ye]:l[W][1][ye],ue=H.dataIdx(n,W,f,b),be=ue==null?null:r==1?l[W][ue]:l[W][1][ue];if(ot=ot||be!=Ve||ue!=ye,fe[W]=ue,W>0&&me.show){let Ze=ue==null?-10:ue==f?D:N(r==1?l[0][ue]:l[W][0][ue],M,m,0),Ge=be==null?-10:G(be,r==1?k[me.scale]:k[me.facets[1].scale],_,0);if(fl&&be!=null){let st=M.ori==1?he:Se,dt=De(yt.dist(n,W,ue,Ge,st));if(dt<At){let kt=yt.bias;if(kt!=0){let Qe=xt(st,me.scale),ft=be>=0?1:-1,mt=Qe>=0?1:-1;mt==ft&&(mt==1?kt==1?be>=Qe:be<=Qe:kt==1?be<=Qe:be>=Qe)&&(At=dt,zt=W)}else At=dt,zt=W}}if(ot||ul){let st,dt;M.ori==0?(st=Ze,dt=Ge):(st=Ge,dt=Ze);let kt,Qe,ft,mt,Mt,Ue,Xe=!0,$t=Ne.bbox;if($t!=null){Xe=!1;let Ie=$t(n,W);ft=Ie.left,mt=Ie.top,kt=Ie.width,Qe=Ie.height}else ft=st,mt=dt,kt=Qe=Ne.size(n,W);if(Ue=Ne.fill(n,W),Mt=Ne.stroke(n,W),ul)W==zt&&At<=yt.prox&&(A=ft,O=mt,q=kt,oe=Qe,ne=Xe,X=Ue,B=Mt);else{let Ie=rt[W];Ie!=null&&(cl[W]=ft,al[W]=mt,uo(Ie,kt,Qe,Xe),so(Ie,Ue,Mt),Et(Ie,ct(ft),ct(mt),Z,R))}}}}if(ul){let W=yt.prox,me=Kt==null?At<=W:At>W||zt!=Kt;if(ot||me){let ye=rt[0];ye!=null&&(cl[0]=A,al[0]=O,uo(ye,q,oe,ne),so(ye,X,B),Et(ye,ct(A),ct(O),Z,R))}}}if(de.show&&Ot)if(t!=null){let[y,b]=xe.scales,[D,A]=xe.match,[O,q]=t.cursor.sync.scales,oe=t.cursor.drag;if(Re=oe._x,Ce=oe._y,Re||Ce){let{left:ne,top:X,width:B,height:W}=t.select,me=t.scales[O].ori,ye=t.posToVal,Ve,ue,be,Ze,Ge,st=y!=null&&D(y,O),dt=b!=null&&A(b,q);st&&Re?(me==0?(Ve=ne,ue=B):(Ve=X,ue=W),be=k[y],Ze=N(ye(Ve,O),be,m,0),Ge=N(ye(Ve+ue,O),be,m,0),zl(_t(Ze,Ge),De(Ge-Ze))):zl(0,m),dt&&Ce?(me==1?(Ve=ne,ue=B):(Ve=X,ue=W),be=k[b],Ze=G(ye(Ve,q),be,_,0),Ge=G(ye(Ve+ue,q),be,_,0),Fl(_t(Ze,Ge),De(Ge-Ze))):Fl(0,_)}else jn()}else{let y=De(Vi-Ci),b=De(zi-Oi);if(M.ori==1){let q=y;y=b,b=q}Re=Fe.x&&y>=Fe.dist,Ce=Fe.y&&b>=Fe.dist;let D=Fe.uni;D!=null?Re&&Ce&&(Re=y>=D,Ce=b>=D,!Re&&!Ce&&(b>y?Ce=!0:Re=!0)):Fe.x&&Fe.y&&(Re||Ce)&&(Re=Ce=!0);let A,O;Re&&(M.ori==0?(A=wl,O=he):(A=_l,O=Se),zl(_t(A,O),De(O-A)),Ce||Fl(0,_)),Ce&&(M.ori==1?(A=wl,O=he):(A=_l,O=Se),Fl(_t(A,O),De(O-A)),Re||zl(0,m)),!Re&&!Ce&&(zl(0,0),Fl(0,0))}if(Fe._x=Re,Fe._y=Ce,t==null){if(s){if($i!=null){let[y,b]=xe.scales;xe.values[0]=y!=null?xt(M.ori==0?he:Se,y):null,xe.values[1]=b!=null?xt(M.ori==1?he:Se,b):null}Hl(Bn,n,he,Se,Z,R,f)}if(fl){let y=s&&xe.setSeries,b=yt.prox;Kt==null?At<=b&&bt(zt,vl,!0,y):At>b?bt(null,vl,!0,y):zt!=Kt&&bt(zt,vl,!0,y)}}ot&&(Q.idx=f,Nn()),i!==!1&&Oe("setCursor")}let Ft=null;Object.defineProperty(n,"rect",{get(){return Ft==null&&Nl(!1),Ft}});function Nl(t=!1){t?Ft=null:(Ft=x.getBoundingClientRect(),Oe("syncRect",Ft))}function Hi(t,i,s,f,a,m,_){H._lock||Ot&&t!=null&&t.movementX==0&&t.movementY==0||(Hn(t,i,s,f,a,m,_,!1,t!=null),t!=null?qt(null,!0,!0):qt(i,!0,!1))}function Hn(t,i,s,f,a,m,_,y,b){if(Ft==null&&Nl(!1),Bt(t),t!=null)s=t.clientX-Ft.left,f=t.clientY-Ft.top;else{if(s<0||f<0){he=-10,Se=-10;return}let[D,A]=xe.scales,O=i.cursor.sync,[q,oe]=O.values,[ne,X]=O.scales,[B,W]=xe.match,me=i.axes[0].side%2==1,ye=M.ori==0?Z:R,Ve=M.ori==1?Z:R,ue=me?m:a,be=me?a:m,Ze=me?f:s,Ge=me?s:f;if(ne!=null?s=B(D,ne)?d(q,k[D],ye,0):-10:s=ye*(Ze/ue),X!=null?f=W(A,X)?d(oe,k[A],Ve,0):-10:f=Ve*(Ge/be),M.ori==1){let st=s;s=f,f=st}}b&&(i==null||i.cursor.event.type==Bn)&&((s<=1||s>=Z-1)&&(s=Jt(s,Z)),(f<=1||f>=R-1)&&(f=Jt(f,R))),y?(Ci=s,Oi=f,[wl,_l]=H.move(n,s,f)):(he=s,Se=f)}const Wn={width:0,height:0,left:0,top:0};function jn(){ln(Wn,!1)}let Wi,ji,Gi,Ui;function Ii(t,i,s,f,a,m,_){Ot=!0,Re=Ce=Fe._x=Fe._y=!1,Hn(t,i,s,f,a,m,_,!0,!1),t!=null&&(je(Yn,Zn,Bi,!1),Hl(eo,n,wl,_l,Z,R,null));let{left:y,top:b,width:D,height:A}=de;Wi=y,ji=b,Gi=D,Ui=A}function Bi(t,i,s,f,a,m,_){Ot=Fe._x=Fe._y=!1,Hn(t,i,s,f,a,m,_,!1,!0);let{left:y,top:b,width:D,height:A}=de,O=D>0||A>0,q=Wi!=y||ji!=b||Gi!=D||Ui!=A;if(O&&q&&ln(de),Fe.setScale&&O&&q){let oe=y,ne=D,X=b,B=A;if(M.ori==1&&(oe=b,ne=A,X=y,B=D),Re&&Vt(P,xt(oe,P),xt(oe+ne,P)),Ce)for(let W in k){let me=k[W];W!=P&&me.from==null&&me.min!=ce&&Vt(W,xt(X+B,W),xt(X,W))}jn()}else H.lock&&(H._lock=!H._lock,qt(i,!0,t!=null));t!=null&&(ol(Yn,Zn),Hl(Yn,n,he,Se,Z,R,null))}function Xr(t,i,s,f,a,m,_){if(H._lock)return;Bt(t);let y=Ot;if(Ot){let b=!0,D=!0,A=10,O,q;M.ori==0?(O=Re,q=Ce):(O=Ce,q=Re),O&&q&&(b=he<=A||he>=Z-A,D=Se<=A||Se>=R-A),O&&b&&(he=he<wl?0:Z),q&&D&&(Se=Se<_l?0:R),qt(null,!0,!0),Ot=!1}he=-10,Se=-10,fe.fill(null),qt(null,!0,!0),y&&(Ot=y)}function Yi(t,i,s,f,a,m,_){H._lock||(Bt(t),xn(),jn(),t!=null&&Hl(no,n,he,Se,Z,R,null))}function Ki(){V.forEach(nu),bn(n.width,n.height,!0)}el(cn,kl,Ki);const yl={};yl.mousedown=Ii,yl.mousemove=Hi,yl.mouseup=Bi,yl.dblclick=Yi,yl.setSeries=(t,i,s,f)=>{let a=xe.match[2];s=a(n,i,s),s!=-1&&bt(s,f,!0,!1)},We&&(je(eo,x,Ii),je(Bn,x,Hi),je(to,x,t=>{Bt(t),Nl(!1)}),je(lo,x,Xr),je(no,x,Yi),oi.add(n),n.syncRect=Nl);const nn=n.hooks=e.hooks||{};function Oe(t,i,s){On?Vl.push([t,i,s]):t in nn&&nn[t].forEach(f=>{f.call(null,n,i,s)})}(e.plugins||[]).forEach(t=>{for(let i in t.hooks)nn[i]=(nn[i]||[]).concat(t.hooks[i])});const qi=(t,i,s)=>s,xe=ke({key:null,setSeries:!1,filters:{pub:mo,sub:mo},scales:[P,v[1]?v[1].scale:null],match:[go,go,qi],values:[null,null]},H.sync);xe.match.length==2&&xe.match.push(qi),H.sync=xe;const $i=xe.key,Gn=dr($i);function Hl(t,i,s,f,a,m,_){xe.filters.pub(t,i,s,f,a,m,_)&&Gn.pub(t,i,s,f,a,m,_)}Gn.sub(n);function es(t,i,s,f,a,m,_){xe.filters.sub(t,i,s,f,a,m,_)&&yl[t](null,i,s,f,a,m,_)}n.pub=es;function ts(){Gn.unsub(n),oi.delete(n),Wt.clear(),ei(cn,kl,Ki),h.remove(),le==null||le.remove(),Oe("destroy")}n.destroy=ts;function Un(){Oe("init",e,l),Mi(l||e.data,!1),z[P]?Vn(P,z[P]):xn(),Jl=de.show&&(de.width>0||de.height>0),It=ot=!0,bn(e.width,e.height)}return v.forEach(xi),V.forEach(Cr),o?o instanceof HTMLElement?(o.appendChild(h),Un()):o(n,Un):Un(),n}He.assign=ke;He.fmtNum=pi;He.rangeNum=an;He.rangeLog=dn;He.rangeAsinh=ci;He.orient=ll;He.pxRatio=re;He.join=Ks;He.fmtDate=di,He.tzDate=of;He.sync=dr;{He.addGap=jf,He.clipGaps=wn;let e=He.paths={points:vr};e.linear=br,e.stepped=If,e.bars=Bf,e.spline=Kf}const iu=Object.freeze(Object.defineProperty({__proto__:null,default:He},Symbol.toStringTag,{value:"Module"})),ou=ls(iu);var ru=fn.exports,No;function su(){return No||(No=1,function(e,l){(function(n,r){e.exports=r(ns(),ou)})(ru,(o,n)=>(()=>{var r={"./common/index.ts":(p,h,S)=>{S.r(h),S.d(h,{dataMatch:()=>C,optionsUpdateState:()=>w});var g=function(x,E){var T={};for(var L in x)Object.prototype.hasOwnProperty.call(x,L)&&E.indexOf(L)<0&&(T[L]=x[L]);if(x!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,L=Object.getOwnPropertySymbols(x);v<L.length;v++)E.indexOf(L[v])<0&&Object.prototype.propertyIsEnumerable.call(x,L[v])&&(T[L[v]]=x[L[v]]);return T};Object.is||Object.defineProperty(Object,"is",{value:function(E,T){return E===T&&(E!==0||1/E===1/T)||E!==E&&T!==T}});var w=function(E,T){var L=E.width,v=E.height,V=g(E,["width","height"]),k=T.width,Y=T.height,P=g(T,["width","height"]),j="keep";if((v!==Y||L!==k)&&(j="update"),Object.keys(V).length!==Object.keys(P).length)return"create";for(var I=0,$=Object.keys(V);I<$.length;I++){var U=$[I];if(!Object.is(V[U],P[U])){j="create";break}}return j},C=function(E,T){return E.length!==T.length?!1:E.every(function(L,v){var V=T[v];return L.length!==V.length?!1:L.every(function(k,Y){return k===V[Y]})})}},react:p=>{p.exports=o},uplot:p=>{p.exports=n}},c={};function u(p){var h=c[p];if(h!==void 0)return h.exports;var S=c[p]={exports:{}};return r[p](S,S.exports,u),S.exports}u.n=p=>{var h=p&&p.__esModule?()=>p.default:()=>p;return u.d(h,{a:h}),h},u.d=(p,h)=>{for(var S in h)u.o(h,S)&&!u.o(p,S)&&Object.defineProperty(p,S,{enumerable:!0,get:h[S]})},u.o=(p,h)=>Object.prototype.hasOwnProperty.call(p,h),u.r=p=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(p,"__esModule",{value:!0})};var d={};return(()=>{/*!*******************************!*\
  !*** ./react/uplot-react.tsx ***!
  \*******************************/u.r(d),u.d(d,{default:()=>C});var p=u("react"),h=u.n(p),S=u("uplot"),g=u.n(S),w=u("./common/index.ts");function C(x){var E=x.options,T=x.data,L=x.target,v=x.onDelete,V=x.onCreate,k=x.resetScales,Y=k===void 0?!0:k,P=x.className,j=(0,p.useRef)(null),I=(0,p.useRef)(null),$=(0,p.useRef)(E),U=(0,p.useRef)(L),M=(0,p.useRef)(T),J=(0,p.useRef)(V),N=(0,p.useRef)(v);(0,p.useEffect)(function(){J.current=V,N.current=v});var G=(0,p.useCallback)(function(K){var F;K&&((F=N.current)===null||F===void 0||F.call(N,K),K.destroy(),j.current=null)},[]),z=(0,p.useCallback)(function(){var K,F=new(g())($.current,M.current,U.current||I.current);j.current=F,(K=J.current)===null||K===void 0||K.call(J,F)},[]);return(0,p.useEffect)(function(){return z(),function(){G(j.current)}},[z,G]),(0,p.useEffect)(function(){if($.current!==E){var K=(0,w.optionsUpdateState)($.current,E);$.current=E,!j.current||K==="create"?(G(j.current),z()):K==="update"&&j.current.setSize({width:E.width,height:E.height})}},[E,z,G]),(0,p.useEffect)(function(){M.current!==T&&(j.current?(0,w.dataMatch)(M.current,T)||(Y?j.current.setData(T,!0):(j.current.setData(T,!1),j.current.redraw())):(M.current=T,z()),M.current=T)},[T,Y,z]),(0,p.useEffect)(function(){return U.current!==L&&(U.current=L,z()),function(){return G(j.current)}},[L,z,G]),L?null:h().createElement("div",{ref:I,className:P})}})(),d=d.default,d})())}(fn)),fn.exports}var fu=su();const uu=is(fu),cu=({data:e,options:l})=>Qt.jsx("div",{style:{padding:"20px"},children:Qt.jsx(uu,{options:l,data:e})}),Ho=["red","blue","green","orange","purple","teal"],au=(e,l)=>({title:e,width:1e3,height:300,scales:{x:{time:!1}},series:[{label:"Время мс"},{label:"Значение",stroke:l,width:2,fill:`${l}20`,points:{show:!1}}],axes:[{label:"Время"},{label:"Значение"}],cursor:{drag:{x:!0,y:!1}},legend:{show:!0,live:!1}}),mu=()=>{const[e,l,o,n]=rs(c=>[c.devicesChartBuffers,c.chartNotificationStart,c.chartNotificationStop,c.device],ss);return os.useEffect(()=>(n&&l(),()=>{n&&o()}),[n]),e&&Object.keys(e).length>0&&Object.values(e).some(c=>Object.values(c).some(u=>u.length>0))?Qt.jsx("div",{children:Object.entries(e).map(([c,u],d)=>{const p=u[0],h=(p==null?void 0:p.length)||0,S=Array.from({length:h},(g,w)=>w);return Qt.jsxs("div",{style:{marginBottom:"4rem"},children:[Qt.jsxs("h2",{children:["Устройство ",d+1," (ID: ",c,")"]}),Object.entries(u).map(([g,w])=>{const C=[S,w],x=Number(g),E=Ho[x%Ho.length],T=`Канал ${x+1}`;return Qt.jsx(cu,{data:C,options:au(T,E)},g)})]},c)})}):Qt.jsx("div",{children:"Нет данных для графиков"})};export{mu as default};
